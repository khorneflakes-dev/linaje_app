import{f as le,a as W,l as be,t as Rp,o as cc,m as pt,j as Ap,d as Ie}from"../chunks/6KtgZ7QJ.js";import{i as nr}from"../chunks/BuAR9j_z.js";import{a as Cc,c as Ym,o as Zm,w as hl}from"../chunks/B7lZ6dmF.js";import{ae as kp,aS as Wm,aV as Xm,S as Pr,h as kt,a0 as Jm,a as lc,I as Qm,H as $m,l as g,at as Ip,ah as e_,K as t_,U as gl,a4 as Nr,e as qn,J as n_,a9 as r_,R as vl,c as i_,b as dc,s as o_,aW as Tp,a7 as Pp,aX as Np,aY as Op,am as qc,C as pl,aZ as a_,r as Mp,p as s_,a_ as Or,F as u_,a$ as c_,a2 as l_,b0 as d_,b1 as f_,a6 as h_,d as g_,ai as Dp,i as Ce,D as v_,n as et,ac as p_,t as oe,b2 as an,u as y_,x as ae,y as ue,z as re,aE as I,ab as Gt,b3 as gn,v as ge,A as se,w as ye,T as rr,b4 as Lp,g as yt,aC as xe,an as j,b5 as Bn,b6 as Se,b7 as Pe,b8 as m_,ar as yl}from"../chunks/D4wTaSPn.js";import{p as U,r as wt,i as pe,b as Kt,c as Rc,s as Tt,a as __,d as ml}from"../chunks/C0N5jcyQ.js";import{b as dt,s as Ne,C as Ac,S as ir,a as ce,c as Ze,d as jt,e as We}from"../chunks/CPlsLb32.js";import{s as rt,c as b_}from"../chunks/BIALjLrZ.js";const w_=[];function zp(e,t=!1,n=!1){return Mn(e,new Map,"",w_,null,n)}function Mn(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var a=t.get(e);if(a!==void 0)return a;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(kp(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var u=0;u<e.length;u+=1){var l=e[u];u in e&&(s[u]=Mn(l,t,n,r,null,o))}return s}if(Wm(e)===Xm){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Mn(e[c],t,n,r,null,o);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Mn(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function x_(e,t,n){for(var r=[],i=t.length,o=0;o<i;o++)d_(t[o].e,r,!0);f_(r,()=>{var a=r.length===0&&n!==null;if(a){var s=n,u=s.parentNode;h_(u),u.append(s),e.items.clear(),De(e,t[0].prev,t[i-1].next)}for(var l=0;l<i;l++){var c=t[l];a||(e.items.delete(c.k),De(e,c.prev,c.next)),g_(c.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function kc(e,t,n,r,i,o=null){var a=e,s=new Map,u=null,l=(t&Tp)!==0,c=(t&Np)!==0,d=(t&Op)!==0;if(l){var f=e;a=kt?Pr(Jm(f)):f.appendChild(lc())}kt&&Qm();var h=null,m=Ip(()=>{var _=n();return kp(_)?_:_==null?[]:Pp(_)}),p,v=!0;function y(){E_(x,p,a,t,r),h!==null&&(p.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):Mp(h.effect),b.first=h.effect):s_(h.effect,()=>{h=null}))}var b=$m(()=>{p=g(m);var _=p.length;let q=!1;if(kt){var C=e_(a)===t_;C!==(_===0)&&(a=gl(),Pr(a),Nr(!1),q=!0)}for(var A=new Set,P=i_,O=null,D=o_(),S=0;S<_;S+=1){kt&&qn.nodeType===n_&&qn.data===r_&&(a=qn,q=!0,Nr(!1));var E=p[S],R=r(E,S),w=v?null:s.get(R);w?(c&&vl(w.v,E),d?vl(w.i,S):w.i=S,D&&P.skipped_effects.delete(w.e)):(w=S_(v?a:null,O,E,R,S,i,t,n),v&&(w.o=!0,O===null?u=w:O.next=w,O=w),s.set(R,w)),A.add(R)}if(_===0&&o&&!h)if(v)h={fragment:null,effect:dc(()=>o(a))};else{var k=document.createDocumentFragment(),T=lc();k.append(T),h={fragment:k,effect:dc(()=>o(T))}}if(kt&&_>0&&Pr(gl()),!v)if(D){for(const[z,B]of s)A.has(z)||P.skipped_effects.add(B.e);P.oncommit(y),P.ondiscard(()=>{})}else y();q&&Nr(!0),g(m)}),x={effect:b,items:s,first:u};v=!1,kt&&(a=qn)}function E_(e,t,n,r,i){var o=(r&c_)!==0,a=t.length,s=e.items,u=e.first,l,c=null,d,f=[],h=[],m,p,v,y;if(o)for(y=0;y<a;y+=1)m=t[y],p=i(m,y),v=s.get(p),v.o&&(v.a?.measure(),(d??=new Set).add(v));for(y=0;y<a;y+=1){if(m=t[y],p=i(m,y),v=s.get(p),e.first??=v,!v.o){v.o=!0;var b=c?c.next:u;De(e,c,v),De(e,v,b),Mr(v,b,n),c=v,f=[],h=[],u=c.next;continue}if((v.e.f&Or)!==0&&(Mp(v.e),o&&(v.a?.unfix(),(d??=new Set).delete(v))),v!==u){if(l!==void 0&&l.has(v)){if(f.length<h.length){var x=h[0],_;c=x.prev;var q=f[0],C=f[f.length-1];for(_=0;_<f.length;_+=1)Mr(f[_],x,n);for(_=0;_<h.length;_+=1)l.delete(h[_]);De(e,q.prev,C.next),De(e,c,q),De(e,C,x),u=x,c=C,y-=1,f=[],h=[]}else l.delete(v),Mr(v,u,n),De(e,v.prev,v.next),De(e,v,c===null?e.first:c.next),De(e,c,v),c=v;continue}for(f=[],h=[];u!==null&&u.k!==p;)(u.e.f&Or)===0&&(l??=new Set).add(u),h.push(u),u=u.next;if(u===null)continue;v=u}f.push(v),c=v,u=v.next}let A=s.size>a;if(u!==null||l!==void 0){for(var P=l===void 0?[]:Pp(l);u!==null;)(u.e.f&Or)===0&&P.push(u),u=u.next;var O=P.length;if(A=s.size-O>a,O>0){var D=(r&Tp)!==0&&a===0?n:null;if(o){for(y=0;y<O;y+=1)P[y].a?.measure();for(y=0;y<O;y+=1)P[y].a?.fix()}x_(e,P,D)}}if(A)for(const S of s.values())S.o||(De(e,c,S),c=S);e.effect.last=c&&c.e,o&&u_(()=>{if(d!==void 0)for(v of d)v.a?.apply()})}function S_(e,t,n,r,i,o,a,s){var u=(a&Np)!==0,l=(a&a_)===0,c=u?l?qc(n,!1,!1):pl(n):n,d=(a&Op)===0?i:pl(i),f={i:d,v:c,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var h=document.createDocumentFragment();h.append(e=lc())}return f.e=dc(()=>o(e,c,d,s)),t!==null&&(t.next=f),f}finally{}}function Mr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var a=l_(o);i.before(o),o=a}}function De(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function qe(e,t,n){Dp(()=>{var r=Ce(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};v_(()=>{var a=n();et(a),i&&p_(o,a)&&(o=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}class Ic{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#e.get(t);i.delete(n),i.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Ic.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var C_=new Ic({box:"border-box"});function _l(e,t,n){var r=C_.observe(e,()=>n(e[t]));Dp(()=>(Ce(()=>n(e[t])),r))}function q_(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}var R_={value:()=>{}};function or(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dn(n)}function Dn(e){this._=e}function A_(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dn.prototype=or.prototype={constructor:Dn,on:function(e,t){var n=this._,r=A_(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=k_(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=bl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function k_(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=R_,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fc="http://www.w3.org/1999/xhtml";const wl={svg:"http://www.w3.org/2000/svg",xhtml:fc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ar(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wl.hasOwnProperty(t)?{space:wl[t],local:e}:e}function I_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fc&&t.documentElement.namespaceURI===fc?t.createElement(e):t.createElementNS(n,e)}}function T_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fp(e){var t=ar(e);return(t.local?T_:I_)(t)}function P_(){}function Tc(e){return e==null?P_:function(){return this.querySelector(e)}}function N_(e){typeof e!="function"&&(e=Tc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Te(r,this._parents)}function O_(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function M_(){return[]}function Hp(e){return e==null?M_:function(){return this.querySelectorAll(e)}}function D_(e){return function(){return O_(e.apply(this,arguments))}}function L_(e){typeof e=="function"?e=D_(e):e=Hp(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new Te(r,i)}function Bp(e){return function(){return this.matches(e)}}function Vp(e){return function(t){return t.matches(e)}}var z_=Array.prototype.find;function F_(e){return function(){return z_.call(this.children,e)}}function H_(){return this.firstElementChild}function B_(e){return this.select(e==null?H_:F_(typeof e=="function"?e:Vp(e)))}var V_=Array.prototype.filter;function G_(){return Array.from(this.children)}function K_(e){return function(){return V_.call(this.children,e)}}function j_(e){return this.selectAll(e==null?G_:K_(typeof e=="function"?e:Vp(e)))}function U_(e){typeof e!="function"&&(e=Bp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new Te(r,this._parents)}function Gp(e){return new Array(e.length)}function Y_(){return new Te(this._enter||this._groups.map(Gp),this._parents)}function Vn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vn.prototype={constructor:Vn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Z_(e){return function(){return e}}function W_(e,t,n,r,i,o){for(var a=0,s,u=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Vn(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function X_(e,t,n,r,i,o,a){var s,u,l=new Map,c=t.length,d=o.length,f=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(f[s]=h=a.call(u,u.__data__,s,t)+"",l.has(h)?i[s]=u:l.set(h,u));for(s=0;s<d;++s)h=a.call(e,o[s],s,o)+"",(u=l.get(h))?(r[s]=u,u.__data__=o[s],l.delete(h)):n[s]=new Vn(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(f[s])===u&&(i[s]=u)}function J_(e){return e.__data__}function Q_(e,t){if(!arguments.length)return Array.from(this,J_);var n=t?X_:W_,r=this._parents,i=this._groups;typeof e!="function"&&(e=Z_(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],f=d.length,h=$_(e.call(c,c&&c.__data__,l,r)),m=h.length,p=s[l]=new Array(m),v=a[l]=new Array(m),y=u[l]=new Array(f);n(c,d,p,v,y,h,t);for(var b=0,x=0,_,q;b<m;++b)if(_=p[b]){for(b>=x&&(x=b+1);!(q=v[x])&&++x<m;);_._next=q||null}}return a=new Te(a,r),a._enter=s,a._exit=u,a}function $_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e0(){return new Te(this._exit||this._groups.map(Gp),this._parents)}function t0(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function n0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),h,m=0;m<d;++m)(h=l[m]||c[m])&&(f[m]=h);for(;u<i;++u)s[u]=n[u];return new Te(s,this._parents)}function r0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function i0(e){e||(e=o0);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new Te(i,this._parents).order()}function o0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function a0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function s0(){return Array.from(this)}function u0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function c0(){let e=0;for(const t of this)++e;return e}function l0(){return!this.node()}function d0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function f0(e){return function(){this.removeAttribute(e)}}function h0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g0(e,t){return function(){this.setAttribute(e,t)}}function v0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function p0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function y0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function m0(e,t){var n=ar(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?h0:f0:typeof t=="function"?n.local?y0:p0:n.local?v0:g0)(n,t))}function Kp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _0(e){return function(){this.style.removeProperty(e)}}function b0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function w0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function x0(e,t,n){return arguments.length>1?this.each((t==null?_0:typeof t=="function"?w0:b0)(e,t,n??"")):Dt(this.node(),e)}function Dt(e,t){return e.style.getPropertyValue(t)||Kp(e).getComputedStyle(e,null).getPropertyValue(t)}function E0(e){return function(){delete this[e]}}function S0(e,t){return function(){this[e]=t}}function C0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function q0(e,t){return arguments.length>1?this.each((t==null?E0:typeof t=="function"?C0:S0)(e,t)):this.node()[e]}function jp(e){return e.trim().split(/^|\s+/)}function Pc(e){return e.classList||new Up(e)}function Up(e){this._node=e,this._names=jp(e.getAttribute("class")||"")}Up.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yp(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Zp(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function R0(e){return function(){Yp(this,e)}}function A0(e){return function(){Zp(this,e)}}function k0(e,t){return function(){(t.apply(this,arguments)?Yp:Zp)(this,e)}}function I0(e,t){var n=jp(e+"");if(arguments.length<2){for(var r=Pc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?k0:t?R0:A0)(n,t))}function T0(){this.textContent=""}function P0(e){return function(){this.textContent=e}}function N0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function O0(e){return arguments.length?this.each(e==null?T0:(typeof e=="function"?N0:P0)(e)):this.node().textContent}function M0(){this.innerHTML=""}function D0(e){return function(){this.innerHTML=e}}function L0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function z0(e){return arguments.length?this.each(e==null?M0:(typeof e=="function"?L0:D0)(e)):this.node().innerHTML}function F0(){this.nextSibling&&this.parentNode.appendChild(this)}function H0(){return this.each(F0)}function B0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V0(){return this.each(B0)}function G0(e){var t=typeof e=="function"?e:Fp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function K0(){return null}function j0(e,t){var n=typeof e=="function"?e:Fp(e),r=t==null?K0:typeof t=="function"?t:Tc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function U0(){var e=this.parentNode;e&&e.removeChild(this)}function Y0(){return this.each(U0)}function Z0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function X0(e){return this.select(e?W0:Z0)}function J0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Q0(e){return function(t){e.call(this,t,this.__data__)}}function $0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function eb(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function tb(e,t,n){return function(){var r=this.__on,i,o=Q0(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function nb(e,t,n){var r=$0(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?tb:eb,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Wp(e,t,n){var r=Kp(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function rb(e,t){return function(){return Wp(this,e,t)}}function ib(e,t){return function(){return Wp(this,e,t.apply(this,arguments))}}function ob(e,t){return this.each((typeof t=="function"?ib:rb)(e,t))}function*ab(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Xp=[null];function Te(e,t){this._groups=e,this._parents=t}function vn(){return new Te([[document.documentElement]],Xp)}function sb(){return this}Te.prototype=vn.prototype={constructor:Te,select:N_,selectAll:L_,selectChild:B_,selectChildren:j_,filter:U_,data:Q_,enter:Y_,exit:e0,join:t0,merge:n0,selection:sb,order:r0,sort:i0,call:a0,nodes:s0,node:u0,size:c0,empty:l0,each:d0,attr:m0,style:x0,property:q0,classed:I0,text:O0,html:z0,raise:H0,lower:V0,append:G0,insert:j0,remove:Y0,clone:X0,datum:J0,on:nb,dispatch:ob,[Symbol.iterator]:ab};function Le(e){return typeof e=="string"?new Te([[document.querySelector(e)]],[document.documentElement]):new Te([[e]],Xp)}function ub(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=ub(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const cb={passive:!1},sn={capture:!0,passive:!1};function Dr(e){e.stopImmediatePropagation()}function Nt(e){e.preventDefault(),e.stopImmediatePropagation()}function Jp(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",Nt,sn);"onselectstart"in t?n.on("selectstart.drag",Nt,sn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Qp(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Nt,sn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rn=e=>()=>e;function hc(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}hc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lb(e){return!e.ctrlKey&&!e.button}function db(){return this.parentNode}function fb(e,t){return t??{x:e.x,y:e.y}}function hb(){return navigator.maxTouchPoints||"ontouchstart"in this}function gb(){var e=lb,t=db,n=fb,r=hb,i={},o=or("start","drag","end"),a=0,s,u,l,c,d=0;function f(_){_.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",y,cb).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(_,q){if(!(c||!e.call(this,_,q))){var C=x(this,t.call(this,_,q),_,q,"mouse");C&&(Le(_.view).on("mousemove.drag",m,sn).on("mouseup.drag",p,sn),Jp(_.view),Dr(_),l=!1,s=_.clientX,u=_.clientY,C("start",_))}}function m(_){if(Nt(_),!l){var q=_.clientX-s,C=_.clientY-u;l=q*q+C*C>d}i.mouse("drag",_)}function p(_){Le(_.view).on("mousemove.drag mouseup.drag",null),Qp(_.view,l),Nt(_),i.mouse("end",_)}function v(_,q){if(e.call(this,_,q)){var C=_.changedTouches,A=t.call(this,_,q),P=C.length,O,D;for(O=0;O<P;++O)(D=x(this,A,_,q,C[O].identifier,C[O]))&&(Dr(_),D("start",_,C[O]))}}function y(_){var q=_.changedTouches,C=q.length,A,P;for(A=0;A<C;++A)(P=i[q[A].identifier])&&(Nt(_),P("drag",_,q[A]))}function b(_){var q=_.changedTouches,C=q.length,A,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<C;++A)(P=i[q[A].identifier])&&(Dr(_),P("end",_,q[A]))}function x(_,q,C,A,P,O){var D=o.copy(),S=je(O||C,q),E,R,w;if((w=n.call(_,new hc("beforestart",{sourceEvent:C,target:f,identifier:P,active:a,x:S[0],y:S[1],dx:0,dy:0,dispatch:D}),A))!=null)return E=w.x-S[0]||0,R=w.y-S[1]||0,function k(T,z,B){var H=S,V;switch(T){case"start":i[P]=k,V=a++;break;case"end":delete i[P],--a;case"drag":S=je(B||z,q),V=a;break}D.call(T,_,new hc(T,{sourceEvent:z,subject:w,target:f,identifier:P,active:V,x:S[0]+E,y:S[1]+R,dx:S[0]-H[0],dy:S[1]-H[1],dispatch:D}),A)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Rn(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:Rn(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Rn(_),f):n},f.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Rn(!!_),f):r},f.on=function(){var _=o.on.apply(o,arguments);return _===o?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function Nc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $p(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function pn(){}var un=.7,Gn=1/un,Ot="\\s*([+-]?\\d+)\\s*",cn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vb=/^#([0-9a-f]{3,8})$/,pb=new RegExp(`^rgb\\(${Ot},${Ot},${Ot}\\)$`),yb=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),mb=new RegExp(`^rgba\\(${Ot},${Ot},${Ot},${cn}\\)$`),_b=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${cn}\\)$`),bb=new RegExp(`^hsl\\(${cn},${Ye},${Ye}\\)$`),wb=new RegExp(`^hsla\\(${cn},${Ye},${Ye},${cn}\\)$`),xl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nc(pn,mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:El,formatHex:El,formatHex8:xb,formatHsl:Eb,formatRgb:Sl,toString:Sl});function El(){return this.rgb().formatHex()}function xb(){return this.rgb().formatHex8()}function Eb(){return ey(this).formatHsl()}function Sl(){return this.rgb().formatRgb()}function mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=vb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cl(t):n===3?new Re(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?An(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?An(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pb.exec(e))?new Re(t[1],t[2],t[3],1):(t=yb.exec(e))?new Re(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mb.exec(e))?An(t[1],t[2],t[3],t[4]):(t=_b.exec(e))?An(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bb.exec(e))?Al(t[1],t[2]/100,t[3]/100,1):(t=wb.exec(e))?Al(t[1],t[2]/100,t[3]/100,t[4]):xl.hasOwnProperty(e)?Cl(xl[e]):e==="transparent"?new Re(NaN,NaN,NaN,0):null}function Cl(e){return new Re(e>>16&255,e>>8&255,e&255,1)}function An(e,t,n,r){return r<=0&&(e=t=n=NaN),new Re(e,t,n,r)}function Sb(e){return e instanceof pn||(e=mt(e)),e?(e=e.rgb(),new Re(e.r,e.g,e.b,e.opacity)):new Re}function gc(e,t,n,r){return arguments.length===1?Sb(e):new Re(e,t,n,r??1)}function Re(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Nc(Re,gc,$p(pn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new Re(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Re(vt(this.r),vt(this.g),vt(this.b),Kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ql,formatHex:ql,formatHex8:Cb,formatRgb:Rl,toString:Rl}));function ql(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}`}function Cb(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}${gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rl(){const e=Kn(this.opacity);return`${e===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${e===1?")":`, ${e})`}`}function Kn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gt(e){return e=vt(e),(e<16?"0":"")+e.toString(16)}function Al(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ze(e,t,n,r)}function ey(e){if(e instanceof ze)return new ze(e.h,e.s,e.l,e.opacity);if(e instanceof pn||(e=mt(e)),!e)return new ze;if(e instanceof ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ze(a,s,u,e.opacity)}function qb(e,t,n,r){return arguments.length===1?ey(e):new ze(e,t,n,r??1)}function ze(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nc(ze,qb,$p(pn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Re(Lr(e>=240?e-240:e+120,i,r),Lr(e,i,r),Lr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ze(kl(this.h),kn(this.s),kn(this.l),Kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kn(this.opacity);return`${e===1?"hsl(":"hsla("}${kl(this.h)}, ${kn(this.s)*100}%, ${kn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kl(e){return e=(e||0)%360,e<0?e+360:e}function kn(e){return Math.max(0,Math.min(1,e||0))}function Lr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Oc=e=>()=>e;function Rb(e,t){return function(n){return e+n*t}}function Ab(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function kb(e){return(e=+e)==1?ty:function(t,n){return n-t?Ab(t,n,e):Oc(isNaN(t)?n:t)}}function ty(e,t){var n=t-e;return n?Rb(e,n):Oc(isNaN(e)?t:e)}const jn=(function e(t){var n=kb(t);function r(i,o){var a=n((i=gc(i)).r,(o=gc(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=ty(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r})(1);function Ib(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Tb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pb(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=on(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Nb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ob(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=on(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var vc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zr=new RegExp(vc.source,"g");function Mb(e){return function(){return e}}function Db(e){return function(t){return e(t)+""}}function ny(e,t){var n=vc.lastIndex=zr.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=vc.exec(e))&&(i=zr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Ue(r,i)})),n=zr.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?Db(u[0].x):Mb(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function on(e,t){var n=typeof t,r;return t==null||n==="boolean"?Oc(t):(n==="number"?Ue:n==="string"?(r=mt(t))?(t=r,jn):ny:t instanceof mt?jn:t instanceof Date?Nb:Tb(t)?Ib:Array.isArray(t)?Pb:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ob:Ue)(e,t)}var Il=180/Math.PI,pc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ry(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Il,skewX:Math.atan(u)*Il,scaleX:a,scaleY:s}}var In;function Lb(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pc:ry(t.a,t.b,t.c,t.d,t.e,t.f)}function zb(e){return e==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",e),!(e=In.transform.baseVal.consolidate()))?pc:(e=e.matrix,ry(e.a,e.b,e.c,e.d,e.e,e.f))}function iy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,f,h,m){if(l!==d||c!==f){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ue(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ue(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,h,m){if(l!==d||c!==f){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var m=-1,p=f.length,v;++m<p;)d[(v=f[m]).i]=v.x(h);return d.join("")}}}var Fb=iy(Lb,"px, ","px)","deg)"),Hb=iy(zb,", ",")",")"),Bb=1e-12;function Tl(e){return((e=Math.exp(e))+1/e)/2}function Vb(e){return((e=Math.exp(e))-1/e)/2}function Gb(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ln=(function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],d=a[1],f=a[2],h=c-s,m=d-u,p=h*h+m*m,v,y;if(p<Bb)y=Math.log(f/l)/t,v=function(A){return[s+A*h,u+A*m,l*Math.exp(t*A*y)]};else{var b=Math.sqrt(p),x=(f*f-l*l+r*p)/(2*l*n*b),_=(f*f-l*l-r*p)/(2*f*n*b),q=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(_*_+1)-_);y=(C-q)/t,v=function(A){var P=A*y,O=Tl(q),D=l/(n*b)*(O*Gb(t*P+q)-Vb(q));return[s+D*h,u+D*m,l*O/Tl(t*P+q)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i})(Math.SQRT2,2,4);var Lt=0,$t=0,Jt=0,oy=1e3,Un,en,Yn=0,_t=0,sr=0,ln=typeof performance=="object"&&performance.now?performance:Date,ay=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mc(){return _t||(ay(Kb),_t=ln.now()+sr)}function Kb(){_t=0}function Zn(){this._call=this._time=this._next=null}Zn.prototype=sy.prototype={constructor:Zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mc():+n)+(t==null?0:+t),!this._next&&en!==this&&(en?en._next=this:Un=this,en=this),this._call=e,this._time=n,yc()},stop:function(){this._call&&(this._call=null,this._time=1/0,yc())}};function sy(e,t,n){var r=new Zn;return r.restart(e,t,n),r}function jb(){Mc(),++Lt;for(var e=Un,t;e;)(t=_t-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Lt}function Pl(){_t=(Yn=ln.now())+sr,Lt=$t=0;try{jb()}finally{Lt=0,Yb(),_t=0}}function Ub(){var e=ln.now(),t=e-Yn;t>oy&&(sr-=t,Yn=e)}function Yb(){for(var e,t=Un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Un=n);en=e,yc(r)}function yc(e){if(!Lt){$t&&($t=clearTimeout($t));var t=e-_t;t>24?(e<1/0&&($t=setTimeout(Pl,e-ln.now()-sr)),Jt&&(Jt=clearInterval(Jt))):(Jt||(Yn=ln.now(),Jt=setInterval(Ub,oy)),Lt=1,ay(Pl))}}function Nl(e,t,n){var r=new Zn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Zb=or("start","end","cancel","interrupt"),Wb=[],uy=0,Ol=1,mc=2,zn=3,Ml=4,_c=5,Fn=6;function ur(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Xb(e,n,{name:t,index:r,group:i,on:Zb,tween:Wb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:uy})}function Dc(e,t){var n=Be(e,t);if(n.state>uy)throw new Error("too late; already scheduled");return n}function Je(e,t){var n=Be(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function Be(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xb(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=sy(o,0,n.time);function o(l){n.state=Ol,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,h;if(n.state!==Ol)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===zn)return Nl(a);h.state===Ml?(h.state=Fn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Fn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Nl(function(){n.state===zn&&(n.state=Ml,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=mc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mc){for(n.state=zn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=_c,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===_c&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Fn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Hn(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>mc&&r.state<_c,r.state=Fn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Jb(e){return this.each(function(){Hn(this,e)})}function Qb(e,t){var n,r;return function(){var i=Je(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function $b(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Je(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function ew(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Be(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Qb:$b)(n,e,t))}function Lc(e,t,n){var r=e._id;return e.each(function(){var i=Je(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Be(i,r).value[t]}}function cy(e,t){var n;return(typeof t=="number"?Ue:t instanceof mt?jn:(n=mt(t))?(t=n,jn):ny)(e,t)}function tw(e){return function(){this.removeAttribute(e)}}function nw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rw(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function iw(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function ow(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function aw(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function sw(e,t){var n=ar(e),r=n==="transform"?Hb:cy;return this.attrTween(e,typeof t=="function"?(n.local?aw:ow)(n,r,Lc(this,"attr."+e,t)):t==null?(n.local?nw:tw)(n):(n.local?iw:rw)(n,r,t))}function uw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lw(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&cw(e,o)),n}return i._value=t,i}function dw(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&uw(e,o)),n}return i._value=t,i}function fw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ar(e);return this.tween(n,(r.local?lw:dw)(r,t))}function hw(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function gw(e,t){return t=+t,function(){Dc(this,e).delay=t}}function vw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hw:gw)(t,e)):Be(this.node(),t).delay}function pw(e,t){return function(){Je(this,e).duration=+t.apply(this,arguments)}}function yw(e,t){return t=+t,function(){Je(this,e).duration=t}}function mw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pw:yw)(t,e)):Be(this.node(),t).duration}function _w(e,t){if(typeof t!="function")throw new Error;return function(){Je(this,e).ease=t}}function bw(e){var t=this._id;return arguments.length?this.each(_w(t,e)):Be(this.node(),t).ease}function ww(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Je(this,e).ease=n}}function xw(e){if(typeof e!="function")throw new Error;return this.each(ww(this._id,e))}function Ew(e){typeof e!="function"&&(e=Bp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new ot(r,this._parents,this._name,this._id)}function Sw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new ot(a,this._parents,this._name,this._id)}function Cw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qw(e,t,n){var r,i,o=Cw(t)?Dc:Je;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function Rw(e,t){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(e):this.each(qw(n,e,t))}function Aw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function kw(){return this.on("end.remove",Aw(this._id))}function Iw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Tc(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,ur(l[f],t,n,f,l,Be(c,n)));return new ot(o,this._parents,t,n)}function Tw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Hp(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,m=Be(c,n),p=0,v=f.length;p<v;++p)(h=f[p])&&ur(h,t,n,p,f,m);o.push(f),a.push(c)}return new ot(o,a,t,n)}var Pw=vn.prototype.constructor;function Nw(){return new Pw(this._groups,this._parents)}function Ow(e,t){var n,r,i;return function(){var o=Dt(this,e),a=(this.style.removeProperty(e),Dt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function ly(e){return function(){this.style.removeProperty(e)}}function Mw(e,t,n){var r,i=n+"",o;return function(){var a=Dt(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function Dw(e,t,n){var r,i,o;return function(){var a=Dt(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Dt(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function Lw(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=Je(this,e),l=u.on,c=u.value[o]==null?s||(s=ly(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function zw(e,t,n){var r=(e+="")=="transform"?Fb:cy;return t==null?this.styleTween(e,Ow(e,r)).on("end.style."+e,ly(e)):typeof t=="function"?this.styleTween(e,Dw(e,r,Lc(this,"style."+e,t))).each(Lw(this._id,e)):this.styleTween(e,Mw(e,r,t),n).on("end.style."+e,null)}function Fw(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Hw(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Fw(e,a,n)),r}return o._value=t,o}function Bw(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Hw(e,t,n??""))}function Vw(e){return function(){this.textContent=e}}function Gw(e){return function(){var t=e(this);this.textContent=t??""}}function Kw(e){return this.tween("text",typeof e=="function"?Gw(Lc(this,"text",e)):Vw(e==null?"":e+""))}function jw(e){return function(t){this.textContent=e.call(this,t)}}function Uw(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jw(i)),t}return r._value=e,r}function Yw(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Uw(e))}function Zw(){for(var e=this._name,t=this._id,n=dy(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Be(u,t);ur(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ot(r,this._parents,e,n)}function Ww(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var l=Je(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&o()})}var Xw=0;function ot(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dy(){return++Xw}var $e=vn.prototype;ot.prototype={constructor:ot,select:Iw,selectAll:Tw,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:Ew,merge:Sw,selection:Nw,transition:Zw,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:Rw,attr:sw,attrTween:fw,style:zw,styleTween:Bw,text:Kw,textTween:Yw,remove:kw,tween:ew,delay:vw,duration:mw,ease:bw,easeVarying:xw,end:Ww,[Symbol.iterator]:$e[Symbol.iterator]};function Jw(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qw={time:null,delay:0,duration:250,ease:Jw};function $w(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function e1(e){var t,n;e instanceof ot?(t=e._id,e=e._name):(t=dy(),(n=Qw).time=Mc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&ur(u,e,t,l,a,n||$w(u,t));return new ot(r,this._parents,e,t)}vn.prototype.interrupt=Jb;vn.prototype.transition=e1;const Tn=e=>()=>e;function t1(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tt(e,t,n){this.k=e,this.x=t,this.y=n}tt.prototype={constructor:tt,scale:function(e){return e===1?this:new tt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cr=new tt(1,0,0);fy.prototype=tt.prototype;function fy(e){for(;!e.__zoom;)if(!(e=e.parentNode))return cr;return e.__zoom}function Fr(e){e.stopImmediatePropagation()}function Qt(e){e.preventDefault(),e.stopImmediatePropagation()}function n1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function r1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Dl(){return this.__zoom||cr}function i1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function o1(){return navigator.maxTouchPoints||"ontouchstart"in this}function a1(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function s1(){var e=n1,t=r1,n=a1,r=i1,i=o1,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Ln,l=or("start","zoom","end"),c,d,f,h=500,m=150,p=0,v=10;function y(w){w.property("__zoom",Dl).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,k,T,z){var B=w.selection?w.selection():w;B.property("__zoom",Dl),w!==B?q(w,k,T,z):B.interrupt().each(function(){C(this,arguments).event(z).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},y.scaleBy=function(w,k,T,z){y.scaleTo(w,function(){var B=this.__zoom.k,H=typeof k=="function"?k.apply(this,arguments):k;return B*H},T,z)},y.scaleTo=function(w,k,T,z){y.transform(w,function(){var B=t.apply(this,arguments),H=this.__zoom,V=T==null?_(B):typeof T=="function"?T.apply(this,arguments):T,G=H.invert(V),Y=typeof k=="function"?k.apply(this,arguments):k;return n(x(b(H,Y),V,G),B,a)},T,z)},y.translateBy=function(w,k,T,z){y.transform(w,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),a)},null,z)},y.translateTo=function(w,k,T,z,B){y.transform(w,function(){var H=t.apply(this,arguments),V=this.__zoom,G=z==null?_(H):typeof z=="function"?z.apply(this,arguments):z;return n(cr.translate(G[0],G[1]).scale(V.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),H,a)},z,B)};function b(w,k){return k=Math.max(o[0],Math.min(o[1],k)),k===w.k?w:new tt(k,w.x,w.y)}function x(w,k,T){var z=k[0]-T[0]*w.k,B=k[1]-T[1]*w.k;return z===w.x&&B===w.y?w:new tt(w.k,z,B)}function _(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function q(w,k,T,z){w.on("start.zoom",function(){C(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(z).end()}).tween("zoom",function(){var B=this,H=arguments,V=C(B,H).event(z),G=t.apply(B,H),Y=T==null?_(G):typeof T=="function"?T.apply(B,H):T,Z=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),N=B.__zoom,L=typeof k=="function"?k.apply(B,H):k,M=u(N.invert(Y).concat(Z/N.k),L.invert(Y).concat(Z/L.k));return function(F){if(F===1)F=L;else{var K=M(F),X=Z/K[2];F=new tt(X,Y[0]-K[0]*X,Y[1]-K[1]*X)}V.zoom(null,F)}})}function C(w,k,T){return!T&&w.__zooming||new A(w,k)}function A(w,k){this.that=w,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,k),this.taps=0}A.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,k){return this.mouse&&w!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var k=Le(this.that).datum();l.call(w,this.that,new t1(w,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),k)}};function P(w,...k){if(!e.apply(this,arguments))return;var T=C(this,k).event(w),z=this.__zoom,B=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,r.apply(this,arguments)))),H=je(w);if(T.wheel)(T.mouse[0][0]!==H[0]||T.mouse[0][1]!==H[1])&&(T.mouse[1]=z.invert(T.mouse[0]=H)),clearTimeout(T.wheel);else{if(z.k===B)return;T.mouse=[H,z.invert(H)],Hn(this),T.start()}Qt(w),T.wheel=setTimeout(V,m),T.zoom("mouse",n(x(b(z,B),T.mouse[0],T.mouse[1]),T.extent,a));function V(){T.wheel=null,T.end()}}function O(w,...k){if(f||!e.apply(this,arguments))return;var T=w.currentTarget,z=C(this,k,!0).event(w),B=Le(w.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",Z,!0),H=je(w,T),V=w.clientX,G=w.clientY;Jp(w.view),Fr(w),z.mouse=[H,this.__zoom.invert(H)],Hn(this),z.start();function Y(N){if(Qt(N),!z.moved){var L=N.clientX-V,M=N.clientY-G;z.moved=L*L+M*M>p}z.event(N).zoom("mouse",n(x(z.that.__zoom,z.mouse[0]=je(N,T),z.mouse[1]),z.extent,a))}function Z(N){B.on("mousemove.zoom mouseup.zoom",null),Qp(N.view,z.moved),Qt(N),z.event(N).end()}}function D(w,...k){if(e.apply(this,arguments)){var T=this.__zoom,z=je(w.changedTouches?w.changedTouches[0]:w,this),B=T.invert(z),H=T.k*(w.shiftKey?.5:2),V=n(x(b(T,H),z,B),t.apply(this,k),a);Qt(w),s>0?Le(this).transition().duration(s).call(q,V,z,w):Le(this).call(y.transform,V,z,w)}}function S(w,...k){if(e.apply(this,arguments)){var T=w.touches,z=T.length,B=C(this,k,w.changedTouches.length===z).event(w),H,V,G,Y;for(Fr(w),V=0;V<z;++V)G=T[V],Y=je(G,this),Y=[Y,this.__zoom.invert(Y),G.identifier],B.touch0?!B.touch1&&B.touch0[2]!==Y[2]&&(B.touch1=Y,B.taps=0):(B.touch0=Y,H=!0,B.taps=1+!!c);c&&(c=clearTimeout(c)),H&&(B.taps<2&&(d=Y[0],c=setTimeout(function(){c=null},h)),Hn(this),B.start())}}function E(w,...k){if(this.__zooming){var T=C(this,k).event(w),z=w.changedTouches,B=z.length,H,V,G,Y;for(Qt(w),H=0;H<B;++H)V=z[H],G=je(V,this),T.touch0&&T.touch0[2]===V.identifier?T.touch0[0]=G:T.touch1&&T.touch1[2]===V.identifier&&(T.touch1[0]=G);if(V=T.that.__zoom,T.touch1){var Z=T.touch0[0],N=T.touch0[1],L=T.touch1[0],M=T.touch1[1],F=(F=L[0]-Z[0])*F+(F=L[1]-Z[1])*F,K=(K=M[0]-N[0])*K+(K=M[1]-N[1])*K;V=b(V,Math.sqrt(F/K)),G=[(Z[0]+L[0])/2,(Z[1]+L[1])/2],Y=[(N[0]+M[0])/2,(N[1]+M[1])/2]}else if(T.touch0)G=T.touch0[0],Y=T.touch0[1];else return;T.zoom("touch",n(x(V,G,Y),T.extent,a))}}function R(w,...k){if(this.__zooming){var T=C(this,k).event(w),z=w.changedTouches,B=z.length,H,V;for(Fr(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),H=0;H<B;++H)V=z[H],T.touch0&&T.touch0[2]===V.identifier?delete T.touch0:T.touch1&&T.touch1[2]===V.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(V=je(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<v)){var G=Le(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:Tn(+w),y):r},y.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Tn(!!w),y):e},y.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Tn(!!w),y):i},y.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Tn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):t},y.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],y):[o[0],o[1]]},y.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(w){return arguments.length?(n=w,y):n},y.duration=function(w){return arguments.length?(s=+w,y):s},y.interpolate=function(w){return arguments.length?(u=w,y):u},y.on=function(){var w=l.on.apply(l,arguments);return w===l?y:w},y.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,y):Math.sqrt(p)},y.tapDistance=function(w){return arguments.length?(v=+w,y):v},y}const dn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},bc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],hy=["Enter"," ","Escape"],u1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var zt;(function(e){e.Strict="strict",e.Loose="loose"})(zt||(zt={}));var Mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Mt||(Mt={}));var Wn;(function(e){e.Partial="partial",e.Full="full"})(Wn||(Wn={}));const wc={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var lt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(lt||(lt={}));var Xn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Xn||(Xn={}));var J;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(J||(J={}));const Ll={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top};function c1(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function zl(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t?.has(o)||r.push(i)}),r.length&&n(r)}function l1(e){return e===null?null:e?"valid":"invalid"}const gy=e=>"id"in e&&"source"in e&&"target"in e,d1=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),zc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),yn=(e,t=[0,0])=>{const{width:n,height:r}=xt(e),i=e.origin??t,o=n*i[0],a=r*i[1];return{x:e.position.x-o,y:e.position.y-a}},f1=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let a=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(i):zc(i)?i:t.nodeLookup.get(i.id));const s=a?Jn(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return dr(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fr(n)},lr=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=dr(n,Jn(i)),r=!0)}),r?fr(n):{x:0,y:0,width:0,height:0}},Fc=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{const s={..._n(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const l of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=l;if(a&&!d||f)continue;const h=c.width??l.width??l.initialWidth??null,m=c.height??l.height??l.initialHeight??null,p=fn(s,Ht(l)),v=(h??0)*(m??0),y=o&&p>0;(!l.internals.handleBounds||y||p>=v||l.dragging)&&u.push(l)}return u},h1=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function g1(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function v1({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},a){if(e.size===0)return Promise.resolve(!0);const s=g1(e,a),u=lr(s),l=Hc(u,t,n,a?.minZoom??i,a?.maxZoom??o,a?.padding??.1);return await r.setViewport(l,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function vy({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:u,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},c=a.origin??r;let d=a.extent||i;if(a.extent==="parent"&&!a.expandParent)if(!s)o?.("005",dn.error005());else{const h=s.measured.width,m=s.measured.height;h&&m&&(d=[[u,l],[u+h,l+m]])}else s&&Bt(a.extent)&&(d=[[a.extent[0][0]+u,a.extent[0][1]+l],[a.extent[1][0]+u,a.extent[1][1]+l]]);const f=Bt(d)?bt(t,d,a.measured):t;return(a.measured.width===void 0||a.measured.height===void 0)&&o?.("015",dn.error015()),{position:{x:f.x-u+(a.measured.width??0)*c[0],y:f.y-l+(a.measured.height??0)*c[1]},positionAbsolute:f}}async function p1({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),a=[];for(const f of n){if(f.deletable===!1)continue;const h=o.has(f.id),m=!h&&f.parentId&&a.find(p=>p.id===f.parentId);(h||m)&&a.push(f)}const s=new Set(t.map(f=>f.id)),u=r.filter(f=>f.deletable!==!1),c=h1(a,u);for(const f of u)s.has(f.id)&&!c.find(m=>m.id===f.id)&&c.push(f);if(!i)return{edges:c,nodes:a};const d=await i({nodes:a,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const Ft=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),bt=(e={x:0,y:0},t,n)=>({x:Ft(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Ft(e.y,t[0][1],t[1][1]-(n?.height??0))});function py(e,t,n){const{width:r,height:i}=xt(n),{x:o,y:a}=n.internals.positionAbsolute;return bt(e,[[o,a],[o+r,a+i]],t)}const Fl=(e,t,n)=>e<t?Ft(Math.abs(e-t),1,t)/t:e>n?-Ft(Math.abs(e-n),1,t)/t:0,yy=(e,t,n=15,r=40)=>{const i=Fl(e.x,r,t.width-r)*n,o=Fl(e.y,r,t.height-r)*n;return[i,o]},dr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),xc=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),fr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ht=(e,t=[0,0])=>{const{x:n,y:r}=zc(e)?e.internals.positionAbsolute:yn(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Jn=(e,t=[0,0])=>{const{x:n,y:r}=zc(e)?e.internals.positionAbsolute:yn(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},y1=(e,t)=>fr(dr(xc(e),xc(t))),fn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Hl=e=>nt(e.width)&&nt(e.height)&&nt(e.x)&&nt(e.y),nt=e=>!isNaN(e)&&isFinite(e),m1=(e,t)=>{},mn=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),_n=({x:e,y:t},[n,r,i],o=!1,a=[1,1])=>{const s={x:(e-n)/i,y:(t-r)/i};return o?mn(s,a):s},Qn=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function It(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function _1(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=It(e,n),i=It(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=It(e.top??e.y??0,n),i=It(e.bottom??e.y??0,n),o=It(e.left??e.x??0,t),a=It(e.right??e.x??0,t);return{top:r,right:a,bottom:i,left:o,x:o+a,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function b1(e,t,n,r,i,o){const{x:a,y:s}=Qn(e,[t,n,r]),{x:u,y:l}=Qn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-u,d=o-l;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}const Hc=(e,t,n,r,i,o)=>{const a=_1(o,t,n),s=(t-a.x)/e.width,u=(n-a.y)/e.height,l=Math.min(s,u),c=Ft(l,r,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,p=b1(e,h,m,c,t,n),v={left:Math.min(p.left-a.left,0),top:Math.min(p.top-a.top,0),right:Math.min(p.right-a.right,0),bottom:Math.min(p.bottom-a.bottom,0)};return{x:h-v.left+v.right,y:m-v.top+v.bottom,zoom:c}},$n=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Bt(e){return e!=null&&e!=="parent"}function xt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function w1(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function x1(e,t={width:0,height:0},n,r,i){const o={...e},a=r.get(n);if(a){const s=a.origin||i;o.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return o}function E1(e){return{...u1,...e||{}}}function Hr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:a}=Fe(e),s=_n({x:o-(i?.left??0),y:a-(i?.top??0)},r),{x:u,y:l}=n?mn(s,t):s;return{xSnapped:u,ySnapped:l,...s}}const my=e=>({width:e.offsetWidth,height:e.offsetHeight}),_y=e=>e?.getRootNode?.()||window?.document,S1=["INPUT","SELECT","TEXTAREA"];function by(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:S1.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const wy=e=>"clientX"in e,Fe=(e,t)=>{const n=wy(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},Bl=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:i,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,...my(a)}})};function C1({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const u=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}function Pn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Vl({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case J.Left:return[t-Pn(t-r,o),n];case J.Right:return[t+Pn(r-t,o),n];case J.Top:return[t,n-Pn(n-i,o)];case J.Bottom:return[t,n+Pn(i-n,o)]}}function xy({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:i,targetPosition:o=J.Top,curvature:a=.25}){const[s,u]=Vl({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,c]=Vl({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,m]=C1({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${u} ${l},${c} ${r},${i}`,d,f,h,m]}function Ey({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function q1({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const o=i&&n?1e3:0,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function R1({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=dr(Jn(e),Jn(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return fn(a,fr(o))>0}const A1=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,k1=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),I1=(e,t)=>{if(!e.source||!e.target)return t;let n;return gy(e)?n={...e}:n={...e,id:A1(e)},k1(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Sy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=Ey({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const Gl={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}},T1=({source:e,sourcePosition:t=J.Bottom,target:n})=>t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Kl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function P1({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:i,offset:o,stepPosition:a}){const s=Gl[t],u=Gl[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+u.x*o,y:n.y+u.y*o},d=T1({source:l,sourcePosition:t,target:c}),f=d.x!==0?"x":"y",h=d[f];let m=[],p,v;const y={x:0,y:0},b={x:0,y:0},[,,x,_]=Ey({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*u[f]===-1){f==="x"?(p=i.x??l.x+(c.x-l.x)*a,v=i.y??(l.y+c.y)/2):(p=i.x??(l.x+c.x)/2,v=i.y??l.y+(c.y-l.y)*a);const C=[{x:p,y:l.y},{x:p,y:c.y}],A=[{x:l.x,y:v},{x:c.x,y:v}];s[f]===h?m=f==="x"?C:A:m=f==="x"?A:C}else{const C=[{x:l.x,y:c.y}],A=[{x:c.x,y:l.y}];if(f==="x"?m=s.x===h?A:C:m=s.y===h?C:A,t===r){const E=Math.abs(e[f]-n[f]);if(E<=o){const R=Math.min(o-1,o-E);s[f]===h?y[f]=(l[f]>e[f]?-1:1)*R:b[f]=(c[f]>n[f]?-1:1)*R}}if(t!==r){const E=f==="x"?"y":"x",R=s[f]===u[E],w=l[E]>c[E],k=l[E]<c[E];(s[f]===1&&(!R&&w||R&&k)||s[f]!==1&&(!R&&k||R&&w))&&(m=f==="x"?C:A)}const P={x:l.x+y.x,y:l.y+y.y},O={x:c.x+b.x,y:c.y+b.y},D=Math.max(Math.abs(P.x-m[0].x),Math.abs(O.x-m[0].x)),S=Math.max(Math.abs(P.y-m[0].y),Math.abs(O.y-m[0].y));D>=S?(p=(P.x+O.x)/2,v=m[0].y):(p=m[0].x,v=(P.y+O.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...m,{x:c.x+b.x,y:c.y+b.y},n],p,v,x,_]}function N1(e,t,n,r){const i=Math.min(Kl(e,t)/2,Kl(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+i*u}Q ${o},${a} ${o+i*s},${a}`}function Bc({sourceX:e,sourceY:t,sourcePosition:n=J.Bottom,targetX:r,targetY:i,targetPosition:o=J.Top,borderRadius:a=5,centerX:s,centerY:u,offset:l=20,stepPosition:c=.5}){const[d,f,h,m,p]=P1({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:u},offset:l,stepPosition:c});return[d.reduce((y,b,x)=>{let _="";return x>0&&x<d.length-1?_=N1(d[x-1],b,d[x+1],a):_=`${x===0?"M":"L"}${b.x} ${b.y}`,y+=_,y},""),f,h,m,p]}function jl(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function O1(e){const{sourceNode:t,targetNode:n}=e;if(!jl(t)||!jl(n))return null;const r=t.internals.handleBounds||Ul(t.handles),i=n.internals.handleBounds||Ul(n.handles),o=Yl(r?.source??[],e.sourceHandle),a=Yl(e.connectionMode===zt.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!o||!a)return e.onError?.("008",dn.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=o?.position||J.Bottom,u=a?.position||J.Top,l=hn(t,o,s),c=hn(n,a,u);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:u}}function Ul(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function hn(e,t,n=J.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??xt(e);if(r)return{x:i+a/2,y:o+s/2};switch(t?.position??n){case J.Top:return{x:i+a/2,y:o};case J.Right:return{x:i+a,y:o+s/2};case J.Bottom:return{x:i+a/2,y:o+s};case J.Left:return{x:i,y:o+s/2}}}function Yl(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Ec(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function M1(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((a,s)=>([s.markerStart||r,s.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const l=Ec(u,t);o.has(l)||(a.push({id:l,color:u.color||n,...u}),o.add(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const Cy=1e3,D1=10,Vc={nodeOrigin:[0,0],nodeExtent:bc,elevateNodesOnSelect:!0,defaults:{}},L1={...Vc,checkEquality:!0};function Gc(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function z1(e,t,n){const r=Gc(Vc,n);for(const i of e.values())if(i.parentId)Kc(i,e,t,r);else{const o=yn(i,r.nodeOrigin),a=Bt(i.extent)?i.extent:r.nodeExtent,s=bt(o,a,xt(i));i.internals.positionAbsolute=s}}function F1(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function H1(e,t,n,r){const i=Gc(L1,r);let o={i:-1},a=e.length>0;const s=new Map(t),u=i?.elevateNodesOnSelect?Cy:0;t.clear(),n.clear();for(const l of e){let c=s.get(l.id);if(i.checkEquality&&l===c?.internals.userNode)t.set(l.id,c);else{const d=yn(l,i.nodeOrigin),f=Bt(l.extent)?l.extent:i.nodeExtent,h=bt(d,f,xt(l));c={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:F1(l,c),z:qy(l,u),userNode:l}},t.set(l.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(a=!1),l.parentId&&Kc(c,t,n,r,o)}return a}function B1(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Kc(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:s}=Gc(Vc,r),u=e.parentId,l=t.get(u);if(!l){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}B1(e,n),i&&!l.parentId&&l.internals.rootParentIndex===void 0&&(l.internals.rootParentIndex=++i.i,l.internals.z=l.internals.z+i.i*D1),i&&l.internals.rootParentIndex!==void 0&&(i.i=l.internals.rootParentIndex);const c=o?Cy:0,{x:d,y:f,z:h}=V1(e,l,a,s,c),{positionAbsolute:m}=e.internals,p=d!==m.x||f!==m.y;(p||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:f}:m,z:h}})}function qy(e,t){return(nt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function V1(e,t,n,r,i){const{x:o,y:a}=t.internals.positionAbsolute,s=xt(e),u=yn(e,n),l=Bt(e.extent)?bt(u,e.extent,s):u;let c=bt({x:o+l.x,y:a+l.y},r,s);e.extent==="parent"&&(c=py(c,s,t));const d=qy(e,i),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=d?f+1:d}}function G1(e,t,n,r=[0,0]){const i=[],o=new Map;for(const a of e){const s=t.get(a.parentId);if(!s)continue;const u=o.get(a.parentId)?.expandedRect??Ht(s),l=y1(u,a.rect);o.set(a.parentId,{expandedRect:l,parent:s})}return o.size>0&&o.forEach(({expandedRect:a,parent:s},u)=>{const l=s.internals.positionAbsolute,c=xt(s),d=s.origin??r,f=a.x<l.x?Math.round(Math.abs(l.x-a.x)):0,h=a.y<l.y?Math.round(Math.abs(l.y-a.y)):0,m=Math.max(c.width,Math.round(a.width)),p=Math.max(c.height,Math.round(a.height)),v=(m-c.width)*d[0],y=(p-c.height)*d[1];(f>0||h>0||v||y)&&(i.push({id:u,type:"position",position:{x:s.position.x-f+v,y:s.position.y-h+y}}),n.get(u)?.forEach(b=>{e.some(x=>x.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+f,y:b.position.y+h}})})),(c.width<a.width||c.height<a.height||f||h)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(f?d[0]*f-v:0),height:p+(h?d[1]*h-y:0)}})}),i}function K1(e,t,n,r,i,o){const a=r?.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const u=[],l=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),s=!0;continue}const m=my(f.nodeElement),p=h.measured.width!==m.width||h.measured.height!==m.height;if(!!(m.width&&m.height&&(p||!h.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),b=Bt(h.extent)?h.extent:o;let{positionAbsolute:x}=h.internals;h.parentId&&h.extent==="parent"?x=py(x,m,t.get(h.parentId)):b&&(x=bt(x,b,m));const _={...h,measured:m,internals:{...h.internals,positionAbsolute:x,handleBounds:{source:Bl("source",f.nodeElement,y,c,h.id),target:Bl("target",f.nodeElement,y,c,h.id)}}};t.set(h.id,_),h.parentId&&Kc(_,t,n,{nodeOrigin:i}),s=!0,p&&(u.push({id:h.id,type:"dimensions",dimensions:m}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:Ht(_,i)}))}}if(d.length>0){const f=G1(d,t,n,i);u.push(...f)}return{changes:u,updatedInternals:s}}async function j1({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function Zl(e,t,n,r,i,o){let a=i;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${i}-${e}`;const u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),o){a=`${i}-${e}-${o}`;const l=r.get(a)||new Map;r.set(a,l.set(n,t))}}function U1(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:a=null,targetHandle:s=null}=r,u={edgeId:r.id,source:i,target:o,sourceHandle:a,targetHandle:s},l=`${i}-${a}--${o}-${s}`,c=`${o}-${s}--${i}-${a}`;Zl("source",u,c,e,i,a),Zl("target",u,l,e,o,s),t.set(r.id,r)}}function Ry(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ry(n,t):!1}function Wl(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Y1(e,t,n,r){const i=new Map;for(const[o,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!Ry(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(o);s&&i.set(o,{id:o,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return i}function Br({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[a,s]of t){const u=n.get(a)?.internals.userNode;u&&i.push({...u,position:s.position,dragging:r})}if(!e)return[i[0],i];const o=n.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:i[0],i]}function Z1({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},a=mn(o,t);return{x:a.x-o.x,y:a.y-o.y}}function W1({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},a=0,s=new Map,u=!1,l={x:0,y:0},c=null,d=!1,f=null,h=!1,m=!1,p=null;function v({noDragClassName:b,handleSelector:x,domNode:_,isSelectable:q,nodeId:C,nodeClickDistance:A=0}){f=Le(_);function P({x:E,y:R}){const{nodeLookup:w,nodeExtent:k,snapGrid:T,snapToGrid:z,nodeOrigin:B,onNodeDrag:H,onSelectionDrag:V,onError:G,updateNodePositions:Y}=t();o={x:E,y:R};let Z=!1;const N=s.size>1,L=N&&k?xc(lr(s)):null,M=N&&z?Z1({dragItems:s,snapGrid:T,x:E,y:R}):null;for(const[F,K]of s){if(!w.has(F))continue;let X={x:E-K.distance.x,y:R-K.distance.y};z&&(X=M?{x:Math.round(X.x+M.x),y:Math.round(X.y+M.y)}:mn(X,T));let $=null;if(N&&k&&!K.extent&&L){const{positionAbsolute:ne}=K.internals,de=ne.x-L.x+k[0][0],ee=ne.x+K.measured.width-L.x2+k[1][0],ke=ne.y-L.y+k[0][1],te=ne.y+K.measured.height-L.y2+k[1][1];$=[[de,ke],[ee,te]]}const{position:Q,positionAbsolute:fe}=vy({nodeId:F,nextPosition:X,nodeLookup:w,nodeExtent:$||k,nodeOrigin:B,onError:G});Z=Z||K.position.x!==Q.x||K.position.y!==Q.y,K.position=Q,K.internals.positionAbsolute=fe}if(m=m||Z,!!Z&&(Y(s,!0),p&&(r||H||!C&&V))){const[F,K]=Br({nodeId:C,dragItems:s,nodeLookup:w});r?.(p,s,F,K),H?.(p,F,K),C||V?.(p,K)}}async function O(){if(!c)return;const{transform:E,panBy:R,autoPanSpeed:w,autoPanOnNodeDrag:k}=t();if(!k){u=!1,cancelAnimationFrame(a);return}const[T,z]=yy(l,c,w);(T!==0||z!==0)&&(o.x=(o.x??0)-T/E[2],o.y=(o.y??0)-z/E[2],await R({x:T,y:z})&&P(o)),a=requestAnimationFrame(O)}function D(E){const{nodeLookup:R,multiSelectionActive:w,nodesDraggable:k,transform:T,snapGrid:z,snapToGrid:B,selectNodesOnDrag:H,onNodeDragStart:V,onSelectionDragStart:G,unselectNodesAndEdges:Y}=t();d=!0,(!H||!q)&&!w&&C&&(R.get(C)?.selected||Y()),q&&H&&C&&e?.(C);const Z=Hr(E.sourceEvent,{transform:T,snapGrid:z,snapToGrid:B,containerBounds:c});if(o=Z,s=Y1(R,k,Z,C),s.size>0&&(n||V||!C&&G)){const[N,L]=Br({nodeId:C,dragItems:s,nodeLookup:R});n?.(E.sourceEvent,s,N,L),V?.(E.sourceEvent,N,L),C||G?.(E.sourceEvent,L)}}const S=gb().clickDistance(A).on("start",E=>{const{domNode:R,nodeDragThreshold:w,transform:k,snapGrid:T,snapToGrid:z}=t();c=R?.getBoundingClientRect()||null,h=!1,m=!1,p=E.sourceEvent,w===0&&D(E),o=Hr(E.sourceEvent,{transform:k,snapGrid:T,snapToGrid:z,containerBounds:c}),l=Fe(E.sourceEvent,c)}).on("drag",E=>{const{autoPanOnNodeDrag:R,transform:w,snapGrid:k,snapToGrid:T,nodeDragThreshold:z,nodeLookup:B}=t(),H=Hr(E.sourceEvent,{transform:w,snapGrid:k,snapToGrid:T,containerBounds:c});if(p=E.sourceEvent,(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||C&&!B.has(C))&&(h=!0),!h){if(!u&&R&&d&&(u=!0,O()),!d){const V=Fe(E.sourceEvent,c),G=V.x-l.x,Y=V.y-l.y;Math.sqrt(G*G+Y*Y)>z&&D(E)}(o.x!==H.xSnapped||o.y!==H.ySnapped)&&s&&d&&(l=Fe(E.sourceEvent,c),P(H))}}).on("end",E=>{if(!(!d||h)&&(u=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:R,updateNodePositions:w,onNodeDragStop:k,onSelectionDragStop:T}=t();if(m&&(w(s,!1),m=!1),i||k||!C&&T){const[z,B]=Br({nodeId:C,dragItems:s,nodeLookup:R,dragging:!1});i?.(E.sourceEvent,s,z,B),k?.(E.sourceEvent,z,B),C||T?.(E.sourceEvent,B)}}}).filter(E=>{const R=E.target;return!E.button&&(!b||!Wl(R,`.${b}`,_))&&(!x||Wl(R,x,_))});f.call(S)}function y(){f?.on(".drag",null)}return{update:v,destroy:y}}function X1(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())fn(i,Ht(o))>0&&r.push(o);return r}const J1=250;function Q1(e,t,n,r){let i=[],o=1/0;const a=X1(e,n,t+J1);for(const s of a){const u=[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]];for(const l of u){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:c,y:d}=hn(s,l,l.position,!0),f=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(d-e.y,2));f>t||(f<o?(i=[{...l,x:c,y:d}],o=f):f===o&&i.push({...l,x:c,y:d}))}}if(!i.length)return null;if(i.length>1){const s=r.type==="source"?"target":"source";return i.find(u=>u.type===s)??i[0]}return i[0]}function Ay(e,t,n,r,i,o=!1){const a=r.get(e);if(!a)return null;const s=i==="strict"?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],u=(n?s?.find(l=>l.id===n):s?.[0])??null;return u&&o?{...u,...hn(a,u,u.position,!0)}:u}function ky(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function $1(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Iy=()=>!0;function ex(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:u,lib:l,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:m,onConnect:p,onConnectEnd:v,isValidConnection:y=Iy,onReconnectEnd:b,updateConnection:x,getTransform:_,getFromHandle:q,autoPanSpeed:C,dragThreshold:A=1,handleDomNode:P}){const O=_y(e.target);let D=0,S;const{x:E,y:R}=Fe(e),w=ky(o,P),k=s?.getBoundingClientRect();let T=!1;if(!k||!w)return;const z=Ay(i,w,r,u,t);if(!z)return;let B=Fe(e,k),H=!1,V=null,G=!1,Y=null;function Z(){if(!c||!k)return;const[Q,fe]=yy(B,k,C);f({x:Q,y:fe}),D=requestAnimationFrame(Z)}const N={...z,nodeId:i,type:w,position:z.position},L=u.get(i);let F={inProgress:!0,isValid:null,from:hn(L,N,J.Left,!0),fromHandle:N,fromPosition:N.position,fromNode:L,to:B,toHandle:null,toPosition:Ll[N.position],toNode:null,pointer:B};function K(){T=!0,x(F),m?.(e,{nodeId:i,handleId:r,handleType:w})}A===0&&K();function X(Q){if(!T){const{x:ee,y:ke}=Fe(Q),te=ee-E,ie=ke-R;if(!(te*te+ie*ie>A*A))return;K()}if(!q()||!N){$(Q);return}const fe=_();B=Fe(Q,k),S=Q1(_n(B,fe,!1,[1,1]),n,u,N),H||(Z(),H=!0);const ne=Ty(Q,{handle:S,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:y,doc:O,lib:l,flowId:d,nodeLookup:u});Y=ne.handleDomNode,V=ne.connection,G=$1(!!S,ne.isValid);const de={...F,isValid:G,to:ne.toHandle&&G?Qn({x:ne.toHandle.x,y:ne.toHandle.y},fe):B,toHandle:ne.toHandle,toPosition:G&&ne.toHandle?ne.toHandle.position:Ll[N.position],toNode:ne.toHandle?u.get(ne.toHandle.nodeId):null,pointer:B};x(de),F=de}function $(Q){if(!("touches"in Q&&Q.touches.length>0)){if(T){(S||Y)&&V&&G&&p?.(V);const{inProgress:fe,...ne}=F,de={...ne,toPosition:F.toHandle?F.toPosition:null};v?.(Q,de),o&&b?.(Q,de)}h(),cancelAnimationFrame(D),H=!1,G=!1,V=null,Y=null,O.removeEventListener("mousemove",X),O.removeEventListener("mouseup",$),O.removeEventListener("touchmove",X),O.removeEventListener("touchend",$)}}O.addEventListener("mousemove",X),O.addEventListener("mouseup",$),O.addEventListener("touchmove",X),O.addEventListener("touchend",$)}function Ty(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:a,lib:s,flowId:u,isValidConnection:l=Iy,nodeLookup:c}){const d=o==="target",f=t?a.querySelector(`.${s}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:m}=Fe(e),p=a.elementFromPoint(h,m),v=p?.classList.contains(`${s}-flow__handle`)?p:f,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const b=ky(void 0,v),x=v.getAttribute("data-nodeid"),_=v.getAttribute("data-handleid"),q=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!x||!b)return y;const A={source:d?x:r,sourceHandle:d?_:i,target:d?r:x,targetHandle:d?i:_};y.connection=A;const O=q&&C&&(n===zt.Strict?d&&b==="source"||!d&&b==="target":x!==r||_!==i);y.isValid=O&&l(A),y.toHandle=Ay(x,b,_,c,n,!0)}return y}const Xl={onPointerDown:ex,isValid:Ty},hr=e=>({x:e.x,y:e.y,zoom:e.k}),Vr=({x:e,y:t,zoom:n})=>cr.translate(e,t).scale(n),Pt=(e,t)=>e.target.closest(`.${t}`),Py=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),tx=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Gr=(e,t=0,n=tx,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Ny=e=>{const t=e.ctrlKey&&$n()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function nx({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:l}){return c=>{if(Pt(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&a){const v=je(c),y=Ny(c),b=d*Math.pow(2,y);r.scaleTo(n,b,v,c);return}const f=c.deltaMode===1?20:1;let h=i===Mt.Vertical?0:c.deltaX*f,m=i===Mt.Horizontal?0:c.deltaY*f;!$n()&&c.shiftKey&&i!==Mt.Vertical&&(h=c.deltaY*f,m=0),r.translateBy(n,-(h/d)*o,-(m/d)*o,{internal:!0});const p=hr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u?.(c,p),e.panScrollTimeout=setTimeout(()=>{l?.(c,p),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(c,p))}}function rx({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",a=!t&&o&&!r.ctrlKey,s=Pt(r,e);if(r.ctrlKey&&o&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,i)}}function ix({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=hr(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function ox({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{e.usedRightMouseButton=!!(n&&Py(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!o.sourceEvent?.internal&&i?.(o.sourceEvent,hr(o.transform))}}function ax({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&Py(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const s=hr(a.transform);e.prevViewport=s,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(a.sourceEvent,s)},n?150:0)}}}function sx({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:u,lib:l,connectionInProgress:c}){return d=>{const f=e||t,h=n&&d.ctrlKey,m=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Pt(d,`${l}-flow__node`)||Pt(d,`${l}-flow__edge`)))return!0;if(!r&&!f&&!i&&!o&&!n||a||c&&!m||Pt(d,s)&&m||Pt(d,u)&&(!m||i&&m&&!e)||!n&&d.ctrlKey&&m)return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!i&&!h&&m||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||m)&&p}}function ux({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:s,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=s1().scaleExtent([t,n]).translateExtent(r),f=Le(e).call(d);b({x:i.x,y:i.y,zoom:Ft(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=f.on("wheel.zoom"),m=f.on("dblclick.zoom");d.wheelDelta(Ny);function p(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:Ln).transform(Gr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function v({noWheelClassName:S,noPanClassName:E,onPaneContextMenu:R,userSelectionActive:w,panOnScroll:k,panOnDrag:T,panOnScrollMode:z,panOnScrollSpeed:B,preventScrolling:H,zoomOnPinch:V,zoomOnScroll:G,zoomOnDoubleClick:Y,zoomActivationKeyPressed:Z,lib:N,onTransformChange:L,connectionInProgress:M,paneClickDistance:F,selectionOnDrag:K}){w&&!l.isZoomingOrPanning&&y();const X=k&&!Z&&!w;d.clickDistance(K?1/0:!nt(F)||F<0?0:F);const $=X?nx({zoomPanValues:l,noWheelClassName:S,d3Selection:f,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:B,zoomOnPinch:V,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:s}):rx({noWheelClassName:S,preventScrolling:H,d3ZoomHandler:h});if(f.on("wheel.zoom",$,{passive:!1}),!w){const fe=ix({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:a});d.on("start",fe);const ne=ox({zoomPanValues:l,panOnDrag:T,onPaneContextMenu:!!R,onPanZoom:o,onTransformChange:L});d.on("zoom",ne);const de=ax({zoomPanValues:l,panOnDrag:T,panOnScroll:k,onPaneContextMenu:R,onPanZoomEnd:s,onDraggingChange:u});d.on("end",de)}const Q=sx({zoomActivationKeyPressed:Z,panOnDrag:T,zoomOnScroll:G,panOnScroll:k,zoomOnDoubleClick:Y,zoomOnPinch:V,userSelectionActive:w,noPanClassName:E,noWheelClassName:S,lib:N,connectionInProgress:M});d.filter(Q),Y?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)}function y(){d.on("zoom",null)}async function b(S,E,R){const w=Vr(S),k=d?.constrain()(w,E,R);return k&&await p(k),new Promise(T=>T(k))}async function x(S,E){const R=Vr(S);return await p(R,E),new Promise(w=>w(R))}function _(S){if(f){const E=Vr(S),R=f.property("__zoom");(R.k!==S.zoom||R.x!==S.x||R.y!==S.y)&&d?.transform(f,E,null,{sync:!0})}}function q(){const S=f?fy(f.node()):{x:0,y:0,k:1};return{x:S.x,y:S.y,zoom:S.k}}function C(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:Ln).scaleTo(Gr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function A(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:Ln).scaleBy(Gr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function P(S){d?.scaleExtent(S)}function O(S){d?.translateExtent(S)}function D(S){const E=!nt(S)||S<0?0:S;d?.clickDistance(E)}return{update:v,destroy:y,setViewport:x,setViewportConstrained:b,getViewport:q,scaleTo:C,scaleBy:A,setScaleExtent:P,setTranslateExtent:O,syncViewport:_,setClickDistance:D}}var Jl;(function(e){e.Line="line",e.Handle="handle"})(Jl||(Jl={}));var cx=le("<div><!></div>");function Vt(e,t){oe(t,!0);let n=U(t,"id",3,null),r=U(t,"type",3,"source"),i=U(t,"position",19,()=>J.Top),o=U(t,"isConnectableStart",3,!0),a=U(t,"isConnectableEnd",3,!0),s=wt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=an("svelteflow__node_id"),l=an("svelteflow__node_connectable");let c=I(()=>r()==="target"),d=I(()=>t.isConnectable!==void 0?t.isConnectable:l.value),f=Et(),h=I(()=>f.ariaLabelConfig),m=null;y_(()=>{if(t.onconnect||t.ondisconnect){f.edges;let E=f.connectionLookup.get(`${u}-${r()}${n()?`-${n()}`:""}`);if(m&&!c1(E,m)){const R=E??new Map;zl(m,R,t.ondisconnect),zl(R,m,t.onconnect)}m=new Map(E)}});let p=I(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:E,toHandle:R,isValid:w}=f.connection,k=E&&E.nodeId===u&&E.type===r()&&E.id===n(),T=R&&R.nodeId===u&&R.type===r()&&R.id===n(),z=f.connectionMode===zt.Strict?E?.type!==r():u!==E?.nodeId||n()!==E?.id;return[!0,k,T,z,T&&w]}),v=I(()=>gn(g(p),5)),y=I(()=>g(v)[0]),b=I(()=>g(v)[1]),x=I(()=>g(v)[2]),_=I(()=>g(v)[3]),q=I(()=>g(v)[4]);function C(E){const R=f.onbeforeconnect?f.onbeforeconnect(E):E;R&&(f.addEdge(R),f.onconnect?.(E))}function A(E){const R=wy(E);E.currentTarget&&(R&&E.button===0||!R)&&Xl.onPointerDown(E,{handleId:n(),nodeId:u,isTarget:g(c),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:C,onConnectStart:(w,k)=>{f.onconnectstart?.(w,{nodeId:k.nodeId,handleId:k.handleId,handleType:k.handleType})},onConnectEnd:(w,k)=>{f.onconnectend?.(w,k)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:E.currentTarget})}function P(E){if(!u||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(E,{nodeId:u,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:u,type:r(),id:n()};return}const R=_y(E.target),w=t.isValidConnection??f.isValidConnection,{connectionMode:k,clickConnectStartHandle:T,flowId:z,nodeLookup:B}=f,{connection:H,isValid:V}=Xl.isValid(E,{handle:{nodeId:u,id:n(),type:r()},connectionMode:k,fromNodeId:T.nodeId,fromHandleId:T.id??null,fromType:T.type,isValidConnection:w,flowId:z,doc:R,lib:"svelte",nodeLookup:B});V&&H&&C(H);const G=structuredClone(zp(f.connection));delete G.inProgress,G.toPosition=G.toHandle?G.toHandle.position:null,f.onclickconnectend?.(E,G),f.clickConnectStartHandle=null}var O=cx(),D=()=>{};dt(O,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":i(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?P:void 0,onkeypress:D,style:t.style,role:"button","aria-label":g(h)["handle.ariaLabel"],tabindex:"-1",...s,[Ac]:{valid:g(q),connectingto:g(x),connectingfrom:g(b),source:!g(c),target:g(c),connectablestart:o(),connectableend:a(),connectable:g(d),connectionindicator:g(d)&&(!g(y)||g(_))&&(g(y)||f.clickConnectStartHandle?a():o())}}));var S=ue(O);Ne(S,()=>t.children??Gt),re(O),W(e,O),ae()}var lx=le("<!> <!>",1);function Oy(e,t){oe(t,!0);let n=U(t,"targetPosition",19,()=>J.Top),r=U(t,"sourcePosition",19,()=>J.Bottom);var i=lx(),o=ge(i);Vt(o,{type:"target",get position(){return n()}});var a=se(o),s=se(a);Vt(s,{type:"source",get position(){return r()}}),ye(()=>rt(a,` ${t.data?.label??""} `)),W(e,i),ae()}var dx=le(" <!>",1);function fx(e,t){oe(t,!0);let n=U(t,"data",19,()=>({label:"Node"})),r=U(t,"sourcePosition",19,()=>J.Bottom);rr();var i=dx(),o=ge(i),a=se(o);Vt(a,{type:"source",get position(){return r()}}),ye(()=>rt(o,`${n()?.label??""} `)),W(e,i),ae()}var hx=le(" <!>",1);function gx(e,t){oe(t,!0);let n=U(t,"data",19,()=>({label:"Node"})),r=U(t,"targetPosition",19,()=>J.Top);rr();var i=hx(),o=ge(i),a=se(o);Vt(a,{type:"target",get position(){return r()}}),ye(()=>rt(o,`${n()?.label??""} `)),W(e,i),ae()}function vx(e,t){}function Kr(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function px(e,t){const n=I(Et),r=I(()=>g(n).domNode);let i;return g(r)?Kr(e,g(r),t):i=Lp(()=>{yt(()=>{Kr(e,g(r),t),i?.()})}),{async update(o){Kr(e,g(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i?.()}}}function yx(){let e=xe(typeof window>"u");if(g(e)){const t=Lp(()=>{yt(()=>{j(e,!1),t?.()})})}return{get value(){return g(e)}}}const Ql=e=>d1(e),mx=e=>gy(e);function Xe(e){return e===void 0?void 0:`${e}px`}const er={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _x=le("<div><!></div>");function bx(e,t){oe(t,!0);let n=U(t,"x",3,0),r=U(t,"y",3,0),i=U(t,"selectEdgeOnClick",3,!1),o=U(t,"transparent",3,!1),a=wt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const s=Et(),u=an("svelteflow__edge_id");if(!u)throw new Error("EdgeLabel must be used within an edge");let l=I(()=>s.visible.edges.get(u)?.zIndex);var c=_x(),d=()=>{i()&&s.handleEdgeSelection(u)};dt(c,h=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:d,...a,[ir]:h}),[()=>({display:yx().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:Xe(t.width),height:Xe(t.height),"z-index":g(l)})],void 0,void 0,"svelte-1wg91mu");var f=ue(c);Ne(f,()=>t.children??Gt),re(c),qe(c,(h,m)=>px?.(h,m),()=>"edge-labels"),W(e,c),ae()}var wx=be("<path></path>"),xx=be('<path fill="none"></path><!><!>',1);function gr(e,t){let n=U(t,"interactionWidth",3,20),r=wt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=xx(),o=ge(i),a=se(o);{var s=c=>{var d=wx();dt(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),W(c,d)};pe(a,c=>{n()>0&&c(s)})}var u=se(a);{var l=c=>{bx(c,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,f)=>{rr();var h=Rp();ye(()=>rt(h,t.label)),W(d,h)},$$slots:{default:!0}})};pe(u,c=>{t.label&&c(l)})}ye(()=>{ce(o,"id",t.id),ce(o,"d",t.path),Ze(o,0,jt(["svelte-flow__edge-path",t.class])),ce(o,"marker-start",t.markerStart),ce(o,"marker-end",t.markerEnd),We(o,t.style)}),W(e,i)}function My(e,t){oe(t,!0);let n=I(()=>xy({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),r=I(()=>gn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);gr(e,{get id(){return t.id},get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ae()}function Ex(e,t){oe(t,!0);let n=I(()=>Bc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=I(()=>gn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);gr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ae()}function Sx(e,t){oe(t,!0);let n=I(()=>Sy({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=I(()=>gn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);gr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ae()}function Cx(e,t){oe(t,!0);let n=I(()=>Bc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=I(()=>gn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);gr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),ae()}class qx{#e;#t;constructor(t,n){this.#e=t,this.#t=b_(n)}get current(){return this.#t(),this.#e()}}const Rx=/\(.+\)/,Ax=new Set(["all","print","screen","and","or","not","only"]);class kx extends qx{constructor(t,n){let r=Rx.test(t)||t.split(/[\s,]+/).some(o=>Ax.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>cc(i,"change",o))}}function Ix(e,t,n,r){const i=new Map;return Fc(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function $l(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:a,onlyRenderVisible:s,elevateEdgesOnSelect:u}=e,l=new Map;for(const c of t){const d=r.get(c.source),f=r.get(c.target);if(!d||!f)continue;if(s){const{visibleNodes:p,transform:v,width:y,height:b}=e;if(R1({sourceNode:d,targetNode:f,width:y,height:b,transform:v}))p.set(d.id,d),p.set(f.id,f);else continue}const h=i.get(c.id);if(h&&c===h.edge&&d==h.sourceNode&&f==h.targetNode){l.set(c.id,h);continue}const m=O1({id:c.id,sourceNode:d,targetNode:f,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:o,onError:a});m&&l.set(c.id,{...n,...c,...m,zIndex:q1({selected:c.selected,zIndex:c.zIndex??n.zIndex,sourceNode:d,targetNode:f,elevateOnSelect:u}),sourceNode:d,targetNode:f,edge:c})}return l}const Dy={input:fx,output:gx,default:Oy,group:vx},Ly={straight:Sx,smoothstep:Ex,default:My,step:Cx};function Tx(e,t,n,r,i,o){if(t&&!n&&r&&i){const a=lr(o,{filter:s=>!!((s.width||s.initialWidth)&&(s.height||s.initialHeight))});return Hc(a,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Px(e){class t{#e=I(()=>e.props.id??"1");get flowId(){return g(this.#e)}set flowId(r){j(this.#e,r)}#t=xe(null);get domNode(){return g(this.#t)}set domNode(r){j(this.#t,r)}#n=xe(null);get panZoom(){return g(this.#n)}set panZoom(r){j(this.#n,r)}#r=xe(e.width??0);get width(){return g(this.#r)}set width(r){j(this.#r,r)}#i=xe(e.height??0);get height(){return g(this.#i)}set height(r){j(this.#i,r)}#o=I(()=>{const r=H1(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&r&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),r});get nodesInitialized(){return g(this.#o)}set nodesInitialized(r){j(this.#o,r)}#a=I(()=>this.panZoom!==null);get viewportInitialized(){return g(this.#a)}set viewportInitialized(r){j(this.#a,r)}#s=I(()=>(U1(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return g(this.#s)}set _edges(r){j(this.#s,r)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(r){e.nodes=r}get edges(){return this._edges}set edges(r){e.edges=r}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#u=I(()=>{const r=this._prevSelectedNodeIds.size,i=new Set,o=this.nodes.filter(a=>(a.selected&&(i.add(a.id),this._prevSelectedNodeIds.delete(a.id)),a.selected));return(r!==i.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=o),this._prevSelectedNodeIds=i,this._prevSelectedNodes});get selectedNodes(){return g(this.#u)}set selectedNodes(r){j(this.#u,r)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=I(()=>{const r=this._prevSelectedEdgeIds.size,i=new Set,o=this.edges.filter(a=>(a.selected&&(i.add(a.id),this._prevSelectedEdgeIds.delete(a.id)),a.selected));return(r!==i.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=o),this._prevSelectedEdgeIds=i,this._prevSelectedEdges});get selectedEdges(){return g(this.#c)}set selectedEdges(r){j(this.#c,r)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#l=I(()=>{const{nodes:r,_edges:i,_prevVisibleEdges:o,nodeLookup:a,connectionMode:s,onerror:u,onlyRenderVisibleElements:l,defaultEdgeOptions:c}=this;let d,f;const h={edges:i,defaultEdgeOptions:c,previousEdges:o,nodeLookup:a,connectionMode:s,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:u};if(l){const{viewport:m,width:p,height:v}=this,y=[m.x,m.y,m.zoom];d=Ix(a,y,p,v),f=$l({...h,onlyRenderVisible:!0,visibleNodes:d,transform:y,width:p,height:v})}else d=this.nodeLookup,f=$l(h);return{nodes:d,edges:f}});get visible(){return g(this.#l)}set visible(r){j(this.#l,r)}#d=I(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return g(this.#d)}set nodesDraggable(r){j(this.#d,r)}#f=I(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return g(this.#f)}set nodesConnectable(r){j(this.#f,r)}#h=I(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return g(this.#h)}set elementsSelectable(r){j(this.#h,r)}#g=I(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return g(this.#g)}set nodesFocusable(r){j(this.#g,r)}#v=I(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return g(this.#v)}set edgesFocusable(r){j(this.#v,r)}#p=I(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return g(this.#p)}set disableKeyboardA11y(r){j(this.#p,r)}#y=I(()=>e.props.minZoom??.5);get minZoom(){return g(this.#y)}set minZoom(r){j(this.#y,r)}#m=I(()=>e.props.maxZoom??2);get maxZoom(){return g(this.#m)}set maxZoom(r){j(this.#m,r)}#_=I(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return g(this.#_)}set nodeOrigin(r){j(this.#_,r)}#b=I(()=>e.props.nodeExtent??bc);get nodeExtent(){return g(this.#b)}set nodeExtent(r){j(this.#b,r)}#w=I(()=>e.props.translateExtent??bc);get translateExtent(){return g(this.#w)}set translateExtent(r){j(this.#w,r)}#x=I(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return g(this.#x)}set defaultEdgeOptions(r){j(this.#x,r)}#E=I(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return g(this.#E)}set nodeDragThreshold(r){j(this.#E,r)}#S=I(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return g(this.#S)}set autoPanOnNodeDrag(r){j(this.#S,r)}#C=I(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return g(this.#C)}set autoPanOnConnect(r){j(this.#C,r)}#q=I(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return g(this.#q)}set autoPanOnNodeFocus(r){j(this.#q,r)}#R=I(()=>e.props.autoPanSpeed??15);get autoPanSpeed(){return g(this.#R)}set autoPanSpeed(r){j(this.#R,r)}#A=I(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return g(this.#A)}set connectionDragThreshold(r){j(this.#A,r)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#k=I(()=>e.props.snapGrid??null);get snapGrid(){return g(this.#k)}set snapGrid(r){j(this.#k,r)}#I=xe(!1);get dragging(){return g(this.#I)}set dragging(r){j(this.#I,r)}#T=xe(null);get selectionRect(){return g(this.#T)}set selectionRect(r){j(this.#T,r)}#P=xe(!1);get selectionKeyPressed(){return g(this.#P)}set selectionKeyPressed(r){j(this.#P,r)}#N=xe(!1);get multiselectionKeyPressed(){return g(this.#N)}set multiselectionKeyPressed(r){j(this.#N,r)}#O=xe(!1);get deleteKeyPressed(){return g(this.#O)}set deleteKeyPressed(r){j(this.#O,r)}#M=xe(!1);get panActivationKeyPressed(){return g(this.#M)}set panActivationKeyPressed(r){j(this.#M,r)}#D=xe(!1);get zoomActivationKeyPressed(){return g(this.#D)}set zoomActivationKeyPressed(r){j(this.#D,r)}#L=xe(null);get selectionRectMode(){return g(this.#L)}set selectionRectMode(r){j(this.#L,r)}#z=xe("");get ariaLiveMessage(){return g(this.#z)}set ariaLiveMessage(r){j(this.#z,r)}#F=I(()=>e.props.selectionMode??Wn.Partial);get selectionMode(){return g(this.#F)}set selectionMode(r){j(this.#F,r)}#H=I(()=>({...Dy,...e.props.nodeTypes}));get nodeTypes(){return g(this.#H)}set nodeTypes(r){j(this.#H,r)}#B=I(()=>({...Ly,...e.props.edgeTypes}));get edgeTypes(){return g(this.#B)}set edgeTypes(r){j(this.#B,r)}#V=I(()=>e.props.noPanClass??"nopan");get noPanClass(){return g(this.#V)}set noPanClass(r){j(this.#V,r)}#G=I(()=>e.props.noDragClass??"nodrag");get noDragClass(){return g(this.#G)}set noDragClass(r){j(this.#G,r)}#K=I(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return g(this.#K)}set noWheelClass(r){j(this.#K,r)}#j=I(()=>E1(e.props.ariaLabelConfig));get ariaLabelConfig(){return g(this.#j)}set ariaLabelConfig(r){j(this.#j,r)}#U=xe(Tx(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return g(this.#U)}set _viewport(r){j(this.#U,r)}get viewport(){return e.viewport??this._viewport}set viewport(r){e.viewport&&(e.viewport=r),this._viewport=r}#Y=xe(wc);get _connection(){return g(this.#Y)}set _connection(r){j(this.#Y,r)}#Z=I(()=>this._connection.inProgress?{...this._connection,to:_n(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return g(this.#Z)}set connection(r){j(this.#Z,r)}#W=I(()=>e.props.connectionMode??zt.Strict);get connectionMode(){return g(this.#W)}set connectionMode(r){j(this.#W,r)}#X=I(()=>e.props.connectionRadius??20);get connectionRadius(){return g(this.#X)}set connectionRadius(r){j(this.#X,r)}#J=I(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return g(this.#J)}set isValidConnection(r){j(this.#J,r)}#Q=I(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return g(this.#Q)}set selectNodesOnDrag(r){j(this.#Q,r)}#$=I(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor);get defaultMarkerColor(){return g(this.#$)}set defaultMarkerColor(r){j(this.#$,r)}#ee=I(()=>M1(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return g(this.#ee)}set markers(r){j(this.#ee,r)}#te=I(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return g(this.#te)}set onlyRenderVisibleElements(r){j(this.#te,r)}#ne=I(()=>e.props.onflowerror??m1);get onerror(){return g(this.#ne)}set onerror(r){j(this.#ne,r)}#re=I(()=>e.props.ondelete);get ondelete(){return g(this.#re)}set ondelete(r){j(this.#re,r)}#ie=I(()=>e.props.onbeforedelete);get onbeforedelete(){return g(this.#ie)}set onbeforedelete(r){j(this.#ie,r)}#oe=I(()=>e.props.onbeforeconnect);get onbeforeconnect(){return g(this.#oe)}set onbeforeconnect(r){j(this.#oe,r)}#ae=I(()=>e.props.onconnect);get onconnect(){return g(this.#ae)}set onconnect(r){j(this.#ae,r)}#se=I(()=>e.props.onconnectstart);get onconnectstart(){return g(this.#se)}set onconnectstart(r){j(this.#se,r)}#ue=I(()=>e.props.onconnectend);get onconnectend(){return g(this.#ue)}set onconnectend(r){j(this.#ue,r)}#ce=I(()=>e.props.onbeforereconnect);get onbeforereconnect(){return g(this.#ce)}set onbeforereconnect(r){j(this.#ce,r)}#le=I(()=>e.props.onreconnect);get onreconnect(){return g(this.#le)}set onreconnect(r){j(this.#le,r)}#de=I(()=>e.props.onreconnectstart);get onreconnectstart(){return g(this.#de)}set onreconnectstart(r){j(this.#de,r)}#fe=I(()=>e.props.onreconnectend);get onreconnectend(){return g(this.#fe)}set onreconnectend(r){j(this.#fe,r)}#he=I(()=>e.props.clickConnect??!0);get clickConnect(){return g(this.#he)}set clickConnect(r){j(this.#he,r)}#ge=I(()=>e.props.onclickconnectstart);get onclickconnectstart(){return g(this.#ge)}set onclickconnectstart(r){j(this.#ge,r)}#ve=I(()=>e.props.onclickconnectend);get onclickconnectend(){return g(this.#ve)}set onclickconnectend(r){j(this.#ve,r)}#pe=xe(null);get clickConnectStartHandle(){return g(this.#pe)}set clickConnectStartHandle(r){j(this.#pe,r)}#ye=I(()=>e.props.onselectiondrag);get onselectiondrag(){return g(this.#ye)}set onselectiondrag(r){j(this.#ye,r)}#me=I(()=>e.props.onselectiondragstart);get onselectiondragstart(){return g(this.#me)}set onselectiondragstart(r){j(this.#me,r)}#_e=I(()=>e.props.onselectiondragstop);get onselectiondragstop(){return g(this.#_e)}set onselectiondragstop(r){j(this.#_e,r)}resolveFitView=async()=>{this.panZoom&&(await v1({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new kx("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#be=I(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return g(this.#be)}set colorMode(r){j(this.#be,r)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=wc,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function Et(){const e=an(Sc);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Sc=Symbol();function Nx(e){const t=Px(e);function n(S){t.nodeTypes={...Dy,...S}}function r(S){t.edgeTypes={...Ly,...S}}function i(S){t.edges=I1(S,t.edges)}const o=(S,E=!1)=>{t.nodes=t.nodes.map(R=>{const w=S.get(R.id);return w?{...R,position:w.position,dragging:E}:R})};function a(S){const{changes:E,updatedInternals:R}=K1(S,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!R)return;z1(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const w=new Map;for(const k of E){const T=t.nodeLookup.get(k.id)?.internals.userNode;if(!T)continue;const z={...T};switch(k.type){case"dimensions":{const B={...z.measured,...k.dimensions};k.setAttributes&&(z.width=k.dimensions?.width??z.width,z.height=k.dimensions?.height??z.height),z.measured=B;break}case"position":z.position=k.position??z.position;break}w.set(k.id,z)}t.nodes=t.nodes.map(k=>w.get(k.id)??k)}function s(S){const E=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=S,t.fitViewResolver=E,t.nodes=[...t.nodes],E.promise}async function u(S,E,R){const w=typeof R?.zoom<"u"?R.zoom:t.maxZoom,k=t.panZoom;return k?(await k.setViewport({x:t.width/2-S*w,y:t.height/2-E*w,zoom:w},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function l(S,E){const R=t.panZoom;return R?R.scaleBy(S,E):Promise.resolve(!1)}function c(S){return l(1.2,S)}function d(S){return l(1/1.2,S)}function f(S){const E=t.panZoom;E&&(E.setScaleExtent([S,t.maxZoom]),t.minZoom=S)}function h(S){const E=t.panZoom;E&&(E.setScaleExtent([t.minZoom,S]),t.maxZoom=S)}function m(S){const E=t.panZoom;E&&(E.setTranslateExtent(S),t.translateExtent=S)}function p(S,E=null){let R=!1;const w=S.map(k=>(E?E.has(k.id):!0)&&k.selected?(R=!0,{...k,selected:!1}):k);return[R,w]}function v(S){const E=S?.nodes?new Set(S.nodes.map(B=>B.id)):null,[R,w]=p(t.nodes,E);R&&(t.nodes=w);const k=S?.edges?new Set(S.edges.map(B=>B.id)):null,[T,z]=p(t.edges,k);T&&(t.edges=z)}function y(S){const E=t.multiselectionKeyPressed;t.nodes=t.nodes.map(R=>{const w=S.includes(R.id),k=E&&R.selected||w;return!!R.selected!==k?{...R,selected:k}:R}),E||v({nodes:[]})}function b(S){const E=t.multiselectionKeyPressed;t.edges=t.edges.map(R=>{const w=S.includes(R.id),k=E&&R.selected||w;return!!R.selected!==k?{...R,selected:k}:R}),E||v({edges:[]})}function x(S,E,R){const w=t.nodeLookup.get(S);if(!w){console.warn("012",dn.error012(S));return}t.selectionRect=null,t.selectionRectMode=null,w.selected?(E||w.selected&&t.multiselectionKeyPressed)&&(v({nodes:[w],edges:[]}),requestAnimationFrame(()=>R?.blur())):y([S])}function _(S){const E=t.edgeLookup.get(S);if(!E){console.warn("012",dn.error012(S));return}(E.selectable||t.elementsSelectable&&typeof E.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,E.selected?E.selected&&t.multiselectionKeyPressed&&v({nodes:[],edges:[E]}):b([S]))}function q(S,E){const{nodeExtent:R,snapGrid:w,nodeOrigin:k,nodeLookup:T,nodesDraggable:z,onerror:B}=t,H=new Map,V=w?.[0]??5,G=w?.[1]??5,Y=S.x*V*E,Z=S.y*G*E;for(const N of T.values()){if(!(N.selected&&(N.draggable||z&&typeof N.draggable>"u")))continue;let M={x:N.internals.positionAbsolute.x+Y,y:N.internals.positionAbsolute.y+Z};w&&(M=mn(M,w));const{position:F,positionAbsolute:K}=vy({nodeId:N.id,nextPosition:M,nodeLookup:T,nodeExtent:R,nodeOrigin:k,onError:B});N.position=F,N.internals.positionAbsolute=K,H.set(N.id,N)}o(H)}function C(S){return j1({delta:S,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const A=S=>{t._connection={...S}};function P(){t._connection=wc}function O(){t.resetStoreValues(),v()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:a,zoomIn:c,zoomOut:d,fitView:s,setCenter:u,setMinZoom:f,setMaxZoom:h,setTranslateExtent:m,unselectNodesAndEdges:v,addSelectedNodes:y,addSelectedEdges:b,handleNodeSelection:x,handleEdgeSelection:_,moveSelectedNodes:q,panBy:C,updateConnection:A,cancelConnection:P,reset:O})}function Ox(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:a,onPanZoomEnd:s,translateExtent:u,setPanZoomInstance:l,onDraggingChange:c,onTransformChange:d}=t,f=ux({domNode:e,minZoom:n,maxZoom:r,translateExtent:u,viewport:i,onPanZoom:a,onPanZoomStart:o,onPanZoomEnd:s,onDraggingChange:c}),h=f.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&d([h.x,h.y,h.zoom]),l(f),f.update(t),{update(m){f.update(m)}}}var Mx=le('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Dx(e,t){oe(t,!0);let n=U(t,"store",15),r=I(()=>n().panActivationKeyPressed||t.panOnDrag),i=I(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let a=!1;yt(()=>{!a&&n().viewportInitialized&&(t.oninit?.(),a=!0)});var s=Mx(),u=ue(s);Ne(u,()=>t.children),re(s),qe(s,(l,c)=>Ox?.(l,c),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:l=>{n(n().dragging=l,!0)},setPanZoomInstance:l=>{n(n().panZoom=l,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:g(i),panOnDrag:g(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:l=>{n(n().viewport={x:l[0],y:l[1],zoom:l[2]},!0)},connectionInProgress:n().connection.inProgress})),W(e,s),ae()}function ed(e,t){return n=>{n.target===t&&e?.(n)}}function td(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function nd(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var Lx=le("<div><!></div>");function zx(e,t){oe(t,!0);let n=U(t,"store",15),r=U(t,"panOnDrag",3,!0),i=U(t,"paneClickDistance",3,1),o,a=null,s=new Set,u=new Set,l=I(()=>n().panActivationKeyPressed||r()),c=I(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&g(l)!==!0),d=I(()=>n().elementsSelectable&&(g(c)||n().selectionRectMode==="user")),f=!1;function h(P){if(a=o?.getBoundingClientRect(),!a)return;const O=P.target===o,D=!O&&!!P.target.closest(".nokey"),S=t.selectionOnDrag&&O||n().selectionKeyPressed;if(D||!g(c)||!S||P.button!==0||!P.isPrimary)return;P.target?.setPointerCapture?.(P.pointerId),f=!1;const{x:E,y:R}=Fe(P,a);n(n().selectionRect={width:0,height:0,startX:E,startY:R,x:E,y:R},!0),O||(P.stopPropagation(),P.preventDefault())}function m(P){if(!g(c)||!a||!n().selectionRect)return;const O=Fe(P,a),{startX:D=0,startY:S=0}=n().selectionRect;if(!f){const T=n().selectionKeyPressed?0:i();if(Math.hypot(O.x-D,O.y-S)<=T)return;n().unselectNodesAndEdges(),t.onselectionstart?.(P)}f=!0;const E={...n().selectionRect,x:O.x<D?O.x:D,y:O.y<S?O.y:S,width:Math.abs(O.x-D),height:Math.abs(O.y-S)},R=s,w=u;s=new Set(Fc(n().nodeLookup,E,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Wn.Partial,!0).map(T=>T.id));const k=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const T of s){const z=n().connectionLookup.get(T);if(z)for(const{edgeId:B}of z.values()){const H=n().edgeLookup.get(B);H&&(H.selectable??k)&&u.add(B)}}nd(R,s)||n(n().nodes=n().nodes.map(td(s)),!0),nd(w,u)||n(n().edges=n().edges.map(td(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=E,!0)}function p(P){P.button===0&&(P.target?.releasePointerCapture?.(P.pointerId),!f&&P.target===o&&b?.(P),n(n().selectionRect=null,!0),f&&n(n().selectionRectMode=s.size>0?"nodes":null,!0),f&&t.onselectionend?.(P))}const v=P=>{if(Array.isArray(g(l))&&g(l).includes(2)){P.preventDefault();return}t.onpanecontextmenu?.({event:P})},y=P=>{f&&(P.stopPropagation(),f=!1)};function b(P){if(f||n().connection.inProgress){f=!1;return}t.onpaneclick?.({event:P}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var x=Lx();let _;var q=I(()=>g(d)?void 0:ed(b,o));x.__click=function(...P){g(q)?.apply(this,P)},x.__pointermove=function(...P){(g(d)?m:void 0)?.apply(this,P)},x.__pointerup=function(...P){(g(d)?p:void 0)?.apply(this,P)};var C=I(()=>ed(v,o));x.__contextmenu=function(...P){g(C)?.apply(this,P)};var A=ue(x);Ne(A,()=>t.children),re(x),Kt(x,P=>o=P,()=>o),ye(P=>_=Ze(x,1,"svelte-flow__pane svelte-flow__container",null,_,P),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:g(c)})]),pt("pointerdown",x,function(...P){(g(d)?h:void 0)?.apply(this,P)},!0),pt("click",x,function(...P){(g(d)?y:void 0)?.apply(this,P)},!0),W(e,x),ae()}Ap(["click","pointermove","pointerup","contextmenu"]);var Fx=le('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Hx(e,t){oe(t,!0);var n=Fx();let r;var i=ue(n);Ne(i,()=>t.children),re(n),ye(()=>r=We(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),W(e,n),ae()}function zy(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:a}=t,s=W1({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:a,getStoreItems:()=>{const{snapGrid:l,viewport:c}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:l||[0,0],snapToGrid:!!l,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(l,c){if(c.disabled){s.destroy();return}s.update({domNode:l,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return u(e,t),{update(l){u(e,l)},destroy(){s.destroy()}}}var Bx=le('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),Vx=le('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function Gx(e,t){oe(t,!0);var n=Vx(),r=ge(n),i=ue(r,!0);re(r);var o=se(r,2),a=ue(o,!0);re(o);var s=se(o,2);{var u=l=>{var c=Bx(),d=ue(c,!0);re(c),ye(()=>{ce(c,"id",`${Kx}-${t.store.flowId}`),rt(d,t.store.ariaLiveMessage)}),W(l,c)};pe(s,l=>{t.store.disableKeyboardA11y||l(u)})}ye(()=>{ce(r,"id",`${Fy}-${t.store.flowId}`),rt(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ce(o,"id",`${Hy}-${t.store.flowId}`),rt(a,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),W(e,n),ae()}const Fy="svelte-flow__node-desc",Hy="svelte-flow__edge-desc",Kx="svelte-flow__aria-live";var jx=le("<div><!></div>");function Ux(e,t){oe(t,!0);let n=U(t,"store",15),r=I(()=>Se(t.node.data,()=>({}),!0)),i=I(()=>Se(t.node.selected,!1)),o=I(()=>t.node.draggable),a=I(()=>t.node.selectable),s=I(()=>Se(t.node.deletable,!0)),u=I(()=>t.node.connectable),l=I(()=>t.node.focusable),c=I(()=>Se(t.node.hidden,!1)),d=I(()=>Se(t.node.dragging,!1)),f=I(()=>Se(t.node.style,"")),h=I(()=>t.node.class),m=I(()=>Se(t.node.type,"default")),p=I(()=>t.node.parentId),v=I(()=>t.node.sourcePosition),y=I(()=>t.node.targetPosition),b=I(()=>Se(t.node.measured,()=>({width:0,height:0}),!0).width),x=I(()=>Se(t.node.measured,()=>({width:0,height:0}),!0).height),_=I(()=>t.node.initialWidth),q=I(()=>t.node.initialHeight),C=I(()=>t.node.width),A=I(()=>t.node.height),P=I(()=>t.node.dragHandle),O=I(()=>Se(t.node.internals.z,0)),D=I(()=>t.node.internals.positionAbsolute.x),S=I(()=>t.node.internals.positionAbsolute.y),E=I(()=>t.node.internals.userNode),{id:R}=t.node,w=I(()=>g(o)??n().nodesDraggable),k=I(()=>g(a)??n().elementsSelectable),T=I(()=>g(u)??n().nodesConnectable),z=I(()=>w1(t.node)),B=I(()=>!!t.node.internals.handleBounds),H=I(()=>g(z)&&g(B)),V=I(()=>g(l)??n().nodesFocusable);function G(ie){return n().parentLookup.has(ie)}let Y=I(()=>G(R)),Z=xe(null),N=null,L=g(m),M=g(v),F=g(y),K=I(()=>n().nodeTypes[g(m)]??Oy),X=I(()=>n().ariaLabelConfig);Bn("svelteflow__node_connectable",{get value(){return g(T)}}),Bn("svelteflow__node_id",R);let Q=I(()=>{const ie=g(b)===void 0?g(C)??g(_):g(C),me=g(x)===void 0?g(A)??g(q):g(A);if(!(ie===void 0&&me===void 0&&g(f)===void 0))return`${g(f)};${ie?`width:${Xe(ie)};`:""}${me?`height:${Xe(me)};`:""}`});yt(()=>{(g(m)!==L||g(v)!==M||g(y)!==F)&&g(Z)!==null&&requestAnimationFrame(()=>{g(Z)!==null&&n().updateNodeInternals(new Map([[R,{id:R,nodeElement:g(Z),force:!0}]]))}),L=g(m),M=g(v),F=g(y)}),yt(()=>{t.resizeObserver&&(!g(H)||g(Z)!==N)&&(N&&t.resizeObserver.unobserve(N),g(Z)&&t.resizeObserver.observe(g(Z)),N=g(Z))}),Cc(()=>{N&&t.resizeObserver?.unobserve(N)});function fe(ie){g(k)&&(!n().selectNodesOnDrag||!g(w)||n().nodeDragThreshold>0)&&n().handleNodeSelection(R),t.onnodeclick?.({node:g(E),event:ie})}function ne(ie){if(!(by(ie)||n().disableKeyboardA11y))if(hy.includes(ie.key)&&g(k)){const me=ie.key==="Escape";n().handleNodeSelection(R,me,g(Z))}else g(w)&&t.node.selected&&Object.prototype.hasOwnProperty.call(er,ie.key)&&(ie.preventDefault(),n(n().ariaLiveMessage=g(X)["node.a11yDescription.ariaLiveMessage"]({direction:ie.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(er[ie.key],ie.shiftKey?4:1))}const de=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!g(Z)?.matches(":focus-visible"))return;const{width:ie,height:me,viewport:ut}=n();Fc(new Map([[R,t.node]]),{x:0,y:0,width:ie,height:me},[ut.x,ut.y,ut.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:ut.zoom})};var ee=Ie(),ke=ge(ee);{var te=ie=>{var me=jx();dt(me,()=>({"data-id":R,class:["svelte-flow__node",`svelte-flow__node-${g(m)}`,g(h)],style:g(Q),onclick:fe,onpointerenter:t.onnodepointerenter?he=>t.onnodepointerenter({node:g(E),event:he}):void 0,onpointerleave:t.onnodepointerleave?he=>t.onnodepointerleave({node:g(E),event:he}):void 0,onpointermove:t.onnodepointermove?he=>t.onnodepointermove({node:g(E),event:he}):void 0,oncontextmenu:t.onnodecontextmenu?he=>t.onnodecontextmenu({node:g(E),event:he}):void 0,onkeydown:g(V)?ne:void 0,onfocus:g(V)?de:void 0,tabIndex:g(V)?0:void 0,role:t.node.ariaRole??(g(V)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${Fy}-${n().flowId}`,...t.node.domAttributes,[Ac]:{dragging:g(d),selected:g(i),draggable:g(w),connectable:g(T),selectable:g(k),nopan:g(w),parent:g(Y)},[ir]:{"z-index":g(O),transform:`translate(${g(D)??""}px, ${g(S)??""}px)`,visibility:g(z)?"visible":"hidden"}}));var ut=ue(me);Rc(ut,()=>g(K),(he,Ee)=>{Ee(he,{get data(){return g(r)},get id(){return R},get selected(){return g(i)},get selectable(){return g(k)},get deletable(){return g(s)},get sourcePosition(){return g(v)},get targetPosition(){return g(y)},get zIndex(){return g(O)},get dragging(){return g(d)},get draggable(){return g(w)},get dragHandle(){return g(P)},get parentId(){return g(p)},get type(){return g(m)},get isConnectable(){return g(T)},get positionAbsoluteX(){return g(D)},get positionAbsoluteY(){return g(S)},get width(){return g(C)},get height(){return g(A)}})}),re(me),qe(me,(he,Ee)=>zy?.(he,Ee),()=>({nodeId:R,isSelectable:g(k),disabled:!g(w),handleSelector:g(P),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(he,Ee,_e,Ge)=>{t.onnodedrag?.({event:he,targetNode:_e,nodes:Ge})},onDragStart:(he,Ee,_e,Ge)=>{t.onnodedragstart?.({event:he,targetNode:_e,nodes:Ge})},onDragStop:(he,Ee,_e,Ge)=>{t.onnodedragstop?.({event:he,targetNode:_e,nodes:Ge})},store:n()})),Kt(me,he=>j(Z,he),()=>g(Z)),W(ie,me)};pe(ke,ie=>{g(c)||ie(te)})}W(e,ee),ae()}var Yx=le('<div class="svelte-flow__nodes"></div>');function Zx(e,t){oe(t,!0);let n=U(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const a=new Map;o.forEach(s=>{const u=s.target.getAttribute("data-id");a.set(u,{id:u,nodeElement:s.target,force:!0})}),n().updateNodeInternals(a)});Cc(()=>{r?.disconnect()});var i=Yx();kc(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,a)=>{Ux(o,{get node(){return g(a)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(s){n(s)}})}),re(i),W(e,i),ae()}var Wx=be('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Xx(e,t){oe(t,!0);let n=I(()=>t.edge.source),r=I(()=>t.edge.target),i=I(()=>t.edge.sourceX),o=I(()=>t.edge.sourceY),a=I(()=>t.edge.targetX),s=I(()=>t.edge.targetY),u=I(()=>t.edge.sourcePosition),l=I(()=>t.edge.targetPosition),c=I(()=>Se(t.edge.animated,!1)),d=I(()=>Se(t.edge.selected,!1)),f=I(()=>t.edge.label),h=I(()=>t.edge.labelStyle),m=I(()=>Se(t.edge.data,()=>({}),!0)),p=I(()=>t.edge.style),v=I(()=>t.edge.interactionWidth),y=I(()=>Se(t.edge.type,"default")),b=I(()=>t.edge.sourceHandle),x=I(()=>t.edge.targetHandle),_=I(()=>t.edge.markerStart),q=I(()=>t.edge.markerEnd),C=I(()=>t.edge.selectable),A=I(()=>t.edge.focusable),P=I(()=>Se(t.edge.deletable,!0)),O=I(()=>t.edge.hidden),D=I(()=>t.edge.zIndex),S=I(()=>t.edge.class),E=I(()=>t.edge.ariaLabel),R=null;const{id:w}=t.edge;Bn("svelteflow__edge_id",w);let k=I(()=>g(C)??t.store.elementsSelectable),T=I(()=>g(A)??t.store.edgesFocusable),z=I(()=>t.store.edgeTypes[g(y)]??My),B=I(()=>g(_)?`url('#${Ec(g(_),t.store.flowId)}')`:void 0),H=I(()=>g(q)?`url('#${Ec(g(q),t.store.flowId)}')`:void 0);function V(M){const F=t.store.edgeLookup.get(w);F&&(g(k)&&t.store.handleEdgeSelection(w),t.onedgeclick?.({event:M,edge:F}))}function G(M,F){const K=t.store.edgeLookup.get(w);K&&F({event:M,edge:K})}function Y(M){if(!t.store.disableKeyboardA11y&&hy.includes(M.key)&&g(k)){const{unselectNodesAndEdges:F,addSelectedEdges:K}=t.store;M.key==="Escape"?(R?.blur(),F({edges:[t.edge]})):K([w])}}var Z=Ie(),N=ge(Z);{var L=M=>{var F=Wx();let K;var X=ue(F);dt(X,()=>({class:["svelte-flow__edge",g(S)],"data-id":w,onclick:V,oncontextmenu:t.onedgecontextmenu?Q=>{G(Q,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?Q=>{G(Q,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?Q=>{G(Q,t.onedgepointerleave)}:void 0,"aria-label":g(E)===null?void 0:g(E)?g(E):`Edge from ${g(n)} to ${g(r)}`,"aria-describedby":g(T)?`${Hy}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(g(T)?"group":"img"),"aria-roledescription":"edge",onkeydown:g(T)?Y:void 0,tabindex:g(T)?0:void 0,...t.edge.domAttributes,[Ac]:{animated:g(c),selected:g(d),selectable:g(k)}}));var $=ue(X);Rc($,()=>g(z),(Q,fe)=>{fe(Q,{get id(){return w},get source(){return g(n)},get target(){return g(r)},get sourceX(){return g(i)},get sourceY(){return g(o)},get targetX(){return g(a)},get targetY(){return g(s)},get sourcePosition(){return g(u)},get targetPosition(){return g(l)},get animated(){return g(c)},get selected(){return g(d)},get label(){return g(f)},get labelStyle(){return g(h)},get data(){return g(m)},get style(){return g(p)},get interactionWidth(){return g(v)},get selectable(){return g(k)},get deletable(){return g(P)},get type(){return g(y)},get sourceHandleId(){return g(b)},get targetHandleId(){return g(x)},get markerStart(){return g(B)},get markerEnd(){return g(H)}})}),re(X),Kt(X,Q=>R=Q,()=>R),re(F),ye(()=>K=We(F,"",K,{"z-index":g(D)})),W(M,F)};pe(N,M=>{g(O)||M(L)})}W(e,Z),ae()}var Jx=be("<defs></defs>");function Qx(e,t){oe(t,!1);const n=Et();nr();var r=Jx();kc(r,5,()=>n.markers,i=>i.id,(i,o)=>{nE(i,Tt(()=>g(o)))}),re(r),W(e,r),ae()}var $x=be('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),eE=be('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),tE=be('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function nE(e,t){oe(t,!0);let n=U(t,"width",3,12.5),r=U(t,"height",3,12.5),i=U(t,"markerUnits",3,"strokeWidth"),o=U(t,"orient",3,"auto-start-reverse"),a=U(t,"color",3,"none");var s=tE(),u=ue(s);{var l=d=>{var f=$x();let h;ye(()=>{ce(f,"stroke-width",t.strokeWidth),h=We(f,"",h,{stroke:a()})}),W(d,f)},c=d=>{var f=Ie(),h=ge(f);{var m=p=>{var v=eE();let y;ye(()=>{ce(v,"stroke-width",t.strokeWidth),y=We(v,"",y,{stroke:a(),fill:a()})}),W(p,v)};pe(h,p=>{t.type===Xn.ArrowClosed&&p(m)},!0)}W(d,f)};pe(u,d=>{t.type===Xn.Arrow?d(l):d(c,!1)})}re(s),ye(()=>{ce(s,"id",t.id),ce(s,"markerWidth",`${n()}`),ce(s,"markerHeight",`${r()}`),ce(s,"markerUnits",i()),ce(s,"orient",o())}),W(e,s),ae()}var rE=le('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function iE(e,t){oe(t,!0);let n=U(t,"store",15);var r=rE(),i=ue(r),o=ue(i);Qx(o,{}),re(i);var a=se(i,2);kc(a,17,()=>n().visible.edges.values(),s=>s.id,(s,u)=>{Xx(s,{get edge(){return g(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(l){n(l)}})}),re(r),W(e,r),ae()}var oE=le('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function By(e,t){oe(t,!0);let n=U(t,"x",3,0),r=U(t,"y",3,0),i=U(t,"width",3,0),o=U(t,"height",3,0),a=U(t,"isVisible",3,!0);var s=Ie(),u=ge(s);{var l=c=>{var d=oE();let f;ye(h=>f=We(d,"",f,h),[()=>({width:typeof i()=="string"?i():Xe(i()),height:typeof o()=="string"?o():Xe(o()),transform:`translate(${n()}px, ${r()}px)`})]),W(c,d)};pe(u,c=>{a()&&c(l)})}W(e,s),ae()}var aE=le("<div><!></div>");function sE(e,t){oe(t,!0);let n=xe(void 0);yt(()=>{t.store.disableKeyboardA11y||g(n)?.focus({preventScroll:!0})});let r=I(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const c=lr(t.store.nodeLookup,{filter:d=>!!d.selected});if(c.width>0&&c.height>0)return c}return null});function i(c){const d=t.store.nodes.filter(f=>f.selected);t.onselectioncontextmenu?.({nodes:d,event:c})}function o(c){const d=t.store.nodes.filter(f=>f.selected);t.onselectionclick?.({nodes:d,event:c})}function a(c){Object.prototype.hasOwnProperty.call(er,c.key)&&(c.preventDefault(),t.store.moveSelectedNodes(er[c.key],c.shiftKey?4:1))}var s=Ie(),u=ge(s);{var l=c=>{var d=aE();d.__contextmenu=i,d.__click=o,d.__keydown=function(...m){(t.store.disableKeyboardA11y?void 0:a)?.apply(this,m)};let f;var h=ue(d);By(h,{width:"100%",height:"100%",x:0,y:0}),re(d),qe(d,(m,p)=>zy?.(m,p),()=>({disabled:!1,store:t.store,onDrag:(m,p,v,y)=>{t.onnodedrag?.({event:m,targetNode:null,nodes:y})},onDragStart:(m,p,v,y)=>{t.onnodedragstart?.({event:m,targetNode:null,nodes:y})},onDragStop:(m,p,v,y)=>{t.onnodedragstop?.({event:m,targetNode:null,nodes:y})}})),Kt(d,m=>j(n,m),()=>g(n)),ye(m=>{Ze(d,1,jt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-sf2y5e"),ce(d,"role",t.store.disableKeyboardA11y?void 0:"button"),ce(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),f=We(d,"",f,m)},[()=>({width:Xe(g(r).width),height:Xe(g(r).height),transform:`translate(${g(r).x??""}px, ${g(r).y??""}px)`})]),W(c,d)};pe(u,c=>{t.store.selectionRectMode==="nodes"&&g(r)&&nt(g(r).x)&&nt(g(r).y)&&c(l)})}W(e,s),ae()}Ap(["contextmenu","click","keydown"]);function uE(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Ke(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(s){const u=Array.isArray(r)?r:[r],l=[s.metaKey,s.altKey,s.shiftKey,s.ctrlKey].reduce((c,d,f)=>d?c|1<<f:c,0);for(const c of u){const d={preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:m,preventDefault:p,enabled:v}=d;if(v){if(s.key!==h)continue;if(f===null||f===!1){if(l!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const b=Array.isArray(f)?f:[f];let x=!1;for(const _ of b)if((Array.isArray(_)?_:[_]).reduce((C,A)=>C|uE(A),0)===l){x=!0;break}if(!x)continue}p&&s.preventDefault();const y={node:e,trigger:d,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:y})),m?.(y)}}}let a;return n&&(a=cc(e,i,o)),{update:s=>{const{enabled:u=!0,type:l="keydown"}=s;n&&(!u||i!==l)?a?.():!n&&u&&(a=cc(e,l,o)),n=u,i=l,r=s.trigger},destroy:()=>{a?.()}}}function Vy(){const e=I(Et),t=o=>{const a=Ql(o)?o:g(e).nodeLookup.get(o.id),s=a.parentId?x1(a.position,a.measured,a.parentId,g(e).nodeLookup,g(e).nodeOrigin):a.position,u={...a,position:s,width:a.measured?.width??a.width,height:a.measured?.height??a.height};return Ht(u)};function n(o,a,s={replace:!1}){g(e).nodes=Ce(()=>g(e).nodes).map(u=>{if(u.id===o){const l=typeof a=="function"?a(u):a;return s?.replace&&Ql(l)?l:{...u,...l}}return u})}function r(o,a,s={replace:!1}){g(e).edges=Ce(()=>g(e).edges).map(u=>{if(u.id===o){const l=typeof a=="function"?a(u):a;return s.replace&&mx(l)?l:{...u,...l}}return u})}const i=o=>g(e).nodeLookup.get(o);return{zoomIn:g(e).zoomIn,zoomOut:g(e).zoomOut,getInternalNode:i,getNode:o=>i(o)?.internals.userNode,getNodes:o=>o===void 0?g(e).nodes:rd(g(e).nodeLookup,o),getEdge:o=>g(e).edgeLookup.get(o),getEdges:o=>o===void 0?g(e).edges:rd(g(e).edgeLookup,o),setZoom:(o,a)=>{const s=g(e).panZoom;return s?s.scaleTo(o,{duration:a?.duration}):Promise.resolve(!1)},getZoom:()=>g(e).viewport.zoom,setViewport:async(o,a)=>{const s=g(e).viewport;return g(e).panZoom?(await g(e).panZoom.setViewport({x:o.x??s.x,y:o.y??s.y,zoom:o.zoom??s.zoom},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>zp(g(e).viewport),setCenter:async(o,a,s)=>g(e).setCenter(o,a,s),fitView:o=>g(e).fitView(o),fitBounds:async(o,a)=>{if(!g(e).panZoom)return Promise.resolve(!1);const s=Hc(o,g(e).width,g(e).height,g(e).minZoom,g(e).maxZoom,a?.padding??.1);return await g(e).panZoom.setViewport(s,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,a=!0,s)=>{const u=Hl(o),l=u?o:t(o);return l?(s||g(e).nodes).filter(c=>{const d=g(e).nodeLookup.get(c.id);if(!d||!u&&c.id===o.id)return!1;const f=Ht(d),h=fn(f,l);return a&&h>0||h>=f.width*f.height||h>=l.width*l.height}):[]},isNodeIntersecting:(o,a,s=!0)=>{const l=Hl(o)?o:t(o);if(!l)return!1;const c=fn(l,a);return s&&c>0||c>=a.width*a.height||c>=l.width*l.height},deleteElements:async({nodes:o=[],edges:a=[]})=>{const{nodes:s,edges:u}=await p1({nodesToRemove:o,edgesToRemove:a,nodes:g(e).nodes,edges:g(e).edges,onBeforeDelete:g(e).onbeforedelete});return s&&(g(e).nodes=Ce(()=>g(e).nodes).filter(l=>!s.some(({id:c})=>c===l.id))),u&&(g(e).edges=Ce(()=>g(e).edges).filter(l=>!u.some(({id:c})=>c===l.id))),(s.length>0||u.length>0)&&g(e).ondelete?.({nodes:s,edges:u}),{deletedNodes:s,deletedEdges:u}},screenToFlowPosition:(o,a={snapToGrid:!0})=>{if(!g(e).domNode)return o;const s=a.snapToGrid?g(e).snapGrid:!1,{x:u,y:l,zoom:c}=g(e).viewport,{x:d,y:f}=g(e).domNode.getBoundingClientRect(),h={x:o.x-d,y:o.y-f};return _n(h,[u,l,c],s!==null,s||[1,1])},flowToScreenPosition:o=>{if(!g(e).domNode)return o;const{x:a,y:s,zoom:u}=g(e).viewport,{x:l,y:c}=g(e).domNode.getBoundingClientRect(),d=Qn(o,[a,s,u]);return{x:d.x+l,y:d.y+c}},toObject:()=>structuredClone({nodes:[...g(e).nodes],edges:[...g(e).edges],viewport:{...g(e).viewport}}),updateNode:n,updateNodeData:(o,a,s)=>{const u=g(e).nodeLookup.get(o)?.internals.userNode;if(!u)return;const l=typeof a=="function"?a(u):a;n(o,c=>({...c,data:s?.replace?l:{...c.data,...l}}))},updateEdge:r,getNodesBounds:o=>f1(o,{nodeLookup:g(e).nodeLookup,nodeOrigin:g(e).nodeOrigin}),getHandleConnections:({type:o,id:a,nodeId:s})=>Array.from(g(e).connectionLookup.get(`${s}-${o}-${a??null}`)?.values()??[])}}function rd(e,t){const n=[];for(const r of t){const i=e.get(r);if(i){const o="internals"in i?i.internals?.userNode:i;n.push(o)}}return n}function cE(e,t){oe(t,!0);let n=U(t,"store",15),r=U(t,"selectionKey",3,"Shift"),i=U(t,"multiSelectionKey",19,()=>$n()?"Meta":"Control"),o=U(t,"deleteKey",3,"Backspace"),a=U(t,"panActivationKey",3," "),s=U(t,"zoomActivationKey",19,()=>$n()?"Meta":"Control"),{deleteElements:u}=Vy();function l(p){return p!==null&&typeof p=="object"}function c(p){return l(p)?p.modifier||[]:[]}function d(p){return p==null?"":l(p)?p.key:p}function f(p,v){return(Array.isArray(p)?p:[p]).map(b=>{const x=d(b);return{key:x,modifier:c(b),enabled:x!==null,callback:v}})}function h(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function m(){const p=n().nodes.filter(y=>y.selected),v=n().edges.filter(y=>y.selected);u({nodes:p,edges:v})}pt("blur",Pe,h),pt("contextmenu",Pe,h),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(o(),p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!by(p.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),m())}),type:"keydown"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(a(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(a(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(s(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Pe,(p,v)=>Ke?.(p,v),()=>({trigger:f(s(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),ae()}var lE=be('<path fill="none" class="svelte-flow__connection-path"></path>'),dE=be('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function fE(e,t){oe(t,!0);let n=I(()=>{if(!t.store.connection.inProgress)return"";const a={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case lt.Bezier:{const[s]=xy(a);return s}case lt.Straight:{const[s]=Sy(a);return s}case lt.Step:case lt.SmoothStep:{const[s]=Bc({...a,borderRadius:t.type===lt.Step?0:void 0});return s}}});var r=Ie(),i=ge(r);{var o=a=>{var s=dE(),u=ue(s),l=ue(u);{var c=f=>{var h=Ie(),m=ge(h);Rc(m,()=>t.LineComponent,(p,v)=>{v(p,{})}),W(f,h)},d=f=>{var h=lE();ye(()=>{ce(h,"d",g(n)),We(h,t.style)}),W(f,h)};pe(l,f=>{t.LineComponent?f(c):f(d,!1)})}re(u),re(s),ye(f=>{ce(s,"width",t.store.width),ce(s,"height",t.store.height),We(s,t.containerStyle),Ze(u,0,f)},[()=>jt(["svelte-flow__connection",l1(t.store.connection.isValid)])]),W(a,s)};pe(i,a=>{t.store.connection.inProgress&&a(o)})}W(e,r),ae()}var hE=le("<div><!></div>");function Gy(e,t){oe(t,!0);let n=U(t,"position",3,"top-right"),r=wt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=I(()=>`${n()}`.split("-"));var o=hE();dt(o,s=>({class:s,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...g(i)]]);var a=ue(o);Ne(a,()=>t.children??Gt),re(o),W(e,o),ae()}var gE=le('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function vE(e,t){oe(t,!0);let n=U(t,"position",3,"bottom-right");var r=Ie(),i=ge(r);{var o=a=>{Gy(a,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(s,u)=>{var l=gE();W(s,l)},$$slots:{default:!0}})};pe(i,a=>{t.proOptions?.hideAttribution||a(o)})}W(e,r),ae()}var pE=le("<div><!></div>");function yE(e,t){oe(t,!0);let n=U(t,"domNode",15),r=U(t,"clientWidth",15),i=U(t,"clientHeight",15),o=I(()=>t.rest.class),a=I(()=>m_(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed"]));function s(c){c.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(c)}var u=pE();dt(u,c=>({class:["svelte-flow","svelte-flow__container",g(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:s,...g(a),[ir]:c}),[()=>({width:Xe(t.width),height:Xe(t.height)})],void 0,void 0,"svelte-mkap6j");var l=ue(u);Ne(l,()=>t.children??Gt),re(u),Kt(u,c=>n(c),()=>n()),_l(u,"clientHeight",i),_l(u,"clientWidth",r),W(e,u),ae()}var mE=le('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),_E=le("<!> <!>",1),bE=le("<!> <!> <!> <!> <!>",1);function wE(e,t){oe(t,!0);let n=U(t,"paneClickDistance",3,1),r=U(t,"nodeClickDistance",3,1),i=U(t,"panOnScrollMode",19,()=>Mt.Free),o=U(t,"preventScrolling",3,!0),a=U(t,"zoomOnScroll",3,!0),s=U(t,"zoomOnDoubleClick",3,!0),u=U(t,"zoomOnPinch",3,!0),l=U(t,"panOnScroll",3,!1),c=U(t,"panOnScrollSpeed",3,.5),d=U(t,"panOnDrag",3,!0),f=U(t,"selectionOnDrag",3,!1),h=U(t,"connectionLineType",19,()=>lt.Bezier),m=U(t,"nodes",31,()=>yl([])),p=U(t,"edges",31,()=>yl([])),v=U(t,"viewport",15,void 0),y=wt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),b=Nx({props:y,width:t.width,height:t.height,get nodes(){return m()},set nodes(_){m(_)},get edges(){return p()},set edges(_){p(_)},get viewport(){return v()},set viewport(_){v(_)}});const x=an(Sc);x&&x.setStore&&x.setStore(b),Bn(Sc,{provider:!1,getStore(){return b}}),yt(()=>{const _={nodes:b.selectedNodes,edges:b.selectedEdges};Ce(()=>t.onselectionchange)?.(_);for(const q of b.selectionChangeHandlers.values())q(_)}),Cc(()=>{b.reset()}),yE(e,{get colorMode(){return b.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return y},get domNode(){return b.domNode},set domNode(_){b.domNode=_},get clientWidth(){return b.width},set clientWidth(_){b.width=_},get clientHeight(){return b.height},set clientHeight(_){b.height=_},children:(_,q)=>{var C=bE(),A=ge(C);cE(A,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return b},set store(E){b=E}});var P=se(A,2);Dx(P,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return a()},get zoomOnDoubleClick(){return s()},get zoomOnPinch(){return u()},get panOnScroll(){return l()},get panOnScrollSpeed(){return c()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return b},set store(E){b=E},children:(E,R)=>{zx(E,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get store(){return b},set store(w){b=w},children:(w,k)=>{var T=_E(),z=ge(T);Hx(z,{get store(){return b},set store(H){b=H},children:(H,V)=>{var G=mE(),Y=se(ge(G),2);iE(Y,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return b},set store(M){b=M}});var Z=se(Y,4);fE(Z,{get type(){return h()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return b},set store(M){b=M}});var N=se(Z,2);Zx(N,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(M){b=M}});var L=se(N,2);sE(L,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(M){b=M}}),rr(2),W(H,G)},$$slots:{default:!0}});var B=se(z,2);{let H=I(()=>!!(b.selectionRect&&b.selectionRectMode==="user")),V=I(()=>b.selectionRect?.width),G=I(()=>b.selectionRect?.height),Y=I(()=>b.selectionRect?.x),Z=I(()=>b.selectionRect?.y);By(B,{get isVisible(){return g(H)},get width(){return g(V)},get height(){return g(G)},get x(){return g(Y)},get y(){return g(Z)}})}W(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}});var O=se(P,2);vE(O,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var D=se(O,2);Gx(D,{get store(){return b}});var S=se(D,2);Ne(S,()=>t.children??Gt),W(_,C)},$$slots:{default:!0}}),ae()}var xE=le("<button><!></button>");function Nn(e,t){let n=wt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=xE();dt(r,()=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[ir]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}}));var i=ue(r);Ne(i,()=>t.children??Gt),re(r),W(e,r)}var EE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function SE(e){var t=EE();W(e,t)}var CE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function qE(e){var t=CE();W(e,t)}var RE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function AE(e){var t=RE();W(e,t)}var kE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function IE(e){var t=kE();W(e,t)}var TE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function PE(e){var t=TE();W(e,t)}var NE=le("<!> <!>",1),OE=le("<!> <!> <!> <!> <!> <!>",1);function ME(e,t){oe(t,!0);let n=U(t,"position",3,"bottom-left"),r=U(t,"orientation",3,"vertical"),i=U(t,"showZoom",3,!0),o=U(t,"showFitView",3,!0),a=U(t,"showLock",3,!0),s=wt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=I(Et);const l={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let c=I(()=>g(u).nodesDraggable||g(u).nodesConnectable||g(u).elementsSelectable),d=I(()=>g(u).viewport.zoom<=g(u).minZoom),f=I(()=>g(u).viewport.zoom>=g(u).maxZoom),h=I(()=>g(u).ariaLabelConfig),m=I(()=>r()==="horizontal"?"horizontal":"vertical");const p=()=>{g(u).zoomIn()},v=()=>{g(u).zoomOut()},y=()=>{g(u).fitView(t.fitViewOptions)},b=()=>{let x=!g(c);g(u).nodesDraggable=x,g(u).nodesConnectable=x,g(u).elementsSelectable=x};{let x=I(()=>["svelte-flow__controls",g(m),t.class]);Gy(e,Tt({get class(){return g(x)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return g(h)["controls.ariaLabel"]},get style(){return t.style}},()=>s,{children:(_,q)=>{var C=OE(),A=ge(C);{var P=H=>{var V=Ie(),G=ge(V);Ne(G,()=>t.before),W(H,V)};pe(A,H=>{t.before&&H(P)})}var O=se(A,2);{var D=H=>{var V=NE(),G=ge(V);Nn(G,Tt({onclick:p,class:"svelte-flow__controls-zoomin",get title(){return g(h)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return g(h)["controls.zoomIn.ariaLabel"]},get disabled(){return g(f)}},()=>l,{children:(Z,N)=>{SE(Z)},$$slots:{default:!0}}));var Y=se(G,2);Nn(Y,Tt({onclick:v,class:"svelte-flow__controls-zoomout",get title(){return g(h)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return g(h)["controls.zoomOut.ariaLabel"]},get disabled(){return g(d)}},()=>l,{children:(Z,N)=>{qE(Z)},$$slots:{default:!0}})),W(H,V)};pe(O,H=>{i()&&H(D)})}var S=se(O,2);{var E=H=>{Nn(H,Tt({class:"svelte-flow__controls-fitview",onclick:y,get title(){return g(h)["controls.fitView.ariaLabel"]},get"aria-label"(){return g(h)["controls.fitView.ariaLabel"]}},()=>l,{children:(V,G)=>{AE(V)},$$slots:{default:!0}}))};pe(S,H=>{o()&&H(E)})}var R=se(S,2);{var w=H=>{Nn(H,Tt({class:"svelte-flow__controls-interactive",onclick:b,get title(){return g(h)["controls.interactive.ariaLabel"]},get"aria-label"(){return g(h)["controls.interactive.ariaLabel"]}},()=>l,{children:(V,G)=>{var Y=Ie(),Z=ge(Y);{var N=M=>{PE(M)},L=M=>{IE(M)};pe(Z,M=>{g(c)?M(N):M(L,!1)})}W(V,Y)},$$slots:{default:!0}}))};pe(R,H=>{a()&&H(w)})}var k=se(R,2);{var T=H=>{var V=Ie(),G=ge(V);Ne(G,()=>t.children),W(H,V)};pe(k,H=>{t.children&&H(T)})}var z=se(k,2);{var B=H=>{var V=Ie(),G=ge(V);Ne(G,()=>t.after),W(H,V)};pe(z,H=>{t.after&&H(B)})}W(_,C)},$$slots:{default:!0}}))}ae()}var it;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(it||(it={}));var DE=be("<circle></circle>");function LE(e,t){var n=DE();ye(()=>{ce(n,"cx",t.radius),ce(n,"cy",t.radius),ce(n,"r",t.radius),Ze(n,0,jt(["svelte-flow__background-pattern","dots",t.class]))}),W(e,n)}var zE=be("<path></path>");function FE(e,t){oe(t,!0);var n=zE();ye(()=>{ce(n,"stroke-width",t.lineWidth),ce(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Ze(n,0,jt(["svelte-flow__background-pattern",t.variant,t.class]))}),W(e,n),ae()}const HE={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6};var BE=be('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function VE(e,t){oe(t,!0);let n=U(t,"variant",19,()=>it.Dots),r=U(t,"gap",3,20),i=U(t,"lineWidth",3,1),o=I(Et),a=I(()=>n()===it.Dots),s=I(()=>n()===it.Cross),u=I(()=>Array.isArray(r())?r():[r(),r()]),l=I(()=>`background-pattern-${g(o).flowId}-${t.id??""}`),c=I(()=>[g(u)[0]*g(o).viewport.zoom||1,g(u)[1]*g(o).viewport.zoom||1]),d=I(()=>(t.size??HE[n()])*g(o).viewport.zoom),f=I(()=>g(s)?[g(d),g(d)]:g(c)),h=I(()=>g(a)?[g(d)/2,g(d)/2]:[g(f)[0]/2,g(f)[1]/2]);var m=BE();let p;var v=ue(m),y=ue(v);{var b=q=>{{let C=I(()=>g(d)/2);LE(q,{get radius(){return g(C)},get class(){return t.patternClass}})}},x=q=>{FE(q,{get dimensions(){return g(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};pe(y,q=>{g(a)?q(b):q(x,!1)})}re(v);var _=se(v);re(m),ye(()=>{Ze(m,0,jt(["svelte-flow__background","svelte-flow__container",t.class])),p=We(m,"",p,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),ce(v,"id",g(l)),ce(v,"x",g(o).viewport.x%g(c)[0]),ce(v,"y",g(o).viewport.y%g(c)[1]),ce(v,"width",g(c)[0]),ce(v,"height",g(c)[1]),ce(v,"patternTransform",`translate(-${g(h)[0]},-${g(h)[1]})`),ce(_,"fill",`url(#${g(l)})`)}),W(e,m),ae()}var GE=be('<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'),KE=le(`<button class="flex h-6 w-6 items-center justify-center rounded-full transition-colors cursor-pointer text-xs font-bold border
                   bg-gray-200 hover:bg-gray-300 text-gray-700 border-gray-300
                   dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white dark:border-gray-500" aria-label="Toggle children"><!></button>`),jE=le('<div><!> <div> </div> <div class="absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 translate-x-1/2"><!></div></div>');function UE(e,t){oe(t,!1);let n=U(t,"data",8),r=U(t,"isConnectable",8);const{fitView:i}=Vy();function o(){n().onToggle&&(n().onToggle(),setTimeout(()=>{i({duration:500})},100))}nr();var a=jE(),s=ue(a);Vt(s,{type:"target",get position(){return et(J),Ce(()=>J.Left)},get isConnectable(){return r()},class:"!bg-gray-400"});var u=se(s,2),l=ue(u,!0);re(u);var c=se(u,2),d=ue(c);Vt(d,{type:"source",get position(){return et(J),Ce(()=>J.Right)},get isConnectable(){return r()},class:"!w-full !h-full !border-0 !bg-transparent flex items-center justify-center",children:(f,h)=>{var m=Ie(),p=ge(m);{var v=y=>{var b=KE(),x=ue(b);{var _=C=>{var A=GE();W(C,A)},q=C=>{var A=Rp();ye(()=>rt(A,(et(n()),Ce(()=>n().childrenCount)))),W(C,A)};pe(x,C=>{et(n()),Ce(()=>n().expanded)?C(_):C(q,!1)})}re(b),pt("click",b,q_(o)),W(y,b)};pe(p,y=>{et(n()),Ce(()=>n().hasChildren)&&y(v)})}W(f,m)},$$slots:{default:!0}}),re(c),re(a),ye(()=>{Ze(a,1,`relative inline-flex items-center rounded-lg border ${et(n()),Ce(()=>n().highlighted?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/30":"border-gray-300 bg-white dark:border-gray-600 dark:bg-gray-900")??""} pl-4 pr-3 py-2 text-gray-900 shadow-md max-w-xs dark:text-white transition-colors duration-200`),Ze(u,1,`font-medium ${et(n()),Ce(()=>n().hasChildren?"mr-8":"")??""} overflow-hidden text-ellipsis whitespace-nowrap`),rt(l,(et(n()),Ce(()=>n().label)))}),W(e,a),ae()}var YE=le(`<div class="flex items-center"><label class="cursor-pointer inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium transition-colors
                bg-slate-600 text-white dark:text-slate-900 hover:bg-slate-700
                dark:bg-slate-200 dark:hover:bg-slate-100"><span>Subir JSON</span> <input type="file" accept=".json" class="hidden"/></label></div>`);function ZE(e,t){oe(t,!1);const n=Ym();let r=qc();function i(u){const c=u.target.files?.[0];if(c){const d=new FileReader;d.onload=f=>{try{const h=JSON.parse(f.target?.result);n("load",h)}catch(h){console.error("Invalid JSON",h),alert("Invalid JSON file")}},d.readAsText(c)}}nr();var o=YE(),a=ue(o),s=se(ue(a),2);Kt(s,u=>j(r,u),()=>g(r)),re(a),re(o),pt("change",s,i),W(e,o),ae()}var On=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jr,id;function WE(){if(id)return jr;id=1;function e(){this.__data__=[],this.size=0}return jr=e,jr}var Ur,od;function Ut(){if(od)return Ur;od=1;function e(t,n){return t===n||t!==t&&n!==n}return Ur=e,Ur}var Yr,ad;function vr(){if(ad)return Yr;ad=1;var e=Ut();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Yr=t,Yr}var Zr,sd;function XE(){if(sd)return Zr;sd=1;var e=vr(),t=Array.prototype,n=t.splice;function r(i){var o=this.__data__,a=e(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():n.call(o,a,1),--this.size,!0}return Zr=r,Zr}var Wr,ud;function JE(){if(ud)return Wr;ud=1;var e=vr();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Wr=t,Wr}var Xr,cd;function QE(){if(cd)return Xr;cd=1;var e=vr();function t(n){return e(this.__data__,n)>-1}return Xr=t,Xr}var Jr,ld;function $E(){if(ld)return Jr;ld=1;var e=vr();function t(n,r){var i=this.__data__,o=e(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return Jr=t,Jr}var Qr,dd;function pr(){if(dd)return Qr;dd=1;var e=WE(),t=XE(),n=JE(),r=QE(),i=$E();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Qr=o,Qr}var $r,fd;function eS(){if(fd)return $r;fd=1;var e=pr();function t(){this.__data__=new e,this.size=0}return $r=t,$r}var ei,hd;function tS(){if(hd)return ei;hd=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ei=e,ei}var ti,gd;function nS(){if(gd)return ti;gd=1;function e(t){return this.__data__.get(t)}return ti=e,ti}var ni,vd;function rS(){if(vd)return ni;vd=1;function e(t){return this.__data__.has(t)}return ni=e,ni}var ri,pd;function Ky(){if(pd)return ri;pd=1;var e=typeof On=="object"&&On&&On.Object===Object&&On;return ri=e,ri}var ii,yd;function Ve(){if(yd)return ii;yd=1;var e=Ky(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ii=n,ii}var oi,md;function Yt(){if(md)return oi;md=1;var e=Ve(),t=e.Symbol;return oi=t,oi}var ai,_d;function iS(){if(_d)return ai;_d=1;var e=Yt(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(a){var s=n.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=r.call(a);return l&&(s?a[i]=u:delete a[i]),c}return ai=o,ai}var si,bd;function oS(){if(bd)return si;bd=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return si=n,si}var ui,wd;function St(){if(wd)return ui;wd=1;var e=Yt(),t=iS(),n=oS(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?t(s):n(s)}return ui=a,ui}var ci,xd;function Oe(){if(xd)return ci;xd=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ci=e,ci}var li,Ed;function bn(){if(Ed)return li;Ed=1;var e=St(),t=Oe(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!t(s))return!1;var u=e(s);return u==r||u==i||u==n||u==o}return li=a,li}var di,Sd;function aS(){if(Sd)return di;Sd=1;var e=Ve(),t=e["__core-js_shared__"];return di=t,di}var fi,Cd;function sS(){if(Cd)return fi;Cd=1;var e=aS(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return fi=n,fi}var hi,qd;function jy(){if(qd)return hi;qd=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return hi=n,hi}var gi,Rd;function uS(){if(Rd)return gi;Rd=1;var e=bn(),t=sS(),n=Oe(),r=jy(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?c:o;return h.test(r(f))}return gi=d,gi}var vi,Ad;function cS(){if(Ad)return vi;Ad=1;function e(t,n){return t?.[n]}return vi=e,vi}var pi,kd;function Ct(){if(kd)return pi;kd=1;var e=uS(),t=cS();function n(r,i){var o=t(r,i);return e(o)?o:void 0}return pi=n,pi}var yi,Id;function Uc(){if(Id)return yi;Id=1;var e=Ct(),t=Ve(),n=e(t,"Map");return yi=n,yi}var mi,Td;function yr(){if(Td)return mi;Td=1;var e=Ct(),t=e(Object,"create");return mi=t,mi}var _i,Pd;function lS(){if(Pd)return _i;Pd=1;var e=yr();function t(){this.__data__=e?e(null):{},this.size=0}return _i=t,_i}var bi,Nd;function dS(){if(Nd)return bi;Nd=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return bi=e,bi}var wi,Od;function fS(){if(Od)return wi;Od=1;var e=yr(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;if(e){var s=a[o];return s===t?void 0:s}return r.call(a,o)?a[o]:void 0}return wi=i,wi}var xi,Md;function hS(){if(Md)return xi;Md=1;var e=yr(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var o=this.__data__;return e?o[i]!==void 0:n.call(o,i)}return xi=r,xi}var Ei,Dd;function gS(){if(Dd)return Ei;Dd=1;var e=yr(),t="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=e&&i===void 0?t:i,this}return Ei=n,Ei}var Si,Ld;function vS(){if(Ld)return Si;Ld=1;var e=lS(),t=dS(),n=fS(),r=hS(),i=gS();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Si=o,Si}var Ci,zd;function pS(){if(zd)return Ci;zd=1;var e=vS(),t=pr(),n=Uc();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ci=r,Ci}var qi,Fd;function yS(){if(Fd)return qi;Fd=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return qi=e,qi}var Ri,Hd;function mr(){if(Hd)return Ri;Hd=1;var e=yS();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Ri=t,Ri}var Ai,Bd;function mS(){if(Bd)return Ai;Bd=1;var e=mr();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ai=t,Ai}var ki,Vd;function _S(){if(Vd)return ki;Vd=1;var e=mr();function t(n){return e(this,n).get(n)}return ki=t,ki}var Ii,Gd;function bS(){if(Gd)return Ii;Gd=1;var e=mr();function t(n){return e(this,n).has(n)}return Ii=t,Ii}var Ti,Kd;function wS(){if(Kd)return Ti;Kd=1;var e=mr();function t(n,r){var i=e(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return Ti=t,Ti}var Pi,jd;function Yc(){if(jd)return Pi;jd=1;var e=pS(),t=mS(),n=_S(),r=bS(),i=wS();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Pi=o,Pi}var Ni,Ud;function xS(){if(Ud)return Ni;Ud=1;var e=pr(),t=Uc(),n=Yc(),r=200;function i(o,a){var s=this.__data__;if(s instanceof e){var u=s.__data__;if(!t||u.length<r-1)return u.push([o,a]),this.size=++s.size,this;s=this.__data__=new n(u)}return s.set(o,a),this.size=s.size,this}return Ni=i,Ni}var Oi,Yd;function _r(){if(Yd)return Oi;Yd=1;var e=pr(),t=eS(),n=tS(),r=nS(),i=rS(),o=xS();function a(s){var u=this.__data__=new e(s);this.size=u.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Oi=a,Oi}var Mi,Zd;function Zc(){if(Zd)return Mi;Zd=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Mi=e,Mi}var Di,Wd;function Uy(){if(Wd)return Di;Wd=1;var e=Ct(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Di=t,Di}var Li,Xd;function br(){if(Xd)return Li;Xd=1;var e=Uy();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Li=t,Li}var zi,Jd;function wr(){if(Jd)return zi;Jd=1;var e=br(),t=Ut(),n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s){var u=o[a];(!(r.call(o,a)&&t(u,s))||s===void 0&&!(a in o))&&e(o,a,s)}return zi=i,zi}var Fi,Qd;function wn(){if(Qd)return Fi;Qd=1;var e=wr(),t=br();function n(r,i,o,a){var s=!o;o||(o={});for(var u=-1,l=i.length;++u<l;){var c=i[u],d=a?a(o[c],r[c],c,o,r):void 0;d===void 0&&(d=r[c]),s?t(o,c,d):e(o,c,d)}return o}return Fi=n,Fi}var Hi,$d;function ES(){if($d)return Hi;$d=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Hi=e,Hi}var Bi,ef;function Qe(){if(ef)return Bi;ef=1;function e(t){return t!=null&&typeof t=="object"}return Bi=e,Bi}var Vi,tf;function SS(){if(tf)return Vi;tf=1;var e=St(),t=Qe(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Vi=r,Vi}var Gi,nf;function xn(){if(nf)return Gi;nf=1;var e=SS(),t=Qe(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(a){return t(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return Gi=o,Gi}var Ki,rf;function we(){if(rf)return Ki;rf=1;var e=Array.isArray;return Ki=e,Ki}var tn={exports:{}},ji,of;function CS(){if(of)return ji;of=1;function e(){return!1}return ji=e,ji}tn.exports;var af;function Zt(){return af||(af=1,(function(e,t){var n=Ve(),r=CS(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;e.exports=l})(tn,tn.exports)),tn.exports}var Ui,sf;function xr(){if(sf)return Ui;sf=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Ui=n,Ui}var Yi,uf;function Wc(){if(uf)return Yi;uf=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Yi=t,Yi}var Zi,cf;function qS(){if(cf)return Zi;cf=1;var e=St(),t=Wc(),n=Qe(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",m="[object String]",p="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",q="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",D="[object Uint32Array]",S={};S[b]=S[x]=S[_]=S[q]=S[C]=S[A]=S[P]=S[O]=S[D]=!0,S[r]=S[i]=S[v]=S[o]=S[y]=S[a]=S[s]=S[u]=S[l]=S[c]=S[d]=S[f]=S[h]=S[m]=S[p]=!1;function E(R){return n(R)&&t(R.length)&&!!S[e(R)]}return Zi=E,Zi}var Wi,lf;function Er(){if(lf)return Wi;lf=1;function e(t){return function(n){return t(n)}}return Wi=e,Wi}var nn={exports:{}};nn.exports;var df;function Xc(){return df||(df=1,(function(e,t){var n=Ky(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o&&n.process,s=(function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}})();e.exports=s})(nn,nn.exports)),nn.exports}var Xi,ff;function En(){if(ff)return Xi;ff=1;var e=qS(),t=Er(),n=Xc(),r=n&&n.isTypedArray,i=r?t(r):e;return Xi=i,Xi}var Ji,hf;function Yy(){if(hf)return Ji;hf=1;var e=ES(),t=xn(),n=we(),r=Zt(),i=xr(),o=En(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var d=n(l),f=!d&&t(l),h=!d&&!f&&r(l),m=!d&&!f&&!h&&o(l),p=d||f||h||m,v=p?e(l.length,String):[],y=v.length;for(var b in l)(c||s.call(l,b))&&!(p&&(b=="length"||h&&(b=="offset"||b=="parent")||m&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,y)))&&v.push(b);return v}return Ji=u,Ji}var Qi,gf;function Sr(){if(gf)return Qi;gf=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Qi=t,Qi}var $i,vf;function Zy(){if(vf)return $i;vf=1;function e(t,n){return function(r){return t(n(r))}}return $i=e,$i}var eo,pf;function RS(){if(pf)return eo;pf=1;var e=Zy(),t=e(Object.keys,Object);return eo=t,eo}var to,yf;function Jc(){if(yf)return to;yf=1;var e=Sr(),t=RS(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!e(o))return t(o);var a=[];for(var s in Object(o))r.call(o,s)&&s!="constructor"&&a.push(s);return a}return to=i,to}var no,mf;function at(){if(mf)return no;mf=1;var e=bn(),t=Wc();function n(r){return r!=null&&t(r.length)&&!e(r)}return no=n,no}var ro,_f;function ft(){if(_f)return ro;_f=1;var e=Yy(),t=Jc(),n=at();function r(i){return n(i)?e(i):t(i)}return ro=r,ro}var io,bf;function AS(){if(bf)return io;bf=1;var e=wn(),t=ft();function n(r,i){return r&&e(i,t(i),r)}return io=n,io}var oo,wf;function kS(){if(wf)return oo;wf=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return oo=e,oo}var ao,xf;function IS(){if(xf)return ao;xf=1;var e=Oe(),t=Sr(),n=kS(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!e(a))return n(a);var s=t(a),u=[];for(var l in a)l=="constructor"&&(s||!i.call(a,l))||u.push(l);return u}return ao=o,ao}var so,Ef;function qt(){if(Ef)return so;Ef=1;var e=Yy(),t=IS(),n=at();function r(i){return n(i)?e(i,!0):t(i)}return so=r,so}var uo,Sf;function TS(){if(Sf)return uo;Sf=1;var e=wn(),t=qt();function n(r,i){return r&&e(i,t(i),r)}return uo=n,uo}var rn={exports:{}};rn.exports;var Cf;function Wy(){return Cf||(Cf=1,(function(e,t){var n=Ve(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var d=l.length,f=s?s(d):new l.constructor(d);return l.copy(f),f}e.exports=u})(rn,rn.exports)),rn.exports}var co,qf;function Xy(){if(qf)return co;qf=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return co=e,co}var lo,Rf;function Jy(){if(Rf)return lo;Rf=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=0,a=[];++r<i;){var s=t[r];n(s,r,t)&&(a[o++]=s)}return a}return lo=e,lo}var fo,Af;function Qy(){if(Af)return fo;Af=1;function e(){return[]}return fo=e,fo}var ho,kf;function Qc(){if(kf)return ho;kf=1;var e=Jy(),t=Qy(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(s){return r.call(a,s)}))}:t;return ho=o,ho}var go,If;function PS(){if(If)return go;If=1;var e=wn(),t=Qc();function n(r,i){return e(r,t(r),i)}return go=n,go}var vo,Tf;function $c(){if(Tf)return vo;Tf=1;function e(t,n){for(var r=-1,i=n.length,o=t.length;++r<i;)t[o+r]=n[r];return t}return vo=e,vo}var po,Pf;function Cr(){if(Pf)return po;Pf=1;var e=Zy(),t=e(Object.getPrototypeOf,Object);return po=t,po}var yo,Nf;function $y(){if(Nf)return yo;Nf=1;var e=$c(),t=Cr(),n=Qc(),r=Qy(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return yo=o,yo}var mo,Of;function NS(){if(Of)return mo;Of=1;var e=wn(),t=$y();function n(r,i){return e(r,t(r),i)}return mo=n,mo}var _o,Mf;function em(){if(Mf)return _o;Mf=1;var e=$c(),t=we();function n(r,i,o){var a=i(r);return t(r)?a:e(a,o(r))}return _o=n,_o}var bo,Df;function tm(){if(Df)return bo;Df=1;var e=em(),t=Qc(),n=ft();function r(i){return e(i,n,t)}return bo=r,bo}var wo,Lf;function OS(){if(Lf)return wo;Lf=1;var e=em(),t=$y(),n=qt();function r(i){return e(i,n,t)}return wo=r,wo}var xo,zf;function MS(){if(zf)return xo;zf=1;var e=Ct(),t=Ve(),n=e(t,"DataView");return xo=n,xo}var Eo,Ff;function DS(){if(Ff)return Eo;Ff=1;var e=Ct(),t=Ve(),n=e(t,"Promise");return Eo=n,Eo}var So,Hf;function nm(){if(Hf)return So;Hf=1;var e=Ct(),t=Ve(),n=e(t,"Set");return So=n,So}var Co,Bf;function LS(){if(Bf)return Co;Bf=1;var e=Ct(),t=Ve(),n=e(t,"WeakMap");return Co=n,Co}var qo,Vf;function Wt(){if(Vf)return qo;Vf=1;var e=MS(),t=Uc(),n=DS(),r=nm(),i=LS(),o=St(),a=jy(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),m=a(t),p=a(n),v=a(r),y=a(i),b=o;return(e&&b(new e(new ArrayBuffer(1)))!=f||t&&b(new t)!=s||n&&b(n.resolve())!=l||r&&b(new r)!=c||i&&b(new i)!=d)&&(b=function(x){var _=o(x),q=_==u?x.constructor:void 0,C=q?a(q):"";if(C)switch(C){case h:return f;case m:return s;case p:return l;case v:return c;case y:return d}return _}),qo=b,qo}var Ro,Gf;function zS(){if(Gf)return Ro;Gf=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return Ro=n,Ro}var Ao,Kf;function rm(){if(Kf)return Ao;Kf=1;var e=Ve(),t=e.Uint8Array;return Ao=t,Ao}var ko,jf;function el(){if(jf)return ko;jf=1;var e=rm();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return ko=t,ko}var Io,Uf;function FS(){if(Uf)return Io;Uf=1;var e=el();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Io=t,Io}var To,Yf;function HS(){if(Yf)return To;Yf=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return To=t,To}var Po,Zf;function BS(){if(Zf)return Po;Zf=1;var e=Yt(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Po=r,Po}var No,Wf;function im(){if(Wf)return No;Wf=1;var e=el();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return No=t,No}var Oo,Xf;function VS(){if(Xf)return Oo;Xf=1;var e=el(),t=FS(),n=HS(),r=BS(),i=im(),o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",m="[object DataView]",p="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",q="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]";function P(O,D,S){var E=O.constructor;switch(D){case h:return e(O);case o:case a:return new E(+O);case m:return t(O,S);case p:case v:case y:case b:case x:case _:case q:case C:case A:return i(O,S);case s:return new E;case u:case d:return new E(O);case l:return n(O);case c:return new E;case f:return r(O)}}return Oo=P,Oo}var Mo,Jf;function om(){if(Jf)return Mo;Jf=1;var e=Oe(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}})();return Mo=n,Mo}var Do,Qf;function am(){if(Qf)return Do;Qf=1;var e=om(),t=Cr(),n=Sr();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Do=r,Do}var Lo,$f;function GS(){if($f)return Lo;$f=1;var e=Wt(),t=Qe(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Lo=r,Lo}var zo,eh;function KS(){if(eh)return zo;eh=1;var e=GS(),t=Er(),n=Xc(),r=n&&n.isMap,i=r?t(r):e;return zo=i,zo}var Fo,th;function jS(){if(th)return Fo;th=1;var e=Wt(),t=Qe(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Fo=r,Fo}var Ho,nh;function US(){if(nh)return Ho;nh=1;var e=jS(),t=Er(),n=Xc(),r=n&&n.isSet,i=r?t(r):e;return Ho=i,Ho}var Bo,rh;function sm(){if(rh)return Bo;rh=1;var e=_r(),t=Zc(),n=wr(),r=AS(),i=TS(),o=Wy(),a=Xy(),s=PS(),u=NS(),l=tm(),c=OS(),d=Wt(),f=zS(),h=VS(),m=am(),p=we(),v=Zt(),y=KS(),b=Oe(),x=US(),_=ft(),q=qt(),C=1,A=2,P=4,O="[object Arguments]",D="[object Array]",S="[object Boolean]",E="[object Date]",R="[object Error]",w="[object Function]",k="[object GeneratorFunction]",T="[object Map]",z="[object Number]",B="[object Object]",H="[object RegExp]",V="[object Set]",G="[object String]",Y="[object Symbol]",Z="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",F="[object Float64Array]",K="[object Int8Array]",X="[object Int16Array]",$="[object Int32Array]",Q="[object Uint8Array]",fe="[object Uint8ClampedArray]",ne="[object Uint16Array]",de="[object Uint32Array]",ee={};ee[O]=ee[D]=ee[N]=ee[L]=ee[S]=ee[E]=ee[M]=ee[F]=ee[K]=ee[X]=ee[$]=ee[T]=ee[z]=ee[B]=ee[H]=ee[V]=ee[G]=ee[Y]=ee[Q]=ee[fe]=ee[ne]=ee[de]=!0,ee[R]=ee[w]=ee[Z]=!1;function ke(te,ie,me,ut,he,Ee){var _e,Ge=ie&C,Cn=ie&A,jm=ie&P;if(me&&(_e=he?me(te,ut,he,Ee):me(te)),_e!==void 0)return _e;if(!b(te))return te;var cl=p(te);if(cl){if(_e=f(te),!Ge)return a(te,_e)}else{var At=d(te),ll=At==w||At==k;if(v(te))return o(te,Ge);if(At==B||At==O||ll&&!he){if(_e=Cn||ll?{}:m(te),!Ge)return Cn?u(te,i(_e,te)):s(te,r(_e,te))}else{if(!ee[At])return he?te:{};_e=h(te,At,Ge)}}Ee||(Ee=new e);var dl=Ee.get(te);if(dl)return dl;Ee.set(te,_e),x(te)?te.forEach(function(ct){_e.add(ke(ct,ie,me,ct,te,Ee))}):y(te)&&te.forEach(function(ct,ht){_e.set(ht,ke(ct,ie,me,ht,te,Ee))});var Um=jm?Cn?c:l:Cn?q:_,fl=cl?void 0:Um(te);return t(fl||te,function(ct,ht){fl&&(ht=ct,ct=te[ht]),n(_e,ht,ke(ct,ie,me,ht,te,Ee))}),_e}return Bo=ke,Bo}var Vo,ih;function YS(){if(ih)return Vo;ih=1;var e=sm(),t=4;function n(r){return e(r,t)}return Vo=n,Vo}var Go,oh;function tl(){if(oh)return Go;oh=1;function e(t){return function(){return t}}return Go=e,Go}var Ko,ah;function ZS(){if(ah)return Ko;ah=1;function e(t){return function(n,r,i){for(var o=-1,a=Object(n),s=i(n),u=s.length;u--;){var l=s[t?u:++o];if(r(a[l],l,a)===!1)break}return n}}return Ko=e,Ko}var jo,sh;function nl(){if(sh)return jo;sh=1;var e=ZS(),t=e();return jo=t,jo}var Uo,uh;function rl(){if(uh)return Uo;uh=1;var e=nl(),t=ft();function n(r,i){return r&&e(r,i,t)}return Uo=n,Uo}var Yo,ch;function WS(){if(ch)return Yo;ch=1;var e=at();function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var a=i.length,s=r?a:-1,u=Object(i);(r?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return Yo=t,Yo}var Zo,lh;function qr(){if(lh)return Zo;lh=1;var e=rl(),t=WS(),n=t(e);return Zo=n,Zo}var Wo,dh;function Rt(){if(dh)return Wo;dh=1;function e(t){return t}return Wo=e,Wo}var Xo,fh;function um(){if(fh)return Xo;fh=1;var e=Rt();function t(n){return typeof n=="function"?n:e}return Xo=t,Xo}var Jo,hh;function cm(){if(hh)return Jo;hh=1;var e=Zc(),t=qr(),n=um(),r=we();function i(o,a){var s=r(o)?e:t;return s(o,n(a))}return Jo=i,Jo}var Qo,gh;function lm(){return gh||(gh=1,Qo=cm()),Qo}var $o,vh;function XS(){if(vh)return $o;vh=1;var e=qr();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return $o=t,$o}var ea,ph;function JS(){if(ph)return ea;ph=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ea=t,ea}var ta,yh;function QS(){if(yh)return ta;yh=1;function e(t){return this.__data__.has(t)}return ta=e,ta}var na,mh;function dm(){if(mh)return na;mh=1;var e=Yc(),t=JS(),n=QS();function r(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new e;++o<a;)this.add(i[o])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,na=r,na}var ra,_h;function $S(){if(_h)return ra;_h=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return ra=e,ra}var ia,bh;function fm(){if(bh)return ia;bh=1;function e(t,n){return t.has(n)}return ia=e,ia}var oa,wh;function hm(){if(wh)return oa;wh=1;var e=dm(),t=$S(),n=fm(),r=1,i=2;function o(a,s,u,l,c,d){var f=u&r,h=a.length,m=s.length;if(h!=m&&!(f&&m>h))return!1;var p=d.get(a),v=d.get(s);if(p&&v)return p==s&&v==a;var y=-1,b=!0,x=u&i?new e:void 0;for(d.set(a,s),d.set(s,a);++y<h;){var _=a[y],q=s[y];if(l)var C=f?l(q,_,y,s,a,d):l(_,q,y,a,s,d);if(C!==void 0){if(C)continue;b=!1;break}if(x){if(!t(s,function(A,P){if(!n(x,P)&&(_===A||c(_,A,u,l,d)))return x.push(P)})){b=!1;break}}else if(!(_===q||c(_,q,u,l,d))){b=!1;break}}return d.delete(a),d.delete(s),b}return oa=o,oa}var aa,xh;function eC(){if(xh)return aa;xh=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,o){r[++n]=[o,i]}),r}return aa=e,aa}var sa,Eh;function il(){if(Eh)return sa;Eh=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return sa=e,sa}var ua,Sh;function tC(){if(Sh)return ua;Sh=1;var e=Yt(),t=rm(),n=Ut(),r=hm(),i=eC(),o=il(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",m="[object Set]",p="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",x=e?e.prototype:void 0,_=x?x.valueOf:void 0;function q(C,A,P,O,D,S,E){switch(P){case b:if(C.byteLength!=A.byteLength||C.byteOffset!=A.byteOffset)return!1;C=C.buffer,A=A.buffer;case y:return!(C.byteLength!=A.byteLength||!S(new t(C),new t(A)));case u:case l:case f:return n(+C,+A);case c:return C.name==A.name&&C.message==A.message;case h:case p:return C==A+"";case d:var R=i;case m:var w=O&a;if(R||(R=o),C.size!=A.size&&!w)return!1;var k=E.get(C);if(k)return k==A;O|=s,E.set(C,A);var T=r(R(C),R(A),O,D,S,E);return E.delete(C),T;case v:if(_)return _.call(C)==_.call(A)}return!1}return ua=q,ua}var ca,Ch;function nC(){if(Ch)return ca;Ch=1;var e=tm(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s,u,l,c){var d=s&t,f=e(o),h=f.length,m=e(a),p=m.length;if(h!=p&&!d)return!1;for(var v=h;v--;){var y=f[v];if(!(d?y in a:r.call(a,y)))return!1}var b=c.get(o),x=c.get(a);if(b&&x)return b==a&&x==o;var _=!0;c.set(o,a),c.set(a,o);for(var q=d;++v<h;){y=f[v];var C=o[y],A=a[y];if(u)var P=d?u(A,C,y,a,o,c):u(C,A,y,o,a,c);if(!(P===void 0?C===A||l(C,A,s,u,c):P)){_=!1;break}q||(q=y=="constructor")}if(_&&!q){var O=o.constructor,D=a.constructor;O!=D&&"constructor"in o&&"constructor"in a&&!(typeof O=="function"&&O instanceof O&&typeof D=="function"&&D instanceof D)&&(_=!1)}return c.delete(o),c.delete(a),_}return ca=i,ca}var la,qh;function rC(){if(qh)return la;qh=1;var e=_r(),t=hm(),n=tC(),r=nC(),i=Wt(),o=we(),a=Zt(),s=En(),u=1,l="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function m(p,v,y,b,x,_){var q=o(p),C=o(v),A=q?c:i(p),P=C?c:i(v);A=A==l?d:A,P=P==l?d:P;var O=A==d,D=P==d,S=A==P;if(S&&a(p)){if(!a(v))return!1;q=!0,O=!1}if(S&&!O)return _||(_=new e),q||s(p)?t(p,v,y,b,x,_):n(p,v,A,y,b,x,_);if(!(y&u)){var E=O&&h.call(p,"__wrapped__"),R=D&&h.call(v,"__wrapped__");if(E||R){var w=E?p.value():p,k=R?v.value():v;return _||(_=new e),x(w,k,y,b,_)}}return S?(_||(_=new e),r(p,v,y,b,x,_)):!1}return la=m,la}var da,Rh;function gm(){if(Rh)return da;Rh=1;var e=rC(),t=Qe();function n(r,i,o,a,s){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,o,a,n,s)}return da=n,da}var fa,Ah;function iC(){if(Ah)return fa;Ah=1;var e=_r(),t=gm(),n=1,r=2;function i(o,a,s,u){var l=s.length,c=l,d=!u;if(o==null)return!c;for(o=Object(o);l--;){var f=s[l];if(d&&f[2]?f[1]!==o[f[0]]:!(f[0]in o))return!1}for(;++l<c;){f=s[l];var h=f[0],m=o[h],p=f[1];if(d&&f[2]){if(m===void 0&&!(h in o))return!1}else{var v=new e;if(u)var y=u(m,p,h,o,a,v);if(!(y===void 0?t(p,m,n|r,u,v):y))return!1}}return!0}return fa=i,fa}var ha,kh;function vm(){if(kh)return ha;kh=1;var e=Oe();function t(n){return n===n&&!e(n)}return ha=t,ha}var ga,Ih;function oC(){if(Ih)return ga;Ih=1;var e=vm(),t=ft();function n(r){for(var i=t(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,e(s)]}return i}return ga=n,ga}var va,Th;function pm(){if(Th)return va;Th=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return va=e,va}var pa,Ph;function aC(){if(Ph)return pa;Ph=1;var e=iC(),t=oC(),n=pm();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return pa=r,pa}var ya,Nh;function Xt(){if(Nh)return ya;Nh=1;var e=St(),t=Qe(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return ya=r,ya}var ma,Oh;function ol(){if(Oh)return ma;Oh=1;var e=we(),t=Xt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return ma=i,ma}var _a,Mh;function sC(){if(Mh)return _a;Mh=1;var e=Yc(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||e),o}return n.Cache=e,_a=n,_a}var ba,Dh;function uC(){if(Dh)return ba;Dh=1;var e=sC(),t=500;function n(r){var i=e(r,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return ba=n,ba}var wa,Lh;function cC(){if(Lh)return wa;Lh=1;var e=uC(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return wa=r,wa}var xa,zh;function Rr(){if(zh)return xa;zh=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return xa=e,xa}var Ea,Fh;function lC(){if(Fh)return Ea;Fh=1;var e=Yt(),t=Rr(),n=we(),r=Xt(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return t(s,a)+"";if(r(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return Ea=a,Ea}var Sa,Hh;function ym(){if(Hh)return Sa;Hh=1;var e=lC();function t(n){return n==null?"":e(n)}return Sa=t,Sa}var Ca,Bh;function Ar(){if(Bh)return Ca;Bh=1;var e=we(),t=ol(),n=cC(),r=ym();function i(o,a){return e(o)?o:t(o,a)?[o]:n(r(o))}return Ca=i,Ca}var qa,Vh;function Sn(){if(Vh)return qa;Vh=1;var e=Xt();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return qa=t,qa}var Ra,Gh;function kr(){if(Gh)return Ra;Gh=1;var e=Ar(),t=Sn();function n(r,i){i=e(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[t(i[o++])];return o&&o==a?r:void 0}return Ra=n,Ra}var Aa,Kh;function dC(){if(Kh)return Aa;Kh=1;var e=kr();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return Aa=t,Aa}var ka,jh;function fC(){if(jh)return ka;jh=1;function e(t,n){return t!=null&&n in Object(t)}return ka=e,ka}var Ia,Uh;function mm(){if(Uh)return Ia;Uh=1;var e=Ar(),t=xn(),n=we(),r=xr(),i=Wc(),o=Sn();function a(s,u,l){u=e(u,s);for(var c=-1,d=u.length,f=!1;++c<d;){var h=o(u[c]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++c!=d?f:(d=s==null?0:s.length,!!d&&i(d)&&r(h,d)&&(n(s)||t(s)))}return Ia=a,Ia}var Ta,Yh;function _m(){if(Yh)return Ta;Yh=1;var e=fC(),t=mm();function n(r,i){return r!=null&&t(r,i,e)}return Ta=n,Ta}var Pa,Zh;function hC(){if(Zh)return Pa;Zh=1;var e=gm(),t=dC(),n=_m(),r=ol(),i=vm(),o=pm(),a=Sn(),s=1,u=2;function l(c,d){return r(c)&&i(d)?o(a(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,s|u)}}return Pa=l,Pa}var Na,Wh;function bm(){if(Wh)return Na;Wh=1;function e(t){return function(n){return n?.[t]}}return Na=e,Na}var Oa,Xh;function gC(){if(Xh)return Oa;Xh=1;var e=kr();function t(n){return function(r){return e(r,n)}}return Oa=t,Oa}var Ma,Jh;function vC(){if(Jh)return Ma;Jh=1;var e=bm(),t=gC(),n=ol(),r=Sn();function i(o){return n(o)?e(r(o)):t(o)}return Ma=i,Ma}var Da,Qh;function st(){if(Qh)return Da;Qh=1;var e=aC(),t=hC(),n=Rt(),r=we(),i=vC();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Da=o,Da}var La,$h;function wm(){if($h)return La;$h=1;var e=Jy(),t=XS(),n=st(),r=we();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return La=i,La}var za,eg;function pC(){if(eg)return za;eg=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return za=n,za}var Fa,tg;function xm(){if(tg)return Fa;tg=1;var e=pC(),t=mm();function n(r,i){return r!=null&&t(r,i,e)}return Fa=n,Fa}var Ha,ng;function yC(){if(ng)return Ha;ng=1;var e=Jc(),t=Wt(),n=xn(),r=we(),i=at(),o=Zt(),a=Sr(),s=En(),u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||s(h)||n(h)))return!h.length;var m=t(h);if(m==u||m==l)return!h.size;if(a(h))return!e(h).length;for(var p in h)if(d.call(h,p))return!1;return!0}return Ha=f,Ha}var Ba,rg;function Em(){if(rg)return Ba;rg=1;function e(t){return t===void 0}return Ba=e,Ba}var Va,ig;function Sm(){if(ig)return Va;ig=1;var e=qr(),t=at();function n(r,i){var o=-1,a=t(r)?Array(r.length):[];return e(r,function(s,u,l){a[++o]=i(s,u,l)}),a}return Va=n,Va}var Ga,og;function Cm(){if(og)return Ga;og=1;var e=Rr(),t=st(),n=Sm(),r=we();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return Ga=i,Ga}var Ka,ag;function mC(){if(ag)return Ka;ag=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return Ka=e,Ka}var ja,sg;function _C(){if(sg)return ja;sg=1;function e(t,n,r,i,o){return o(t,function(a,s,u){r=i?(i=!1,a):n(r,a,s,u)}),r}return ja=e,ja}var Ua,ug;function qm(){if(ug)return Ua;ug=1;var e=mC(),t=qr(),n=st(),r=_C(),i=we();function o(a,s,u){var l=i(a)?e:r,c=arguments.length<3;return l(a,n(s,4),u,c,t)}return Ua=o,Ua}var Ya,cg;function bC(){if(cg)return Ya;cg=1;var e=St(),t=we(),n=Qe(),r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return Ya=i,Ya}var Za,lg;function wC(){if(lg)return Za;lg=1;var e=bm(),t=e("length");return Za=t,Za}var Wa,dg;function xC(){if(dg)return Wa;dg=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function u(l){return s.test(l)}return Wa=u,Wa}var Xa,fg;function EC(){if(fg)return Xa;fg=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",m=l+"?",p="["+o+"]?",v="(?:"+h+"(?:"+[c,d,f].join("|")+")"+p+m+")*",y=p+m+v,b="(?:"+[c+s+"?",s,d,f,a].join("|")+")",x=RegExp(u+"(?="+u+")|"+b+y,"g");function _(q){for(var C=x.lastIndex=0;x.test(q);)++C;return C}return Xa=_,Xa}var Ja,hg;function SC(){if(hg)return Ja;hg=1;var e=wC(),t=xC(),n=EC();function r(i){return t(i)?n(i):e(i)}return Ja=r,Ja}var Qa,gg;function CC(){if(gg)return Qa;gg=1;var e=Jc(),t=Wt(),n=at(),r=bC(),i=SC(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var l=t(u);return l==o||l==a?u.size:e(u).length}return Qa=s,Qa}var $a,vg;function qC(){if(vg)return $a;vg=1;var e=Zc(),t=om(),n=rl(),r=st(),i=Cr(),o=we(),a=Zt(),s=bn(),u=Oe(),l=En();function c(d,f,h){var m=o(d),p=m||a(d)||l(d);if(f=r(f,4),h==null){var v=d&&d.constructor;p?h=m?new v:[]:u(d)?h=s(v)?t(i(d)):{}:h={}}return(p?e:n)(d,function(y,b,x){return f(h,y,b,x)}),h}return $a=c,$a}var es,pg;function RC(){if(pg)return es;pg=1;var e=Yt(),t=xn(),n=we(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return es=i,es}var ts,yg;function al(){if(yg)return ts;yg=1;var e=$c(),t=RC();function n(r,i,o,a,s){var u=-1,l=r.length;for(o||(o=t),s||(s=[]);++u<l;){var c=r[u];i>0&&o(c)?i>1?n(c,i-1,o,a,s):e(s,c):a||(s[s.length]=c)}return s}return ts=n,ts}var ns,mg;function AC(){if(mg)return ns;mg=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ns=e,ns}var rs,_g;function Rm(){if(_g)return rs;_g=1;var e=AC(),t=Math.max;function n(r,i,o){return i=t(i===void 0?r.length-1:i,0),function(){for(var a=arguments,s=-1,u=t(a.length-i,0),l=Array(u);++s<u;)l[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(l),e(r,this,c)}}return rs=n,rs}var is,bg;function kC(){if(bg)return is;bg=1;var e=tl(),t=Uy(),n=Rt(),r=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:n;return is=r,is}var os,wg;function IC(){if(wg)return os;wg=1;var e=800,t=16,n=Date.now;function r(i){var o=0,a=0;return function(){var s=n(),u=t-(s-a);if(a=s,u>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return os=r,os}var as,xg;function Am(){if(xg)return as;xg=1;var e=kC(),t=IC(),n=t(e);return as=n,as}var ss,Eg;function Ir(){if(Eg)return ss;Eg=1;var e=Rt(),t=Rm(),n=Am();function r(i,o){return n(t(i,o,e),i+"")}return ss=r,ss}var us,Sg;function km(){if(Sg)return us;Sg=1;function e(t,n,r,i){for(var o=t.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(t[a],a,t))return a;return-1}return us=e,us}var cs,Cg;function TC(){if(Cg)return cs;Cg=1;function e(t){return t!==t}return cs=e,cs}var ls,qg;function PC(){if(qg)return ls;qg=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return ls=e,ls}var ds,Rg;function NC(){if(Rg)return ds;Rg=1;var e=km(),t=TC(),n=PC();function r(i,o,a){return o===o?n(i,o,a):e(i,t,a)}return ds=r,ds}var fs,Ag;function OC(){if(Ag)return fs;Ag=1;var e=NC();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return fs=t,fs}var hs,kg;function MC(){if(kg)return hs;kg=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return hs=e,hs}var gs,Ig;function DC(){if(Ig)return gs;Ig=1;function e(){}return gs=e,gs}var vs,Tg;function LC(){if(Tg)return vs;Tg=1;var e=nm(),t=DC(),n=il(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return vs=i,vs}var ps,Pg;function zC(){if(Pg)return ps;Pg=1;var e=dm(),t=OC(),n=MC(),r=fm(),i=LC(),o=il(),a=200;function s(u,l,c){var d=-1,f=t,h=u.length,m=!0,p=[],v=p;if(c)m=!1,f=n;else if(h>=a){var y=l?null:i(u);if(y)return o(y);m=!1,f=r,v=new e}else v=l?[]:p;e:for(;++d<h;){var b=u[d],x=l?l(b):b;if(b=c||b!==0?b:0,m&&x===x){for(var _=v.length;_--;)if(v[_]===x)continue e;l&&v.push(x),p.push(b)}else f(v,x,c)||(v!==p&&v.push(x),p.push(b))}return p}return ps=s,ps}var ys,Ng;function Im(){if(Ng)return ys;Ng=1;var e=at(),t=Qe();function n(r){return t(r)&&e(r)}return ys=n,ys}var ms,Og;function FC(){if(Og)return ms;Og=1;var e=al(),t=Ir(),n=zC(),r=Im(),i=t(function(o){return n(e(o,1,r,!0))});return ms=i,ms}var _s,Mg;function HC(){if(Mg)return _s;Mg=1;var e=Rr();function t(n,r){return e(r,function(i){return n[i]})}return _s=t,_s}var bs,Dg;function Tm(){if(Dg)return bs;Dg=1;var e=HC(),t=ft();function n(r){return r==null?[]:e(r,t(r))}return bs=n,bs}var ws,Lg;function Me(){if(Lg)return ws;Lg=1;var e;if(typeof jc=="function")try{e={clone:YS(),constant:tl(),each:lm(),filter:wm(),has:xm(),isArray:we(),isEmpty:yC(),isFunction:bn(),isUndefined:Em(),keys:ft(),map:Cm(),reduce:qm(),size:CC(),transform:qC(),union:FC(),values:Tm()}}catch{}return e||(e=window._),ws=e,ws}var xs,zg;function sl(){if(zg)return xs;zg=1;var e=Me();xs=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(m){f.length>1?h.setNode(m,d):h.setNode(m)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,v){c(v)&&d.setNode(v,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var h={};function m(p){var v=f.parent(p);return v===void 0||d.hasNode(v)?(h[p]=v,v):v in h?h[v]:m(v)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,m(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(m,p){return h.length>1?f.setEdge(m,p,d):f.setEdge(m,p),p}),this},i.prototype.setEdge=function(){var c,d,f,h,m=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(h=arguments[1],m=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],m=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var v=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,v))return m&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=m?h:this._defaultEdgeLabelFn(c,d,f);var y=u(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[v]=y,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][v]=y,this._out[c][v]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),m=this._edgeObjs[h];return m&&(c=m.v,d=m.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(m){return m.v===d}):h}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(m){return m.w===d}):h}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,f,h){var m=""+d,p=""+f;if(!c&&m>p){var v=m;m=p,p=v}return m+r+p+r+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var m=""+d,p=""+f;if(!c&&m>p){var v=m;m=p,p=v}var y={v:m,w:p};return h&&(y.name=h),y}function l(c,d){return s(c,d.v,d.w,d.name)}return xs}var Es,Fg;function BC(){return Fg||(Fg=1,Es="2.1.8"),Es}var Ss,Hg;function VC(){return Hg||(Hg=1,Ss={Graph:sl(),version:BC()}),Ss}var Cs,Bg;function GC(){if(Bg)return Cs;Bg=1;var e=Me(),t=sl();Cs={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Cs}var qs,Vg;function KC(){if(Vg)return qs;Vg=1;var e=Me();qs=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return qs}var Rs,Gg;function Pm(){if(Gg)return Rs;Gg=1;var e=Me();Rs=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},Rs}var As,Kg;function Nm(){if(Kg)return As;Kg=1;var e=Me(),t=Pm();As=r;var n=e.constant(1);function r(o,a,s,u){return i(o,String(a),s||n,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new t,d,f,h=function(m){var p=m.v!==d?m.v:m.w,v=l[p],y=s(m),b=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+y);b<v.distance&&(v.distance=b,v.predecessor=d,c.decrease(p,b))};for(o.nodes().forEach(function(m){var p=m===a?0:Number.POSITIVE_INFINITY;l[m]={distance:p},c.add(m,p)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return As}var ks,jg;function jC(){if(jg)return ks;jg=1;var e=Nm(),t=Me();ks=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return ks}var Is,Ug;function Om(){if(Ug)return Is;Ug=1;var e=Me();Is=t;function t(n){var r=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(f){e.has(o,f)?o[f].onStack&&(l.lowlink=Math.min(l.lowlink,o[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,o[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=i.pop(),o[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||s(u)}),a}return Is}var Ts,Yg;function UC(){if(Yg)return Ts;Yg=1;var e=Me(),t=Om();Ts=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Ts}var Ps,Zg;function YC(){if(Zg)return Ps;Zg=1;var e=Me();Ps=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=o(c);s[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var f=s[d];u.forEach(function(h){var m=f[l],p=c[h],v=f[h],y=m.distance+p.distance;y<v.distance&&(v.distance=y,v.predecessor=p.predecessor)})})}),s}return Ps}var Ns,Wg;function Mm(){if(Wg)return Ns;Wg=1;var e=Me();Ns=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(u){if(e.has(o,u))throw new n;e.has(i,u)||(o[u]=!0,i[u]=!0,e.each(r.predecessors(u),s),delete o[u],a.push(u))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Ns}var Os,Xg;function ZC(){if(Xg)return Os;Xg=1;var e=Mm();Os=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Os}var Ms,Jg;function Dm(){if(Jg)return Ms;Jg=1;var e=Me();Ms=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",u,a,s)}),s}function n(r,i,o,a,s,u){e.has(a,i)||(a[i]=!0,o||u.push(i),e.each(s(i),function(l){n(r,l,o,a,s,u)}),o&&u.push(i))}return Ms}var Ds,Qg;function WC(){if(Qg)return Ds;Qg=1;var e=Dm();Ds=t;function t(n,r){return e(n,r,"post")}return Ds}var Ls,$g;function XC(){if($g)return Ls;$g=1;var e=Dm();Ls=t;function t(n,r){return e(n,r,"pre")}return Ls}var zs,ev;function JC(){if(ev)return zs;ev=1;var e=Me(),t=sl(),n=Pm();zs=r;function r(i,o){var a=new t,s={},u=new n,l;function c(f){var h=f.v===l?f.w:f.v,m=u.priority(h);if(m!==void 0){var p=o(f);p<m&&(s[h]=l,u.decrease(h,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(i.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(c)}return a}return zs}var Fs,tv;function QC(){return tv||(tv=1,Fs={components:KC(),dijkstra:Nm(),dijkstraAll:jC(),findCycles:UC(),floydWarshall:YC(),isAcyclic:ZC(),postorder:WC(),preorder:XC(),prim:JC(),tarjan:Om(),topsort:Mm()}),Fs}var Hs,nv;function $C(){if(nv)return Hs;nv=1;var e=VC();return Hs={Graph:e.Graph,json:GC(),alg:QC(),version:e.version},Hs}var Bs,rv;function He(){if(rv)return Bs;rv=1;var e;if(typeof jc=="function")try{e=$C()}catch{}return e||(e=window.graphlib),Bs=e,Bs}var Vs,iv;function eq(){if(iv)return Vs;iv=1;var e=sm(),t=1,n=4;function r(i){return e(i,t|n)}return Vs=r,Vs}var Gs,ov;function Tr(){if(ov)return Gs;ov=1;var e=Ut(),t=at(),n=xr(),r=Oe();function i(o,a,s){if(!r(s))return!1;var u=typeof a;return(u=="number"?t(s)&&n(a,s.length):u=="string"&&a in s)?e(s[a],o):!1}return Gs=i,Gs}var Ks,av;function tq(){if(av)return Ks;av=1;var e=Ir(),t=Ut(),n=Tr(),r=qt(),i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var f=u[l],h=r(f),m=-1,p=h.length;++m<p;){var v=h[m],y=s[v];(y===void 0||t(y,i[v])&&!o.call(s,v))&&(s[v]=f[v])}return s});return Ks=a,Ks}var js,sv;function nq(){if(sv)return js;sv=1;var e=st(),t=at(),n=ft();function r(i){return function(o,a,s){var u=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(u[d],d,u)}}var c=i(o,a,s);return c>-1?u[l?o[c]:c]:void 0}}return js=r,js}var Us,uv;function rq(){if(uv)return Us;uv=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Us=t,Us}var Ys,cv;function iq(){if(cv)return Ys;cv=1;var e=rq(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Ys=n,Ys}var Zs,lv;function oq(){if(lv)return Zs;lv=1;var e=iq(),t=Oe(),n=Xt(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return Zs=u,Zs}var Ws,dv;function Lm(){if(dv)return Ws;dv=1;var e=oq(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return Ws=r,Ws}var Xs,fv;function aq(){if(fv)return Xs;fv=1;var e=Lm();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Xs=t,Xs}var Js,hv;function sq(){if(hv)return Js;hv=1;var e=km(),t=st(),n=aq(),r=Math.max;function i(o,a,s){var u=o==null?0:o.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(o,t(a,3),l)}return Js=i,Js}var Qs,gv;function uq(){if(gv)return Qs;gv=1;var e=nq(),t=sq(),n=e(t);return Qs=n,Qs}var $s,vv;function zm(){if(vv)return $s;vv=1;var e=al();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return $s=t,$s}var eu,pv;function cq(){if(pv)return eu;pv=1;var e=nl(),t=um(),n=qt();function r(i,o){return i==null?i:e(i,t(o),n)}return eu=r,eu}var tu,yv;function lq(){if(yv)return tu;yv=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return tu=e,tu}var nu,mv;function dq(){if(mv)return nu;mv=1;var e=br(),t=rl(),n=st();function r(i,o){var a={};return o=n(o,3),t(i,function(s,u,l){e(a,u,o(s,u,l))}),a}return nu=r,nu}var ru,_v;function ul(){if(_v)return ru;_v=1;var e=Xt();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=s}return c}return ru=t,ru}var iu,bv;function fq(){if(bv)return iu;bv=1;function e(t,n){return t>n}return iu=e,iu}var ou,wv;function hq(){if(wv)return ou;wv=1;var e=ul(),t=fq(),n=Rt();function r(i){return i&&i.length?e(i,n,t):void 0}return ou=r,ou}var au,xv;function Fm(){if(xv)return au;xv=1;var e=br(),t=Ut();function n(r,i,o){(o!==void 0&&!t(r[i],o)||o===void 0&&!(i in r))&&e(r,i,o)}return au=n,au}var su,Ev;function gq(){if(Ev)return su;Ev=1;var e=St(),t=Cr(),n=Qe(),r="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,u=a.call(Object);function l(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==u}return su=l,su}var uu,Sv;function Hm(){if(Sv)return uu;Sv=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return uu=e,uu}var cu,Cv;function vq(){if(Cv)return cu;Cv=1;var e=wn(),t=qt();function n(r){return e(r,t(r))}return cu=n,cu}var lu,qv;function pq(){if(qv)return lu;qv=1;var e=Fm(),t=Wy(),n=im(),r=Xy(),i=am(),o=xn(),a=we(),s=Im(),u=Zt(),l=bn(),c=Oe(),d=gq(),f=En(),h=Hm(),m=vq();function p(v,y,b,x,_,q,C){var A=h(v,b),P=h(y,b),O=C.get(P);if(O){e(v,b,O);return}var D=q?q(A,P,b+"",v,y,C):void 0,S=D===void 0;if(S){var E=a(P),R=!E&&u(P),w=!E&&!R&&f(P);D=P,E||R||w?a(A)?D=A:s(A)?D=r(A):R?(S=!1,D=t(P,!0)):w?(S=!1,D=n(P,!0)):D=[]:d(P)||o(P)?(D=A,o(A)?D=m(A):(!c(A)||l(A))&&(D=i(P))):S=!1}S&&(C.set(P,D),_(D,P,x,q,C),C.delete(P)),e(v,b,D)}return lu=p,lu}var du,Rv;function yq(){if(Rv)return du;Rv=1;var e=_r(),t=Fm(),n=nl(),r=pq(),i=Oe(),o=qt(),a=Hm();function s(u,l,c,d,f){u!==l&&n(l,function(h,m){if(f||(f=new e),i(h))r(u,l,m,c,s,d,f);else{var p=d?d(a(u,m),h,m+"",u,l,f):void 0;p===void 0&&(p=h),t(u,m,p)}},o)}return du=s,du}var fu,Av;function mq(){if(Av)return fu;Av=1;var e=Ir(),t=Tr();function n(r){return e(function(i,o){var a=-1,s=o.length,u=s>1?o[s-1]:void 0,l=s>2?o[2]:void 0;for(u=r.length>3&&typeof u=="function"?(s--,u):void 0,l&&t(o[0],o[1],l)&&(u=s<3?void 0:u,s=1),i=Object(i);++a<s;){var c=o[a];c&&r(i,c,a,u)}return i})}return fu=n,fu}var hu,kv;function _q(){if(kv)return hu;kv=1;var e=yq(),t=mq(),n=t(function(r,i,o){e(r,i,o)});return hu=n,hu}var gu,Iv;function Bm(){if(Iv)return gu;Iv=1;function e(t,n){return t<n}return gu=e,gu}var vu,Tv;function bq(){if(Tv)return vu;Tv=1;var e=ul(),t=Bm(),n=Rt();function r(i){return i&&i.length?e(i,n,t):void 0}return vu=r,vu}var pu,Pv;function wq(){if(Pv)return pu;Pv=1;var e=ul(),t=st(),n=Bm();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return pu=r,pu}var yu,Nv;function xq(){if(Nv)return yu;Nv=1;var e=Ve(),t=function(){return e.Date.now()};return yu=t,yu}var mu,Ov;function Eq(){if(Ov)return mu;Ov=1;var e=wr(),t=Ar(),n=xr(),r=Oe(),i=Sn();function o(a,s,u,l){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,f=d-1,h=a;h!=null&&++c<d;){var m=i(s[c]),p=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return a;if(c!=f){var v=h[m];p=l?l(v,m,h):void 0,p===void 0&&(p=r(v)?v:n(s[c+1])?[]:{})}e(h,m,p),h=h[m]}return a}return mu=o,mu}var _u,Mv;function Sq(){if(Mv)return _u;Mv=1;var e=kr(),t=Eq(),n=Ar();function r(i,o,a){for(var s=-1,u=o.length,l={};++s<u;){var c=o[s],d=e(i,c);a(d,c)&&t(l,n(c,i),d)}return l}return _u=r,_u}var bu,Dv;function Cq(){if(Dv)return bu;Dv=1;var e=Sq(),t=_m();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return bu=n,bu}var wu,Lv;function qq(){if(Lv)return wu;Lv=1;var e=zm(),t=Rm(),n=Am();function r(i){return n(t(i,void 0,e),i+"")}return wu=r,wu}var xu,zv;function Rq(){if(zv)return xu;zv=1;var e=Cq(),t=qq(),n=t(function(r,i){return r==null?{}:e(r,i)});return xu=n,xu}var Eu,Fv;function Aq(){if(Fv)return Eu;Fv=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,u=t(e((i-r)/(o||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=o;return l}return Eu=n,Eu}var Su,Hv;function kq(){if(Hv)return Su;Hv=1;var e=Aq(),t=Tr(),n=Lm();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return Su=r,Su}var Cu,Bv;function Iq(){if(Bv)return Cu;Bv=1;var e=kq(),t=e();return Cu=t,Cu}var qu,Vv;function Tq(){if(Vv)return qu;Vv=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return qu=e,qu}var Ru,Gv;function Pq(){if(Gv)return Ru;Gv=1;var e=Xt();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||o&&u&&c||!i&&c||!a)return 1;if(!o&&!s&&!d&&n<r||d&&i&&a&&!o&&!s||l&&i&&a||!u&&a||!c)return-1}return 0}return Ru=t,Ru}var Au,Kv;function Nq(){if(Kv)return Au;Kv=1;var e=Pq();function t(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,u=a.length,l=i.length;++o<u;){var c=e(a[o],s[o]);if(c){if(o>=l)return c;var d=i[o];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Au=t,Au}var ku,jv;function Oq(){if(jv)return ku;jv=1;var e=Rr(),t=kr(),n=st(),r=Sm(),i=Tq(),o=Er(),a=Nq(),s=Rt(),u=we();function l(c,d,f){d.length?d=e(d,function(p){return u(p)?function(v){return t(v,p.length===1?p[0]:p)}:p}):d=[s];var h=-1;d=e(d,o(n));var m=r(c,function(p,v,y){var b=e(d,function(x){return x(p)});return{criteria:b,index:++h,value:p}});return i(m,function(p,v){return a(p,v,f)})}return ku=l,ku}var Iu,Uv;function Mq(){if(Uv)return Iu;Uv=1;var e=al(),t=Oq(),n=Ir(),r=Tr(),i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return Iu=i,Iu}var Tu,Yv;function Dq(){if(Yv)return Tu;Yv=1;var e=ym(),t=0;function n(r){var i=++t;return e(r)+i}return Tu=n,Tu}var Pu,Zv;function Lq(){if(Zv)return Pu;Zv=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var u=i<a?n[i]:void 0;r(s,t[i],u)}return s}return Pu=e,Pu}var Nu,Wv;function zq(){if(Wv)return Nu;Wv=1;var e=wr(),t=Lq();function n(r,i){return t(r||[],i||[],e)}return Nu=n,Nu}var Ou,Xv;function ve(){if(Xv)return Ou;Xv=1;var e;if(typeof jc=="function")try{e={cloneDeep:eq(),constant:tl(),defaults:tq(),each:lm(),filter:wm(),find:uq(),flatten:zm(),forEach:cm(),forIn:cq(),has:xm(),isUndefined:Em(),last:lq(),map:Cm(),mapValues:dq(),max:hq(),merge:_q(),min:bq(),minBy:wq(),now:xq(),pick:Rq(),range:Iq(),reduce:qm(),sortBy:Mq(),uniqueId:Dq(),values:Tm(),zipObject:zq()}}catch{}return e||(e=window._),Ou=e,Ou}var Mu,Jv;function Fq(){if(Jv)return Mu;Jv=1,Mu=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,o=i._prev;o!==i;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Mu}var Du,Qv;function Hq(){if(Qv)return Du;Qv=1;var e=ve(),t=He().Graph,n=Fq();Du=i;var r=e.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var d=s(l,c||r),f=o(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function o(l,c,d){for(var f=[],h=c[c.length-1],m=c[0],p;l.nodeCount();){for(;p=m.dequeue();)a(l,c,d,p);for(;p=h.dequeue();)a(l,c,d,p);if(l.nodeCount()){for(var v=c.length-2;v>0;--v)if(p=c[v].dequeue(),p){f=f.concat(a(l,c,d,p,!0));break}}}return f}function a(l,c,d,f,h){var m=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(p){var v=l.edge(p),y=l.node(p.v);h&&m.push({v:p.v,w:p.w}),y.out-=v,u(c,d,y)}),e.forEach(l.outEdges(f.v),function(p){var v=l.edge(p),y=p.w,b=l.node(y);b.in-=v,u(c,d,b)}),l.removeNode(f.v),m}function s(l,c){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(v){d.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var y=d.edge(v.v,v.w)||0,b=c(v),x=y+b;d.setEdge(v.v,v.w,x),h=Math.max(h,d.node(v.v).out+=b),f=Math.max(f,d.node(v.w).in+=b)});var m=e.range(h+f+3).map(function(){return new n}),p=f+1;return e.forEach(d.nodes(),function(v){u(m,p,d.node(v))}),{graph:d,buckets:m,zeroIdx:p}}function u(l,c,d){d.out?d.in?l[d.out-d.in+c].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return Du}var Lu,$v;function Bq(){if($v)return Lu;$v=1;var e=ve(),t=Hq();Lu={run:n,undo:i};function n(o){var a=o.graph().acyclicer==="greedy"?t(o,s(o)):r(o);e.forEach(a,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function r(o){var a=[],s={},u={};function l(c){e.has(u,c)||(u[c]=!0,s[c]=!0,e.forEach(o.outEdges(c),function(d){e.has(s,d.w)?a.push(d):l(d.w)}),delete s[c])}return e.forEach(o.nodes(),l),a}function i(o){e.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,u)}})}return Lu}var zu,ep;function Ae(){if(ep)return zu;ep=1;var e=ve(),t=He().Graph;zu={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:d,maxRank:f,partition:h,time:m,notime:p};function n(v,y,b,x){var _;do _=e.uniqueId(x);while(v.hasNode(_));return b.dummy=y,v.setNode(_,b),_}function r(v){var y=new t().setGraph(v.graph());return e.forEach(v.nodes(),function(b){y.setNode(b,v.node(b))}),e.forEach(v.edges(),function(b){var x=y.edge(b.v,b.w)||{weight:0,minlen:1},_=v.edge(b);y.setEdge(b.v,b.w,{weight:x.weight+_.weight,minlen:Math.max(x.minlen,_.minlen)})}),y}function i(v){var y=new t({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(b){v.children(b).length||y.setNode(b,v.node(b))}),e.forEach(v.edges(),function(b){y.setEdge(b,v.edge(b))}),y}function o(v){var y=e.map(v.nodes(),function(b){var x={};return e.forEach(v.outEdges(b),function(_){x[_.w]=(x[_.w]||0)+v.edge(_).weight}),x});return e.zipObject(v.nodes(),y)}function a(v){var y=e.map(v.nodes(),function(b){var x={};return e.forEach(v.inEdges(b),function(_){x[_.v]=(x[_.v]||0)+v.edge(_).weight}),x});return e.zipObject(v.nodes(),y)}function s(v,y){var b=v.x,x=v.y,_=y.x-b,q=y.y-x,C=v.width/2,A=v.height/2;if(!_&&!q)throw new Error("Not possible to find intersection inside of the rectangle");var P,O;return Math.abs(q)*C>Math.abs(_)*A?(q<0&&(A=-A),P=A*_/q,O=A):(_<0&&(C=-C),P=C,O=C*q/_),{x:b+P,y:x+O}}function u(v){var y=e.map(e.range(f(v)+1),function(){return[]});return e.forEach(v.nodes(),function(b){var x=v.node(b),_=x.rank;e.isUndefined(_)||(y[_][x.order]=b)}),y}function l(v){var y=e.min(e.map(v.nodes(),function(b){return v.node(b).rank}));e.forEach(v.nodes(),function(b){var x=v.node(b);e.has(x,"rank")&&(x.rank-=y)})}function c(v){var y=e.min(e.map(v.nodes(),function(q){return v.node(q).rank})),b=[];e.forEach(v.nodes(),function(q){var C=v.node(q).rank-y;b[C]||(b[C]=[]),b[C].push(q)});var x=0,_=v.graph().nodeRankFactor;e.forEach(b,function(q,C){e.isUndefined(q)&&C%_!==0?--x:x&&e.forEach(q,function(A){v.node(A).rank+=x})})}function d(v,y,b,x){var _={width:0,height:0};return arguments.length>=4&&(_.rank=b,_.order=x),n(v,"border",_,y)}function f(v){return e.max(e.map(v.nodes(),function(y){var b=v.node(y).rank;if(!e.isUndefined(b))return b}))}function h(v,y){var b={lhs:[],rhs:[]};return e.forEach(v,function(x){y(x)?b.lhs.push(x):b.rhs.push(x)}),b}function m(v,y){var b=e.now();try{return y()}finally{console.log(v+" time: "+(e.now()-b)+"ms")}}function p(v,y){return y()}return zu}var Fu,tp;function Vq(){if(tp)return Fu;tp=1;var e=ve(),t=Ae();Fu={run:n,undo:i};function n(o){o.graph().dummyChains=[],e.forEach(o.edges(),function(a){r(o,a)})}function r(o,a){var s=a.v,u=o.node(s).rank,l=a.w,c=o.node(l).rank,d=a.name,f=o.edge(a),h=f.labelRank;if(c!==u+1){o.removeEdge(a);var m,p,v;for(v=0,++u;u<c;++v,++u)f.points=[],p={width:0,height:0,edgeLabel:f,edgeObj:a,rank:u},m=t.addDummyNode(o,"edge",p,"_d"),u===h&&(p.width=f.width,p.height=f.height,p.dummy="edge-label",p.labelpos=f.labelpos),o.setEdge(s,m,{weight:f.weight},d),v===0&&o.graph().dummyChains.push(m),s=m;o.setEdge(s,l,{weight:f.weight},d)}}function i(o){e.forEach(o.graph().dummyChains,function(a){var s=o.node(a),u=s.edgeLabel,l;for(o.setEdge(s.edgeObj,u);s.dummy;)l=o.successors(a)[0],o.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=o.node(a)})}return Fu}var Hu,np;function tr(){if(np)return Hu;np=1;var e=ve();Hu={longestPath:t,slack:n};function t(r){var i={};function o(a){var s=r.node(a);if(e.has(i,a))return s.rank;i[a]=!0;var u=e.min(e.map(r.outEdges(a),function(l){return o(l.w)-r.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}e.forEach(r.sources(),o)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Hu}var Bu,rp;function Vm(){if(rp)return Bu;rp=1;var e=ve(),t=He().Graph,n=tr().slack;Bu=r;function r(s){var u=new t({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var d,f;i(u,s)<c;)d=o(u,s),f=u.hasNode(d.v)?n(s,d):-n(s,d),a(u,s,f);return u}function i(s,u){function l(c){e.forEach(u.nodeEdges(c),function(d){var f=d.v,h=c===f?d.w:f;!s.hasNode(h)&&!n(u,d)&&(s.setNode(h,{}),s.setEdge(c,h,{}),l(h))})}return e.forEach(s.nodes(),l),s.nodeCount()}function o(s,u){return e.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return n(u,l)})}function a(s,u,l){e.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return Bu}var Vu,ip;function Gq(){if(ip)return Vu;ip=1;var e=ve(),t=Vm(),n=tr().slack,r=tr().longestPath,i=He().alg.preorder,o=He().alg.postorder,a=Ae().simplify;Vu=s,s.initLowLimValues=d,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=m,s.exchangeEdges=p;function s(x){x=a(x),r(x);var _=t(x);d(_),u(_,x);for(var q,C;q=h(_);)C=m(_,x,q),p(_,x,q,C)}function u(x,_){var q=o(x,x.nodes());q=q.slice(0,q.length-1),e.forEach(q,function(C){l(x,_,C)})}function l(x,_,q){var C=x.node(q),A=C.parent;x.edge(q,A).cutvalue=c(x,_,q)}function c(x,_,q){var C=x.node(q),A=C.parent,P=!0,O=_.edge(q,A),D=0;return O||(P=!1,O=_.edge(A,q)),D=O.weight,e.forEach(_.nodeEdges(q),function(S){var E=S.v===q,R=E?S.w:S.v;if(R!==A){var w=E===P,k=_.edge(S).weight;if(D+=w?k:-k,y(x,q,R)){var T=x.edge(q,R).cutvalue;D+=w?-T:T}}}),D}function d(x,_){arguments.length<2&&(_=x.nodes()[0]),f(x,{},1,_)}function f(x,_,q,C,A){var P=q,O=x.node(C);return _[C]=!0,e.forEach(x.neighbors(C),function(D){e.has(_,D)||(q=f(x,_,q,D,C))}),O.low=P,O.lim=q++,A?O.parent=A:delete O.parent,q}function h(x){return e.find(x.edges(),function(_){return x.edge(_).cutvalue<0})}function m(x,_,q){var C=q.v,A=q.w;_.hasEdge(C,A)||(C=q.w,A=q.v);var P=x.node(C),O=x.node(A),D=P,S=!1;P.lim>O.lim&&(D=O,S=!0);var E=e.filter(_.edges(),function(R){return S===b(x,x.node(R.v),D)&&S!==b(x,x.node(R.w),D)});return e.minBy(E,function(R){return n(_,R)})}function p(x,_,q,C){var A=q.v,P=q.w;x.removeEdge(A,P),x.setEdge(C.v,C.w,{}),d(x),u(x,_),v(x,_)}function v(x,_){var q=e.find(x.nodes(),function(A){return!_.node(A).parent}),C=i(x,q);C=C.slice(1),e.forEach(C,function(A){var P=x.node(A).parent,O=_.edge(A,P),D=!1;O||(O=_.edge(P,A),D=!0),_.node(A).rank=_.node(P).rank+(D?O.minlen:-O.minlen)})}function y(x,_,q){return x.hasEdge(_,q)}function b(x,_,q){return q.low<=_.lim&&_.lim<=q.lim}return Vu}var Gu,op;function Kq(){if(op)return Gu;op=1;var e=tr(),t=e.longestPath,n=Vm(),r=Gq();Gu=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":o(u);break;default:s(u)}}var o=t;function a(u){t(u),n(u)}function s(u){r(u)}return Gu}var Ku,ap;function jq(){if(ap)return Ku;ap=1;var e=ve();Ku=t;function t(i){var o=r(i);e.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),u=s.edgeObj,l=n(i,o,u.v,u.w),c=l.path,d=l.lca,f=0,h=c[f],m=!0;a!==u.w;){if(s=i.node(a),m){for(;(h=c[f])!==d&&i.node(h).maxRank<s.rank;)f++;h===d&&(m=!1)}if(!m){for(;f<c.length-1&&i.node(h=c[f+1]).minRank<=s.rank;)f++;h=c[f]}i.setParent(a,h),a=i.successors(a)[0]}})}function n(i,o,a,s){var u=[],l=[],c=Math.min(o[a].low,o[s].low),d=Math.max(o[a].lim,o[s].lim),f,h;f=a;do f=i.parent(f),u.push(f);while(f&&(o[f].low>c||d>o[f].lim));for(h=f,f=s;(f=i.parent(f))!==h;)l.push(f);return{path:u.concat(l.reverse()),lca:h}}function r(i){var o={},a=0;function s(u){var l=a;e.forEach(i.children(u),s),o[u]={low:l,lim:a++}}return e.forEach(i.children(),s),o}return Ku}var ju,sp;function Uq(){if(sp)return ju;sp=1;var e=ve(),t=Ae();ju={run:n,cleanup:a};function n(s){var u=t.addDummyNode(s,"root",{},"_root"),l=i(s),c=e.max(e.values(l))-1,d=2*c+1;s.graph().nestingRoot=u,e.forEach(s.edges(),function(h){s.edge(h).minlen*=d});var f=o(s)+1;e.forEach(s.children(),function(h){r(s,u,d,f,c,l,h)}),s.graph().nodeRankFactor=d}function r(s,u,l,c,d,f,h){var m=s.children(h);if(!m.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:l});return}var p=t.addBorderNode(s,"_bt"),v=t.addBorderNode(s,"_bb"),y=s.node(h);s.setParent(p,h),y.borderTop=p,s.setParent(v,h),y.borderBottom=v,e.forEach(m,function(b){r(s,u,l,c,d,f,b);var x=s.node(b),_=x.borderTop?x.borderTop:b,q=x.borderBottom?x.borderBottom:b,C=x.borderTop?c:2*c,A=_!==q?1:d-f[h]+1;s.setEdge(p,_,{weight:C,minlen:A,nestingEdge:!0}),s.setEdge(q,v,{weight:C,minlen:A,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,p,{weight:0,minlen:d+f[h]})}function i(s){var u={};function l(c,d){var f=s.children(c);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),u[c]=d}return e.forEach(s.children(),function(c){l(c,1)}),u}function o(s){return e.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return ju}var Uu,up;function Yq(){if(up)return Uu;up=1;var e=ve(),t=Ae();Uu=n;function n(i){function o(a){var s=i.children(a),u=i.node(a);if(s.length&&e.forEach(s,o),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)r(i,"borderLeft","_bl",a,u,l),r(i,"borderRight","_br",a,u,l)}}e.forEach(i.children(),o)}function r(i,o,a,s,u,l){var c={width:0,height:0,rank:l,borderType:o},d=u[o][l-1],f=t.addDummyNode(i,"border",c,a);u[o][l]=f,i.setParent(f,s),d&&i.setEdge(d,f,{weight:1})}return Uu}var Yu,cp;function Zq(){if(cp)return Yu;cp=1;var e=ve();Yu={adjust:t,undo:n};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(l)}function n(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(s(l),r(l))}function r(l){e.forEach(l.nodes(),function(c){i(l.node(c))}),e.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function o(l){e.forEach(l.nodes(),function(c){a(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,a),e.has(d,"y")&&a(d)})}function a(l){l.y=-l.y}function s(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,u),e.has(d,"x")&&u(d)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Yu}var Zu,lp;function Wq(){if(lp)return Zu;lp=1;var e=ve();Zu=t;function t(n){var r={},i=e.filter(n.nodes(),function(l){return!n.children(l).length}),o=e.max(e.map(i,function(l){return n.node(l).rank})),a=e.map(e.range(o+1),function(){return[]});function s(l){if(!e.has(r,l)){r[l]=!0;var c=n.node(l);a[c.rank].push(l),e.forEach(n.successors(l),s)}}var u=e.sortBy(i,function(l){return n.node(l).rank});return e.forEach(u,s),a}return Zu}var Wu,dp;function Xq(){if(dp)return Wu;dp=1;var e=ve();Wu=t;function t(r,i){for(var o=0,a=1;a<i.length;++a)o+=n(r,i[a-1],i[a]);return o}function n(r,i,o){for(var a=e.zipObject(o,e.map(o,function(f,h){return h})),s=e.flatten(e.map(i,function(f){return e.sortBy(e.map(r.outEdges(f),function(h){return{pos:a[h.w],weight:r.edge(h).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(s.forEach(function(f){var h=f.pos+u;c[h]+=f.weight;for(var m=0;h>0;)h%2&&(m+=c[h+1]),h=h-1>>1,c[h]+=f.weight;d+=f.weight*m})),d}return Wu}var Xu,fp;function Jq(){if(fp)return Xu;fp=1;var e=ve();Xu=t;function t(n,r){return e.map(r,function(i){var o=n.inEdges(i);if(o.length){var a=e.reduce(o,function(s,u){var l=n.edge(u),c=n.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return Xu}var Ju,hp;function Qq(){if(hp)return Ju;hp=1;var e=ve();Ju=t;function t(i,o){var a={};e.forEach(i,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(o.edges(),function(u){var l=a[u.v],c=a[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=e.filter(a,function(u){return!u.indegree});return n(s)}function n(i){var o=[];function a(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&r(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();o.push(u),e.forEach(u.in.reverse(),a(u)),e.forEach(u.out,s(u))}return e.map(e.filter(o,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function r(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return Ju}var Qu,gp;function $q(){if(gp)return Qu;gp=1;var e=ve(),t=Ae();Qu=n;function n(o,a){var s=t.partition(o,function(p){return e.has(p,"barycenter")}),u=s.lhs,l=e.sortBy(s.rhs,function(p){return-p.i}),c=[],d=0,f=0,h=0;u.sort(i(!!a)),h=r(c,l,h),e.forEach(u,function(p){h+=p.vs.length,c.push(p.vs),d+=p.barycenter*p.weight,f+=p.weight,h=r(c,l,h)});var m={vs:e.flatten(c,!0)};return f&&(m.barycenter=d/f,m.weight=f),m}function r(o,a,s){for(var u;a.length&&(u=e.last(a)).i<=s;)a.pop(),o.push(u.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return Qu}var $u,vp;function eR(){if(vp)return $u;vp=1;var e=ve(),t=Jq(),n=Qq(),r=$q();$u=i;function i(s,u,l,c){var d=s.children(u),f=s.node(u),h=f?f.borderLeft:void 0,m=f?f.borderRight:void 0,p={};h&&(d=e.filter(d,function(q){return q!==h&&q!==m}));var v=t(s,d);e.forEach(v,function(q){if(s.children(q.v).length){var C=i(s,q.v,l,c);p[q.v]=C,e.has(C,"barycenter")&&a(q,C)}});var y=n(v,l);o(y,p);var b=r(y,c);if(h&&(b.vs=e.flatten([h,b.vs,m],!0),s.predecessors(h).length)){var x=s.node(s.predecessors(h)[0]),_=s.node(s.predecessors(m)[0]);e.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+x.order+_.order)/(b.weight+2),b.weight+=2}return b}function o(s,u){e.forEach(s,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){e.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return $u}var ec,pp;function tR(){if(pp)return ec;pp=1;var e=ve(),t=He().Graph;ec=n;function n(i,o,a){var s=r(i),u=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var c=i.node(l),d=i.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,d||s),e.forEach(i[a](l),function(f){var h=f.v===l?f.w:f.v,m=u.edge(h,l),p=e.isUndefined(m)?0:m.weight;u.setEdge(h,l,{weight:i.edge(f).weight+p})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function r(i){for(var o;i.hasNode(o=e.uniqueId("_root")););return o}return ec}var tc,yp;function nR(){if(yp)return tc;yp=1;var e=ve();tc=t;function t(n,r,i){var o={},a;e.forEach(i,function(s){for(var u=n.parent(s),l,c;u;){if(l=n.parent(u),l?(c=o[l],o[l]=u):(c=a,a=u),c&&c!==u){r.setEdge(c,u);return}u=l}})}return tc}var nc,mp;function rR(){if(mp)return nc;mp=1;var e=ve(),t=Wq(),n=Xq(),r=eR(),i=tR(),o=nR(),a=He().Graph,s=Ae();nc=u;function u(f){var h=s.maxRank(f),m=l(f,e.range(1,h+1),"inEdges"),p=l(f,e.range(h-1,-1,-1),"outEdges"),v=t(f);d(f,v);for(var y=Number.POSITIVE_INFINITY,b,x=0,_=0;_<4;++x,++_){c(x%2?m:p,x%4>=2),v=s.buildLayerMatrix(f);var q=n(f,v);q<y&&(_=0,b=e.cloneDeep(v),y=q)}d(f,b)}function l(f,h,m){return e.map(h,function(p){return i(f,p,m)})}function c(f,h){var m=new a;e.forEach(f,function(p){var v=p.graph().root,y=r(p,v,m,h);e.forEach(y.vs,function(b,x){p.node(b).order=x}),o(p,m,y.vs)})}function d(f,h){e.forEach(h,function(m){e.forEach(m,function(p,v){f.node(p).order=v})})}return nc}var rc,_p;function iR(){if(_p)return rc;_p=1;var e=ve(),t=He().Graph,n=Ae();rc={positionX:m,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function r(y,b){var x={};function _(q,C){var A=0,P=0,O=q.length,D=e.last(C);return e.forEach(C,function(S,E){var R=o(y,S),w=R?y.node(R).order:O;(R||S===D)&&(e.forEach(C.slice(P,E+1),function(k){e.forEach(y.predecessors(k),function(T){var z=y.node(T),B=z.order;(B<A||w<B)&&!(z.dummy&&y.node(k).dummy)&&a(x,T,k)})}),P=E+1,A=w)}),C}return e.reduce(b,_),x}function i(y,b){var x={};function _(C,A,P,O,D){var S;e.forEach(e.range(A,P),function(E){S=C[E],y.node(S).dummy&&e.forEach(y.predecessors(S),function(R){var w=y.node(R);w.dummy&&(w.order<O||w.order>D)&&a(x,R,S)})})}function q(C,A){var P=-1,O,D=0;return e.forEach(A,function(S,E){if(y.node(S).dummy==="border"){var R=y.predecessors(S);R.length&&(O=y.node(R[0]).order,_(A,D,E,P,O),D=E,P=O)}_(A,D,A.length,O,C.length)}),A}return e.reduce(b,q),x}function o(y,b){if(y.node(b).dummy)return e.find(y.predecessors(b),function(x){return y.node(x).dummy})}function a(y,b,x){if(b>x){var _=b;b=x,x=_}var q=y[b];q||(y[b]=q={}),q[x]=!0}function s(y,b,x){if(b>x){var _=b;b=x,x=_}return e.has(y[b],x)}function u(y,b,x,_){var q={},C={},A={};return e.forEach(b,function(P){e.forEach(P,function(O,D){q[O]=O,C[O]=O,A[O]=D})}),e.forEach(b,function(P){var O=-1;e.forEach(P,function(D){var S=_(D);if(S.length){S=e.sortBy(S,function(T){return A[T]});for(var E=(S.length-1)/2,R=Math.floor(E),w=Math.ceil(E);R<=w;++R){var k=S[R];C[D]===D&&O<A[k]&&!s(x,D,k)&&(C[k]=D,C[D]=q[D]=q[k],O=A[k])}}})}),{root:q,align:C}}function l(y,b,x,_,q){var C={},A=c(y,b,x,q),P=q?"borderLeft":"borderRight";function O(E,R){for(var w=A.nodes(),k=w.pop(),T={};k;)T[k]?E(k):(T[k]=!0,w.push(k),w=w.concat(R(k))),k=w.pop()}function D(E){C[E]=A.inEdges(E).reduce(function(R,w){return Math.max(R,C[w.v]+A.edge(w))},0)}function S(E){var R=A.outEdges(E).reduce(function(k,T){return Math.min(k,C[T.w]-A.edge(T))},Number.POSITIVE_INFINITY),w=y.node(E);R!==Number.POSITIVE_INFINITY&&w.borderType!==P&&(C[E]=Math.max(C[E],R))}return O(D,A.predecessors.bind(A)),O(S,A.successors.bind(A)),e.forEach(_,function(E){C[E]=C[x[E]]}),C}function c(y,b,x,_){var q=new t,C=y.graph(),A=p(C.nodesep,C.edgesep,_);return e.forEach(b,function(P){var O;e.forEach(P,function(D){var S=x[D];if(q.setNode(S),O){var E=x[O],R=q.edge(E,S);q.setEdge(E,S,Math.max(A(y,D,O),R||0))}O=D})}),q}function d(y,b){return e.minBy(e.values(b),function(x){var _=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY;return e.forIn(x,function(C,A){var P=v(y,A)/2;_=Math.max(C+P,_),q=Math.min(C-P,q)}),_-q})}function f(y,b){var x=e.values(b),_=e.min(x),q=e.max(x);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(A){var P=C+A,O=y[P],D;if(O!==b){var S=e.values(O);D=A==="l"?_-e.min(S):q-e.max(S),D&&(y[P]=e.mapValues(O,function(E){return E+D}))}})})}function h(y,b){return e.mapValues(y.ul,function(x,_){if(b)return y[b.toLowerCase()][_];var q=e.sortBy(e.map(y,_));return(q[1]+q[2])/2})}function m(y){var b=n.buildLayerMatrix(y),x=e.merge(r(y,b),i(y,b)),_={},q;e.forEach(["u","d"],function(A){q=A==="u"?b:e.values(b).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(q=e.map(q,function(E){return e.values(E).reverse()}));var O=(A==="u"?y.predecessors:y.successors).bind(y),D=u(y,q,x,O),S=l(y,q,D.root,D.align,P==="r");P==="r"&&(S=e.mapValues(S,function(E){return-E})),_[A+P]=S})});var C=d(y,_);return f(_,C),h(_,y.graph().align)}function p(y,b,x){return function(_,q,C){var A=_.node(q),P=_.node(C),O=0,D;if(O+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":D=-A.width/2;break;case"r":D=A.width/2;break}if(D&&(O+=x?D:-D),D=0,O+=(A.dummy?b:y)/2,O+=(P.dummy?b:y)/2,O+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":D=P.width/2;break;case"r":D=-P.width/2;break}return D&&(O+=x?D:-D),D=0,O}}function v(y,b){return y.node(b).width}return rc}var ic,bp;function oR(){if(bp)return ic;bp=1;var e=ve(),t=Ae(),n=iR().positionX;ic=r;function r(o){o=t.asNonCompoundGraph(o),i(o),e.forEach(n(o),function(a,s){o.node(s).x=a})}function i(o){var a=t.buildLayerMatrix(o),s=o.graph().ranksep,u=0;e.forEach(a,function(l){var c=e.max(e.map(l,function(d){return o.node(d).height}));e.forEach(l,function(d){o.node(d).y=u+c/2}),u+=c+s})}return ic}var oc,wp;function aR(){if(wp)return oc;wp=1;var e=ve(),t=Bq(),n=Vq(),r=Kq(),i=Ae().normalizeRanks,o=jq(),a=Ae().removeEmptyRanks,s=Uq(),u=Yq(),l=Zq(),c=rR(),d=oR(),f=Ae(),h=He().Graph;oc=m;function m(N,L){var M=L&&L.debugTiming?f.time:f.notime;M("layout",function(){var F=M("  buildLayoutGraph",function(){return O(N)});M("  runLayout",function(){p(F,M)}),M("  updateInputGraph",function(){v(N,F)})})}function p(N,L){L("    makeSpaceForEdgeLabels",function(){D(N)}),L("    removeSelfEdges",function(){H(N)}),L("    acyclic",function(){t.run(N)}),L("    nestingGraph.run",function(){s.run(N)}),L("    rank",function(){r(f.asNonCompoundGraph(N))}),L("    injectEdgeLabelProxies",function(){S(N)}),L("    removeEmptyRanks",function(){a(N)}),L("    nestingGraph.cleanup",function(){s.cleanup(N)}),L("    normalizeRanks",function(){i(N)}),L("    assignRankMinMax",function(){E(N)}),L("    removeEdgeLabelProxies",function(){R(N)}),L("    normalize.run",function(){n.run(N)}),L("    parentDummyChains",function(){o(N)}),L("    addBorderSegments",function(){u(N)}),L("    order",function(){c(N)}),L("    insertSelfEdges",function(){V(N)}),L("    adjustCoordinateSystem",function(){l.adjust(N)}),L("    position",function(){d(N)}),L("    positionSelfEdges",function(){G(N)}),L("    removeBorderNodes",function(){B(N)}),L("    normalize.undo",function(){n.undo(N)}),L("    fixupEdgeLabelCoords",function(){T(N)}),L("    undoCoordinateSystem",function(){l.undo(N)}),L("    translateGraph",function(){w(N)}),L("    assignNodeIntersects",function(){k(N)}),L("    reversePoints",function(){z(N)}),L("    acyclic.undo",function(){t.undo(N)})}function v(N,L){e.forEach(N.nodes(),function(M){var F=N.node(M),K=L.node(M);F&&(F.x=K.x,F.y=K.y,L.children(M).length&&(F.width=K.width,F.height=K.height))}),e.forEach(N.edges(),function(M){var F=N.edge(M),K=L.edge(M);F.points=K.points,e.has(K,"x")&&(F.x=K.x,F.y=K.y)}),N.graph().width=L.graph().width,N.graph().height=L.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],_=["width","height"],q={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function O(N){var L=new h({multigraph:!0,compound:!0}),M=Z(N.graph());return L.setGraph(e.merge({},b,Y(M,y),e.pick(M,x))),e.forEach(N.nodes(),function(F){var K=Z(N.node(F));L.setNode(F,e.defaults(Y(K,_),q)),L.setParent(F,N.parent(F))}),e.forEach(N.edges(),function(F){var K=Z(N.edge(F));L.setEdge(F,e.merge({},A,Y(K,C),e.pick(K,P)))}),L}function D(N){var L=N.graph();L.ranksep/=2,e.forEach(N.edges(),function(M){var F=N.edge(M);F.minlen*=2,F.labelpos.toLowerCase()!=="c"&&(L.rankdir==="TB"||L.rankdir==="BT"?F.width+=F.labeloffset:F.height+=F.labeloffset)})}function S(N){e.forEach(N.edges(),function(L){var M=N.edge(L);if(M.width&&M.height){var F=N.node(L.v),K=N.node(L.w),X={rank:(K.rank-F.rank)/2+F.rank,e:L};f.addDummyNode(N,"edge-proxy",X,"_ep")}})}function E(N){var L=0;e.forEach(N.nodes(),function(M){var F=N.node(M);F.borderTop&&(F.minRank=N.node(F.borderTop).rank,F.maxRank=N.node(F.borderBottom).rank,L=e.max(L,F.maxRank))}),N.graph().maxRank=L}function R(N){e.forEach(N.nodes(),function(L){var M=N.node(L);M.dummy==="edge-proxy"&&(N.edge(M.e).labelRank=M.rank,N.removeNode(L))})}function w(N){var L=Number.POSITIVE_INFINITY,M=0,F=Number.POSITIVE_INFINITY,K=0,X=N.graph(),$=X.marginx||0,Q=X.marginy||0;function fe(ne){var de=ne.x,ee=ne.y,ke=ne.width,te=ne.height;L=Math.min(L,de-ke/2),M=Math.max(M,de+ke/2),F=Math.min(F,ee-te/2),K=Math.max(K,ee+te/2)}e.forEach(N.nodes(),function(ne){fe(N.node(ne))}),e.forEach(N.edges(),function(ne){var de=N.edge(ne);e.has(de,"x")&&fe(de)}),L-=$,F-=Q,e.forEach(N.nodes(),function(ne){var de=N.node(ne);de.x-=L,de.y-=F}),e.forEach(N.edges(),function(ne){var de=N.edge(ne);e.forEach(de.points,function(ee){ee.x-=L,ee.y-=F}),e.has(de,"x")&&(de.x-=L),e.has(de,"y")&&(de.y-=F)}),X.width=M-L+$,X.height=K-F+Q}function k(N){e.forEach(N.edges(),function(L){var M=N.edge(L),F=N.node(L.v),K=N.node(L.w),X,$;M.points?(X=M.points[0],$=M.points[M.points.length-1]):(M.points=[],X=K,$=F),M.points.unshift(f.intersectRect(F,X)),M.points.push(f.intersectRect(K,$))})}function T(N){e.forEach(N.edges(),function(L){var M=N.edge(L);if(e.has(M,"x"))switch((M.labelpos==="l"||M.labelpos==="r")&&(M.width-=M.labeloffset),M.labelpos){case"l":M.x-=M.width/2+M.labeloffset;break;case"r":M.x+=M.width/2+M.labeloffset;break}})}function z(N){e.forEach(N.edges(),function(L){var M=N.edge(L);M.reversed&&M.points.reverse()})}function B(N){e.forEach(N.nodes(),function(L){if(N.children(L).length){var M=N.node(L),F=N.node(M.borderTop),K=N.node(M.borderBottom),X=N.node(e.last(M.borderLeft)),$=N.node(e.last(M.borderRight));M.width=Math.abs($.x-X.x),M.height=Math.abs(K.y-F.y),M.x=X.x+M.width/2,M.y=F.y+M.height/2}}),e.forEach(N.nodes(),function(L){N.node(L).dummy==="border"&&N.removeNode(L)})}function H(N){e.forEach(N.edges(),function(L){if(L.v===L.w){var M=N.node(L.v);M.selfEdges||(M.selfEdges=[]),M.selfEdges.push({e:L,label:N.edge(L)}),N.removeEdge(L)}})}function V(N){var L=f.buildLayerMatrix(N);e.forEach(L,function(M){var F=0;e.forEach(M,function(K,X){var $=N.node(K);$.order=X+F,e.forEach($.selfEdges,function(Q){f.addDummyNode(N,"selfedge",{width:Q.label.width,height:Q.label.height,rank:$.rank,order:X+ ++F,e:Q.e,label:Q.label},"_se")}),delete $.selfEdges})})}function G(N){e.forEach(N.nodes(),function(L){var M=N.node(L);if(M.dummy==="selfedge"){var F=N.node(M.e.v),K=F.x+F.width/2,X=F.y,$=M.x-K,Q=F.height/2;N.setEdge(M.e,M.label),N.removeNode(L),M.label.points=[{x:K+2*$/3,y:X-Q},{x:K+5*$/6,y:X-Q},{x:K+$,y:X},{x:K+5*$/6,y:X+Q},{x:K+2*$/3,y:X+Q}],M.label.x=M.x,M.label.y=M.y}})}function Y(N,L){return e.mapValues(e.pick(N,L),Number)}function Z(N){var L={};return e.forEach(N,function(M,F){L[F.toLowerCase()]=M}),L}return oc}var ac,xp;function sR(){if(xp)return ac;xp=1;var e=ve(),t=Ae(),n=He().Graph;ac={debugOrdering:r};function r(i){var o=t.buildLayerMatrix(i),a=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),e.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(o,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),e.reduce(s,function(c,d){return a.setEdge(c,d,{style:"invis"}),d})}),a}return ac}var sc,Ep;function uR(){return Ep||(Ep=1,sc="0.8.5"),sc}var uc,Sp;function cR(){return Sp||(Sp=1,uc={graphlib:He(),layout:aR(),debug:sR(),util:{time:Ae().time,notime:Ae().notime},version:uR()}),uc}var Cp=cR();const qp=(e,t,n="LR")=>{const r=new Cp.graphlib.Graph;r.setDefaultEdgeLabel(()=>({}));const i=n==="LR";return r.setGraph({rankdir:n,ranksep:250,nodesep:20}),e.forEach(a=>{r.setNode(a.id,{width:280,height:60})}),t.forEach(a=>{r.setEdge(a.source,a.target)}),Cp.layout(r),{nodes:e.map(a=>{const s=r.node(a.id),u=r.node(a.id);return{...a,targetPosition:i?J.Left:J.Top,sourcePosition:i?J.Right:J.Bottom,position:{x:s.x-u.width/2,y:s.y-u.height/2}}}),edges:t}},Gm=(e,t)=>{const n=t.filter(i=>i.source===e).map(i=>i.target);let r=[...n];return n.forEach(i=>{r=[...r,...Gm(i,t)]}),r},Km=(e,t)=>{const n=t.filter(i=>i.target===e).map(i=>i.source);let r=[...n];return n.forEach(i=>{r=[...r,...Km(i,t)]}),r};var lR=be('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'),dR=be('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>'),fR=le("<!> <!>",1),hR=le(`<div><div class="absolute top-4 left-4 z-10 flex items-center gap-4 p-3 rounded-xl shadow-lg border transition-colors
              bg-white/90 backdrop-blur-sm border-gray-200 dark:bg-gray-900/90 dark:border-slate-300"><h1 class="text-lg font-bold text-gray-900 dark:text-white">Altitude Data Lineage</h1> <div class="h-6 w-px bg-gray-300 dark:bg-gray-700 mx-2"></div> <button class="p-2 rounded-full transition-colors
               bg-gray-100 text-gray-600 hover:bg-gray-200
               dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700" aria-label="Toggle Theme"><!></button> <div class="h-6 w-px bg-gray-300 dark:bg-gray-700 mx-2"></div> <!></div> <div class="w-full h-full bg-gray-50 dark:bg-gray-950 transition-colors"><!></div></div>`);function wR(e,t){oe(t,!1);const n=()=>ml(a,"$nodes",i),r=()=>ml(s,"$edges",i),[i,o]=__();let a=hl([]),s=hl([]);const u={diamond:UE};function l({node:S}){const E=S.id;let R=[];s.subscribe(T=>R=T)();const w=Km(E,R),k=new Set([E,...w]);a.update(T=>T.map(z=>({...z,data:{...z.data,highlighted:k.has(z.id)}}))),s.update(T=>T.map(z=>{const B=k.has(z.target)&&k.has(z.source);return{...z,animated:B,style:B?"stroke: #3b82f6; stroke-width: 2px;":""}}))}function c(){a.update(S=>S.map(E=>({...E,data:{...E.data,highlighted:!1}}))),s.update(S=>S.map(E=>({...E,animated:!1,style:""})))}function d(S){a.update(E=>{const R=E.findIndex(F=>F.id===S);if(R===-1)return E;const w=E[R],k=w.data.expanded;E[R]={...w,data:{...w.data,expanded:!k}};let T=[];s.subscribe(F=>T=F)();const z=Gm(S,T),B=new Set(z),H=new Map(E.map(F=>[F.id,F])),V=new Set;if(!k){const F=[S];for(;F.length>0;){const K=F.shift(),X=H.get(K);(K===S?!k:X?.data.expanded)&&T.filter(fe=>fe.source===K).map(fe=>fe.target).forEach(fe=>{B.has(fe)&&(V.add(fe),F.push(fe))})}}const G=E.map(F=>B.has(F.id)?{...F,hidden:!V.has(F.id)}:F);let Y=[];s.subscribe(F=>Y=F)();const Z=G.filter(F=>!F.hidden),N=Y.filter(F=>{const K=Z.some($=>$.id===F.source),X=Z.some($=>$.id===F.target);return K&&X}),{nodes:L}=qp(Z,N),M=G.map(F=>{const K=L.find(X=>X.id===F.id);return K?{...F,position:K.position,sourcePosition:K.sourcePosition,targetPosition:K.targetPosition}:F});return m(M),M})}let f=null;function h(S){f=S;let E=[],R=[];function w(H,V=null){const G=H.id||crypto.randomUUID(),Y={id:G,type:"diamond",data:{label:H.name||"Unknown",expanded:!1,hasChildren:H.children&&H.children.length>0,childrenCount:H.children?H.children.length:0,onToggle:()=>d(G)},position:{x:0,y:0},hidden:V!==null};E.push(Y),V&&R.push({id:`e${V}-${G}`,source:V,target:G,type:"smoothstep",animated:!0}),H.children&&Array.isArray(H.children)&&H.children.forEach(Z=>w(Z,G))}Array.isArray(S)?S.forEach(H=>w(H)):w(S);const k=E.filter(H=>!H.hidden),T=R.filter(H=>{const V=k.some(Y=>Y.id===H.source),G=k.some(Y=>Y.id===H.target);return V&&G}),{nodes:z}=qp(k,T),B=E.map(H=>{const V=z.find(G=>G.id===H.id);return V?{...H,position:V.position,sourcePosition:V.sourcePosition,targetPosition:V.targetPosition}:H});a.set(B),s.set(R),m(B)}function m(S,E){typeof window<"u"&&f&&(localStorage.setItem("graphData",JSON.stringify(f)),localStorage.setItem("nodeStates",JSON.stringify(S.map(R=>({id:R.id,hidden:R.hidden,expanded:R.data.expanded})))))}function p(S){h(S.detail)}let v=qc(!1);function y(){j(v,!g(v)),typeof window<"u"&&localStorage.setItem("theme",g(v)?"dark":"light")}Zm(()=>{if(typeof window<"u"){const S=localStorage.getItem("theme");S&&j(v,S==="dark");const E=localStorage.getItem("graphData");if(E)try{const R=JSON.parse(E);h(R);const w=localStorage.getItem("nodeStates");if(w){const k=JSON.parse(w);a.update(T=>T.map(z=>{const B=k.find(H=>H.id===z.id);return B?{...z,hidden:B.hidden,data:{...z.data,expanded:B.expanded}}:z}))}}catch(R){console.error("Failed to load saved graph data",R)}}}),nr();var b=hR(),x=ue(b),_=se(ue(x),4),q=ue(_);{var C=S=>{var E=lR();W(S,E)},A=S=>{var E=dR();W(S,E)};pe(q,S=>{g(v)?S(C):S(A,!1)})}re(_);var P=se(_,4);ZE(P,{$$events:{load:p}}),re(x);var O=se(x,2),D=ue(O);{let S=Ip(()=>g(v)?"dark":"light");wE(D,{get nodes(){return n()},get edges(){return r()},get nodeTypes(){return u},fitView:!0,class:"bg-gray-50 dark:bg-gray-950",get colorMode(){return g(S)},onnodeclick:l,onpaneclick:c,children:(E,R)=>{var w=fR(),k=ge(w);ME(k,{});var T=se(k,2);VE(T,{get variant(){return it.Dots},gap:12,size:1}),W(E,w)},$$slots:{default:!0}})}re(O),re(b),ye(()=>Ze(b,1,`h-screen w-screen relative ${g(v)?"dark":""}`)),pt("click",_,y),W(e,b),ae(),o()}export{wR as component};
