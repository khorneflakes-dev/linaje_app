import{f as le,a as W,l as be,t as Ap,o as dc,m as pt,j as kp,d as Re}from"../chunks/JbgrQgUJ.js";import{i as rr}from"../chunks/C5bJileh.js";import{a as ir,c as Zm,o as Wm,w as gl}from"../chunks/DjIlbG6R.js";import{af as Ip,aS as Xm,aV as Jm,S as Or,h as It,a0 as Qm,a as fc,I as $m,H as e_,l as g,ar as Tp,ah as t_,K as n_,U as vl,a4 as Mr,e as Rn,J as r_,a9 as i_,R as pl,c as o_,b as hc,s as a_,aW as Pp,a7 as Np,aX as Op,aY as Mp,ak as qc,C as yl,aZ as s_,r as Dp,p as u_,a_ as Dr,F as c_,a$ as l_,a2 as d_,b0 as f_,b1 as h_,a6 as g_,d as v_,ai as Lp,i as Ce,D as p_,n as et,ac as y_,t as ie,b2 as an,u as m_,x as oe,y as ue,z as re,aE as I,ab as wt,b3 as vn,v as he,A as se,w as pe,T as or,b4 as zp,g as yt,aC as _e,an as j,b5 as sn,b6 as Se,b7 as Ne,b8 as __,as as ml}from"../chunks/Ygc0TX1C.js";import{p as Y,r as xt,i as ve,b as Kt,c as Rc,s as Pt,a as _l,d as b_}from"../chunks/ClZrYfmx.js";import{b as dt,s as Te,C as Ac,S as ar,a as ce,c as Ze,d as jt,e as We}from"../chunks/CF02fRiz.js";import{s as rt,c as w_}from"../chunks/BiRVlIFI.js";const x_=[];function Fp(e,t=!1,n=!1){return Dn(e,new Map,"",x_,null,n)}function Dn(e,t,n,r,i=null,o=!1){if(typeof e=="object"&&e!==null){var a=t.get(e);if(a!==void 0)return a;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Ip(e)){var s=Array(e.length);t.set(e,s),i!==null&&t.set(i,s);for(var u=0;u<e.length;u+=1){var l=e[u];u in e&&(s[u]=Dn(l,t,n,r,null,o))}return s}if(Xm(e)===Jm){s={},t.set(e,s),i!==null&&t.set(i,s);for(var c in e)s[c]=Dn(e[c],t,n,r,null,o);return s}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!o)return Dn(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function E_(e,t,n){for(var r=[],i=t.length,o=0;o<i;o++)f_(t[o].e,r,!0);h_(r,()=>{var a=r.length===0&&n!==null;if(a){var s=n,u=s.parentNode;g_(u),u.append(s),e.items.clear(),De(e,t[0].prev,t[i-1].next)}for(var l=0;l<i;l++){var c=t[l];a||(e.items.delete(c.k),De(e,c.prev,c.next)),v_(c.e,!a)}e.first===t[0]&&(e.first=t[0].prev)})}function kc(e,t,n,r,i,o=null){var a=e,s=new Map,u=null,l=(t&Pp)!==0,c=(t&Op)!==0,d=(t&Mp)!==0;if(l){var f=e;a=It?Or(Qm(f)):f.appendChild(fc())}It&&$m();var h=null,m=Tp(()=>{var _=n();return Ip(_)?_:_==null?[]:Np(_)}),p,v=!0;function y(){S_(x,p,a,t,r),h!==null&&(p.length===0?(h.fragment?(a.before(h.fragment),h.fragment=null):Dp(h.effect),b.first=h.effect):u_(h.effect,()=>{h=null}))}var b=e_(()=>{p=g(m);var _=p.length;let q=!1;if(It){var C=t_(a)===n_;C!==(_===0)&&(a=vl(),Or(a),Mr(!1),q=!0)}for(var A=new Set,P=o_,O=null,M=a_(),S=0;S<_;S+=1){It&&Rn.nodeType===r_&&Rn.data===i_&&(a=Rn,q=!0,Mr(!1));var E=p[S],R=r(E,S),w=v?null:s.get(R);w?(c&&pl(w.v,E),d?pl(w.i,S):w.i=S,M&&P.skipped_effects.delete(w.e)):(w=C_(v?a:null,O,E,R,S,i,t,n),v&&(w.o=!0,O===null?u=w:O.next=w,O=w),s.set(R,w)),A.add(R)}if(_===0&&o&&!h)if(v)h={fragment:null,effect:hc(()=>o(a))};else{var k=document.createDocumentFragment(),T=fc();k.append(T),h={fragment:k,effect:hc(()=>o(T))}}if(It&&_>0&&Or(vl()),!v)if(M){for(const[z,B]of s)A.has(z)||P.skipped_effects.add(B.e);P.oncommit(y),P.ondiscard(()=>{})}else y();q&&Mr(!0),g(m)}),x={effect:b,items:s,first:u};v=!1,It&&(a=Rn)}function S_(e,t,n,r,i){var o=(r&l_)!==0,a=t.length,s=e.items,u=e.first,l,c=null,d,f=[],h=[],m,p,v,y;if(o)for(y=0;y<a;y+=1)m=t[y],p=i(m,y),v=s.get(p),v.o&&(v.a?.measure(),(d??=new Set).add(v));for(y=0;y<a;y+=1){if(m=t[y],p=i(m,y),v=s.get(p),e.first??=v,!v.o){v.o=!0;var b=c?c.next:u;De(e,c,v),De(e,v,b),Lr(v,b,n),c=v,f=[],h=[],u=c.next;continue}if((v.e.f&Dr)!==0&&(Dp(v.e),o&&(v.a?.unfix(),(d??=new Set).delete(v))),v!==u){if(l!==void 0&&l.has(v)){if(f.length<h.length){var x=h[0],_;c=x.prev;var q=f[0],C=f[f.length-1];for(_=0;_<f.length;_+=1)Lr(f[_],x,n);for(_=0;_<h.length;_+=1)l.delete(h[_]);De(e,q.prev,C.next),De(e,c,q),De(e,C,x),u=x,c=C,y-=1,f=[],h=[]}else l.delete(v),Lr(v,u,n),De(e,v.prev,v.next),De(e,v,c===null?e.first:c.next),De(e,c,v),c=v;continue}for(f=[],h=[];u!==null&&u.k!==p;)(u.e.f&Dr)===0&&(l??=new Set).add(u),h.push(u),u=u.next;if(u===null)continue;v=u}f.push(v),c=v,u=v.next}let A=s.size>a;if(u!==null||l!==void 0){for(var P=l===void 0?[]:Np(l);u!==null;)(u.e.f&Dr)===0&&P.push(u),u=u.next;var O=P.length;if(A=s.size-O>a,O>0){var M=(r&Pp)!==0&&a===0?n:null;if(o){for(y=0;y<O;y+=1)P[y].a?.measure();for(y=0;y<O;y+=1)P[y].a?.fix()}E_(e,P,M)}}if(A)for(const S of s.values())S.o||(De(e,c,S),c=S);e.effect.last=c&&c.e,o&&c_(()=>{if(d!==void 0)for(v of d)v.a?.apply()})}function C_(e,t,n,r,i,o,a,s){var u=(a&Op)!==0,l=(a&s_)===0,c=u?l?qc(n,!1,!1):yl(n):n,d=(a&Mp)===0?i:yl(i),f={i:d,v:c,k:r,a:null,e:null,o:!1,prev:t,next:null};try{if(e===null){var h=document.createDocumentFragment();h.append(e=fc())}return f.e=hc(()=>o(e,c,d,s)),t!==null&&(t.next=f),f}finally{}}function Lr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==null&&o!==r;){var a=d_(o);i.before(o),o=a}}function De(e,t,n){t===null?(e.first=n,e.effect.first=n&&n.e):(t.e.next&&(t.e.next.prev=null),t.next=n,t.e.next=n&&n.e),n!==null&&(n.e.prev&&(n.e.prev.next=null),n.prev=t,n.e.prev=t&&t.e)}function qe(e,t,n){Lp(()=>{var r=Ce(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,o={};p_(()=>{var a=n();et(a),i&&y_(o,a)&&(o=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}class Ic{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#e.get(t);i.delete(n),i.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Ic.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var q_=new Ic({box:"border-box"});function bl(e,t,n){var r=q_.observe(e,()=>n(e[t]));Lp(()=>(Ce(()=>n(e[t])),r))}function R_(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}const A_=!0,SR=Object.freeze(Object.defineProperty({__proto__:null,prerender:A_},Symbol.toStringTag,{value:"Module"}));var k_={value:()=>{}};function sr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ln(n)}function Ln(e){this._=e}function I_(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ln.prototype=sr.prototype={constructor:Ln,on:function(e,t){var n=this._,r=I_(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=T_(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=wl(n[i],e.name,t);else if(t==null)for(i in n)n[i]=wl(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ln(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function T_(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function wl(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=k_,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gc="http://www.w3.org/1999/xhtml";const xl={svg:"http://www.w3.org/2000/svg",xhtml:gc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ur(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xl.hasOwnProperty(t)?{space:xl[t],local:e}:e}function P_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gc&&t.documentElement.namespaceURI===gc?t.createElement(e):t.createElementNS(n,e)}}function N_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Hp(e){var t=ur(e);return(t.local?N_:P_)(t)}function O_(){}function Tc(e){return e==null?O_:function(){return this.querySelector(e)}}function M_(e){typeof e!="function"&&(e=Tc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),u,l,c=0;c<a;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new Pe(r,this._parents)}function D_(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function L_(){return[]}function Bp(e){return e==null?L_:function(){return this.querySelectorAll(e)}}function z_(e){return function(){return D_(e.apply(this,arguments))}}function F_(e){typeof e=="function"?e=z_(e):e=Bp(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(r.push(e.call(u,u.__data__,l,a)),i.push(u));return new Pe(r,i)}function Vp(e){return function(){return this.matches(e)}}function Gp(e){return function(t){return t.matches(e)}}var H_=Array.prototype.find;function B_(e){return function(){return H_.call(this.children,e)}}function V_(){return this.firstElementChild}function G_(e){return this.select(e==null?V_:B_(typeof e=="function"?e:Gp(e)))}var K_=Array.prototype.filter;function j_(){return Array.from(this.children)}function U_(e){return function(){return K_.call(this.children,e)}}function Y_(e){return this.selectAll(e==null?j_:U_(typeof e=="function"?e:Gp(e)))}function Z_(e){typeof e!="function"&&(e=Vp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new Pe(r,this._parents)}function Kp(e){return new Array(e.length)}function W_(){return new Pe(this._enter||this._groups.map(Kp),this._parents)}function Vn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vn.prototype={constructor:Vn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function X_(e){return function(){return e}}function J_(e,t,n,r,i,o){for(var a=0,s,u=t.length,l=o.length;a<l;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Vn(e,o[a]);for(;a<u;++a)(s=t[a])&&(i[a]=s)}function Q_(e,t,n,r,i,o,a){var s,u,l=new Map,c=t.length,d=o.length,f=new Array(c),h;for(s=0;s<c;++s)(u=t[s])&&(f[s]=h=a.call(u,u.__data__,s,t)+"",l.has(h)?i[s]=u:l.set(h,u));for(s=0;s<d;++s)h=a.call(e,o[s],s,o)+"",(u=l.get(h))?(r[s]=u,u.__data__=o[s],l.delete(h)):n[s]=new Vn(e,o[s]);for(s=0;s<c;++s)(u=t[s])&&l.get(f[s])===u&&(i[s]=u)}function $_(e){return e.__data__}function e0(e,t){if(!arguments.length)return Array.from(this,$_);var n=t?Q_:J_,r=this._parents,i=this._groups;typeof e!="function"&&(e=X_(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],f=d.length,h=t0(e.call(c,c&&c.__data__,l,r)),m=h.length,p=s[l]=new Array(m),v=a[l]=new Array(m),y=u[l]=new Array(f);n(c,d,p,v,y,h,t);for(var b=0,x=0,_,q;b<m;++b)if(_=p[b]){for(b>=x&&(x=b+1);!(q=v[x])&&++x<m;);_._next=q||null}}return a=new Pe(a,r),a._enter=s,a._exit=u,a}function t0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function n0(){return new Pe(this._exit||this._groups.map(Kp),this._parents)}function r0(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function i0(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l=n[u],c=r[u],d=l.length,f=s[u]=new Array(d),h,m=0;m<d;++m)(h=l[m]||c[m])&&(f[m]=h);for(;u<i;++u)s[u]=n[u];return new Pe(s,this._parents)}function o0(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function a0(e){e||(e=s0);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,u=i[o]=new Array(s),l,c=0;c<s;++c)(l=a[c])&&(u[c]=l);u.sort(t)}return new Pe(i,this._parents).order()}function s0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function u0(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function c0(){return Array.from(this)}function l0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function d0(){let e=0;for(const t of this)++e;return e}function f0(){return!this.node()}function h0(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function g0(e){return function(){this.removeAttribute(e)}}function v0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function p0(e,t){return function(){this.setAttribute(e,t)}}function y0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function m0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function b0(e,t){var n=ur(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?v0:g0:typeof t=="function"?n.local?_0:m0:n.local?y0:p0)(n,t))}function jp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function w0(e){return function(){this.style.removeProperty(e)}}function x0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function S0(e,t,n){return arguments.length>1?this.each((t==null?w0:typeof t=="function"?E0:x0)(e,t,n??"")):Lt(this.node(),e)}function Lt(e,t){return e.style.getPropertyValue(t)||jp(e).getComputedStyle(e,null).getPropertyValue(t)}function C0(e){return function(){delete this[e]}}function q0(e,t){return function(){this[e]=t}}function R0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function A0(e,t){return arguments.length>1?this.each((t==null?C0:typeof t=="function"?R0:q0)(e,t)):this.node()[e]}function Up(e){return e.trim().split(/^|\s+/)}function Pc(e){return e.classList||new Yp(e)}function Yp(e){this._node=e,this._names=Up(e.getAttribute("class")||"")}Yp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Zp(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Wp(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function k0(e){return function(){Zp(this,e)}}function I0(e){return function(){Wp(this,e)}}function T0(e,t){return function(){(t.apply(this,arguments)?Zp:Wp)(this,e)}}function P0(e,t){var n=Up(e+"");if(arguments.length<2){for(var r=Pc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?T0:t?k0:I0)(n,t))}function N0(){this.textContent=""}function O0(e){return function(){this.textContent=e}}function M0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function D0(e){return arguments.length?this.each(e==null?N0:(typeof e=="function"?M0:O0)(e)):this.node().textContent}function L0(){this.innerHTML=""}function z0(e){return function(){this.innerHTML=e}}function F0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function H0(e){return arguments.length?this.each(e==null?L0:(typeof e=="function"?F0:z0)(e)):this.node().innerHTML}function B0(){this.nextSibling&&this.parentNode.appendChild(this)}function V0(){return this.each(B0)}function G0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K0(){return this.each(G0)}function j0(e){var t=typeof e=="function"?e:Hp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function U0(){return null}function Y0(e,t){var n=typeof e=="function"?e:Hp(e),r=t==null?U0:typeof t=="function"?t:Tc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Z0(){var e=this.parentNode;e&&e.removeChild(this)}function W0(){return this.each(Z0)}function X0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q0(e){return this.select(e?J0:X0)}function $0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function eb(e){return function(t){e.call(this,t,this.__data__)}}function tb(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function nb(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function rb(e,t,n){return function(){var r=this.__on,i,o=eb(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ib(e,t,n){var r=tb(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=t?rb:nb,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Xp(e,t,n){var r=jp(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ob(e,t){return function(){return Xp(this,e,t)}}function ab(e,t){return function(){return Xp(this,e,t.apply(this,arguments))}}function sb(e,t){return this.each((typeof t=="function"?ab:ob)(e,t))}function*ub(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Jp=[null];function Pe(e,t){this._groups=e,this._parents=t}function pn(){return new Pe([[document.documentElement]],Jp)}function cb(){return this}Pe.prototype=pn.prototype={constructor:Pe,select:M_,selectAll:F_,selectChild:G_,selectChildren:Y_,filter:Z_,data:e0,enter:W_,exit:n0,join:r0,merge:i0,selection:cb,order:o0,sort:a0,call:u0,nodes:c0,node:l0,size:d0,empty:f0,each:h0,attr:b0,style:S0,property:A0,classed:P0,text:D0,html:H0,raise:V0,lower:K0,append:j0,insert:Y0,remove:W0,clone:Q0,datum:$0,on:ib,dispatch:sb,[Symbol.iterator]:ub};function Le(e){return typeof e=="string"?new Pe([[document.querySelector(e)]],[document.documentElement]):new Pe([[e]],Jp)}function lb(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=lb(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const db={passive:!1},un={capture:!0,passive:!1};function zr(e){e.stopImmediatePropagation()}function Ot(e){e.preventDefault(),e.stopImmediatePropagation()}function Qp(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",Ot,un);"onselectstart"in t?n.on("selectstart.drag",Ot,un):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $p(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ot,un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const An=e=>()=>e;function vc(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}vc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function fb(e){return!e.ctrlKey&&!e.button}function hb(){return this.parentNode}function gb(e,t){return t??{x:e.x,y:e.y}}function vb(){return navigator.maxTouchPoints||"ontouchstart"in this}function pb(){var e=fb,t=hb,n=gb,r=vb,i={},o=sr("start","drag","end"),a=0,s,u,l,c,d=0;function f(_){_.on("mousedown.drag",h).filter(r).on("touchstart.drag",v).on("touchmove.drag",y,db).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(_,q){if(!(c||!e.call(this,_,q))){var C=x(this,t.call(this,_,q),_,q,"mouse");C&&(Le(_.view).on("mousemove.drag",m,un).on("mouseup.drag",p,un),Qp(_.view),zr(_),l=!1,s=_.clientX,u=_.clientY,C("start",_))}}function m(_){if(Ot(_),!l){var q=_.clientX-s,C=_.clientY-u;l=q*q+C*C>d}i.mouse("drag",_)}function p(_){Le(_.view).on("mousemove.drag mouseup.drag",null),$p(_.view,l),Ot(_),i.mouse("end",_)}function v(_,q){if(e.call(this,_,q)){var C=_.changedTouches,A=t.call(this,_,q),P=C.length,O,M;for(O=0;O<P;++O)(M=x(this,A,_,q,C[O].identifier,C[O]))&&(zr(_),M("start",_,C[O]))}}function y(_){var q=_.changedTouches,C=q.length,A,P;for(A=0;A<C;++A)(P=i[q[A].identifier])&&(Ot(_),P("drag",_,q[A]))}function b(_){var q=_.changedTouches,C=q.length,A,P;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<C;++A)(P=i[q[A].identifier])&&(zr(_),P("end",_,q[A]))}function x(_,q,C,A,P,O){var M=o.copy(),S=je(O||C,q),E,R,w;if((w=n.call(_,new vc("beforestart",{sourceEvent:C,target:f,identifier:P,active:a,x:S[0],y:S[1],dx:0,dy:0,dispatch:M}),A))!=null)return E=w.x-S[0]||0,R=w.y-S[1]||0,function k(T,z,B){var F=S,H;switch(T){case"start":i[P]=k,H=a++;break;case"end":delete i[P],--a;case"drag":S=je(B||z,q),H=a;break}M.call(T,_,new vc(T,{sourceEvent:z,subject:w,target:f,identifier:P,active:H,x:S[0]+E,y:S[1]+R,dx:S[0]-F[0],dy:S[1]-F[1],dispatch:M}),A)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:An(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:An(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:An(_),f):n},f.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:An(!!_),f):r},f.on=function(){var _=o.on.apply(o,arguments);return _===o?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function Nc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ey(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yn(){}var cn=.7,Gn=1/cn,Mt="\\s*([+-]?\\d+)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yb=/^#([0-9a-f]{3,8})$/,mb=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),_b=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),bb=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${ln}\\)$`),wb=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${ln}\\)$`),xb=new RegExp(`^hsl\\(${ln},${Ye},${Ye}\\)$`),Eb=new RegExp(`^hsla\\(${ln},${Ye},${Ye},${ln}\\)$`),El={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nc(yn,mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Sl,formatHex:Sl,formatHex8:Sb,formatHsl:Cb,formatRgb:Cl,toString:Cl});function Sl(){return this.rgb().formatHex()}function Sb(){return this.rgb().formatHex8()}function Cb(){return ty(this).formatHsl()}function Cl(){return this.rgb().formatRgb()}function mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yb.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ql(t):n===3?new Ae(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mb.exec(e))?new Ae(t[1],t[2],t[3],1):(t=_b.exec(e))?new Ae(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bb.exec(e))?kn(t[1],t[2],t[3],t[4]):(t=wb.exec(e))?kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xb.exec(e))?kl(t[1],t[2]/100,t[3]/100,1):(t=Eb.exec(e))?kl(t[1],t[2]/100,t[3]/100,t[4]):El.hasOwnProperty(e)?ql(El[e]):e==="transparent"?new Ae(NaN,NaN,NaN,0):null}function ql(e){return new Ae(e>>16&255,e>>8&255,e&255,1)}function kn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ae(e,t,n,r)}function qb(e){return e instanceof yn||(e=mt(e)),e?(e=e.rgb(),new Ae(e.r,e.g,e.b,e.opacity)):new Ae}function pc(e,t,n,r){return arguments.length===1?qb(e):new Ae(e,t,n,r??1)}function Ae(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Nc(Ae,pc,ey(yn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new Ae(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ae(vt(this.r),vt(this.g),vt(this.b),Kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rl,formatHex:Rl,formatHex8:Rb,formatRgb:Al,toString:Al}));function Rl(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}`}function Rb(){return`#${gt(this.r)}${gt(this.g)}${gt(this.b)}${gt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Al(){const e=Kn(this.opacity);return`${e===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${e===1?")":`, ${e})`}`}function Kn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gt(e){return e=vt(e),(e<16?"0":"")+e.toString(16)}function kl(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ze(e,t,n,r)}function ty(e){if(e instanceof ze)return new ze(e.h,e.s,e.l,e.opacity);if(e instanceof yn||(e=mt(e)),!e)return new ze;if(e instanceof ze)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ze(a,s,u,e.opacity)}function Ab(e,t,n,r){return arguments.length===1?ty(e):new ze(e,t,n,r??1)}function ze(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Nc(ze,Ab,ey(yn,{brighter(e){return e=e==null?Gn:Math.pow(Gn,e),new ze(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cn:Math.pow(cn,e),new ze(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ae(Fr(e>=240?e-240:e+120,i,r),Fr(e,i,r),Fr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ze(Il(this.h),In(this.s),In(this.l),Kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kn(this.opacity);return`${e===1?"hsl(":"hsla("}${Il(this.h)}, ${In(this.s)*100}%, ${In(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Il(e){return e=(e||0)%360,e<0?e+360:e}function In(e){return Math.max(0,Math.min(1,e||0))}function Fr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Oc=e=>()=>e;function kb(e,t){return function(n){return e+n*t}}function Ib(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Tb(e){return(e=+e)==1?ny:function(t,n){return n-t?Ib(t,n,e):Oc(isNaN(t)?n:t)}}function ny(e,t){var n=t-e;return n?kb(e,n):Oc(isNaN(e)?t:e)}const jn=(function e(t){var n=Tb(t);function r(i,o){var a=n((i=pc(i)).r,(o=pc(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=ny(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r})(1);function Pb(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Nb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ob(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=on(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Mb(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ue(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Db(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=on(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hr=new RegExp(yc.source,"g");function Lb(e){return function(){return e}}function zb(e){return function(t){return e(t)+""}}function ry(e,t){var n=yc.lastIndex=Hr.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(e=e+"",t=t+"";(r=yc.exec(e))&&(i=Hr.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Ue(r,i)})),n=Hr.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?zb(u[0].x):Lb(t):(t=u.length,function(l){for(var c=0,d;c<t;++c)s[(d=u[c]).i]=d.x(l);return s.join("")})}function on(e,t){var n=typeof t,r;return t==null||n==="boolean"?Oc(t):(n==="number"?Ue:n==="string"?(r=mt(t))?(t=r,jn):ry:t instanceof mt?jn:t instanceof Date?Mb:Nb(t)?Pb:Array.isArray(t)?Ob:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Db:Ue)(e,t)}var Tl=180/Math.PI,mc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function iy(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Tl,skewX:Math.atan(u)*Tl,scaleX:a,scaleY:s}}var Tn;function Fb(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mc:iy(t.a,t.b,t.c,t.d,t.e,t.f)}function Hb(e){return e==null||(Tn||(Tn=document.createElementNS("http://www.w3.org/2000/svg","g")),Tn.setAttribute("transform",e),!(e=Tn.transform.baseVal.consolidate()))?mc:(e=e.matrix,iy(e.a,e.b,e.c,e.d,e.e,e.f))}function oy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,d,f,h,m){if(l!==d||c!==f){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(l,c,d,f){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ue(l,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(l,c,d,f){l!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ue(l,c)}):c&&d.push(i(d)+"skewX("+c+r)}function u(l,c,d,f,h,m){if(l!==d||c!==f){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:Ue(l,d)},{i:p-2,x:Ue(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(l,c){var d=[],f=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,d,f),a(l.rotate,c.rotate,d,f),s(l.skewX,c.skewX,d,f),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,d,f),l=c=null,function(h){for(var m=-1,p=f.length,v;++m<p;)d[(v=f[m]).i]=v.x(h);return d.join("")}}}var Bb=oy(Fb,"px, ","px)","deg)"),Vb=oy(Hb,", ",")",")"),Gb=1e-12;function Pl(e){return((e=Math.exp(e))+1/e)/2}function Kb(e){return((e=Math.exp(e))-1/e)/2}function jb(e){return((e=Math.exp(2*e))-1)/(e+1)}const zn=(function e(t,n,r){function i(o,a){var s=o[0],u=o[1],l=o[2],c=a[0],d=a[1],f=a[2],h=c-s,m=d-u,p=h*h+m*m,v,y;if(p<Gb)y=Math.log(f/l)/t,v=function(A){return[s+A*h,u+A*m,l*Math.exp(t*A*y)]};else{var b=Math.sqrt(p),x=(f*f-l*l+r*p)/(2*l*n*b),_=(f*f-l*l-r*p)/(2*f*n*b),q=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(_*_+1)-_);y=(C-q)/t,v=function(A){var P=A*y,O=Pl(q),M=l/(n*b)*(O*jb(t*P+q)-Kb(q));return[s+M*h,u+M*m,l*O/Pl(t*P+q)]}}return v.duration=y*1e3*t/Math.SQRT2,v}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,u=s*s;return e(a,s,u)},i})(Math.SQRT2,2,4);var zt=0,$t=0,Jt=0,ay=1e3,Un,en,Yn=0,_t=0,cr=0,dn=typeof performance=="object"&&performance.now?performance:Date,sy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mc(){return _t||(sy(Ub),_t=dn.now()+cr)}function Ub(){_t=0}function Zn(){this._call=this._time=this._next=null}Zn.prototype=uy.prototype={constructor:Zn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mc():+n)+(t==null?0:+t),!this._next&&en!==this&&(en?en._next=this:Un=this,en=this),this._call=e,this._time=n,_c()},stop:function(){this._call&&(this._call=null,this._time=1/0,_c())}};function uy(e,t,n){var r=new Zn;return r.restart(e,t,n),r}function Yb(){Mc(),++zt;for(var e=Un,t;e;)(t=_t-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zt}function Nl(){_t=(Yn=dn.now())+cr,zt=$t=0;try{Yb()}finally{zt=0,Wb(),_t=0}}function Zb(){var e=dn.now(),t=e-Yn;t>ay&&(cr-=t,Yn=e)}function Wb(){for(var e,t=Un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Un=n);en=e,_c(r)}function _c(e){if(!zt){$t&&($t=clearTimeout($t));var t=e-_t;t>24?(e<1/0&&($t=setTimeout(Nl,e-dn.now()-cr)),Jt&&(Jt=clearInterval(Jt))):(Jt||(Yn=dn.now(),Jt=setInterval(Zb,ay)),zt=1,sy(Nl))}}function Ol(e,t,n){var r=new Zn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Xb=sr("start","end","cancel","interrupt"),Jb=[],cy=0,Ml=1,bc=2,Fn=3,Dl=4,wc=5,Hn=6;function lr(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Qb(e,n,{name:t,index:r,group:i,on:Xb,tween:Jb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:cy})}function Dc(e,t){var n=Be(e,t);if(n.state>cy)throw new Error("too late; already scheduled");return n}function Je(e,t){var n=Be(e,t);if(n.state>Fn)throw new Error("too late; already running");return n}function Be(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qb(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=uy(o,0,n.time);function o(l){n.state=Ml,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,d,f,h;if(n.state!==Ml)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===Fn)return Ol(a);h.state===Dl?(h.state=Hn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=Hn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ol(function(){n.state===Fn&&(n.state=Dl,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=bc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bc){for(n.state=Fn,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=wc,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===wc&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Hn,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Bn(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>bc&&r.state<wc,r.state=Hn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function $b(e){return this.each(function(){Bn(this,e)})}function ew(e,t){var n,r;return function(){var i=Je(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function tw(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Je(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function nw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Be(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?ew:tw)(n,e,t))}function Lc(e,t,n){var r=e._id;return e.each(function(){var i=Je(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Be(i,r).value[t]}}function ly(e,t){var n;return(typeof t=="number"?Ue:t instanceof mt?jn:(n=mt(t))?(t=n,jn):ry)(e,t)}function rw(e){return function(){this.removeAttribute(e)}}function iw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ow(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function aw(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function sw(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function uw(e,t,n){var r,i,o;return function(){var a,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),u=s+"",a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s)))}}function cw(e,t){var n=ur(e),r=n==="transform"?Vb:ly;return this.attrTween(e,typeof t=="function"?(n.local?uw:sw)(n,r,Lc(this,"attr."+e,t)):t==null?(n.local?iw:rw)(n):(n.local?aw:ow)(n,r,t))}function lw(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dw(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fw(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&dw(e,o)),n}return i._value=t,i}function hw(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&lw(e,o)),n}return i._value=t,i}function gw(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ur(e);return this.tween(n,(r.local?fw:hw)(r,t))}function vw(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function pw(e,t){return t=+t,function(){Dc(this,e).delay=t}}function yw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vw:pw)(t,e)):Be(this.node(),t).delay}function mw(e,t){return function(){Je(this,e).duration=+t.apply(this,arguments)}}function _w(e,t){return t=+t,function(){Je(this,e).duration=t}}function bw(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mw:_w)(t,e)):Be(this.node(),t).duration}function ww(e,t){if(typeof t!="function")throw new Error;return function(){Je(this,e).ease=t}}function xw(e){var t=this._id;return arguments.length?this.each(ww(t,e)):Be(this.node(),t).ease}function Ew(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Je(this,e).ease=n}}function Sw(e){if(typeof e!="function")throw new Error;return this.each(Ew(this._id,e))}function Cw(e){typeof e!="function"&&(e=Vp(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],u,l=0;l<a;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&s.push(u);return new ot(r,this._parents,this._name,this._id)}function qw(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u=t[s],l=n[s],c=u.length,d=a[s]=new Array(c),f,h=0;h<c;++h)(f=u[h]||l[h])&&(d[h]=f);for(;s<r;++s)a[s]=t[s];return new ot(a,this._parents,this._name,this._id)}function Rw(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Aw(e,t,n){var r,i,o=Rw(t)?Dc:Je;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function kw(e,t){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(e):this.each(Aw(n,e,t))}function Iw(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Tw(){return this.on("end.remove",Iw(this._id))}function Pw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Tc(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],u=s.length,l=o[a]=new Array(u),c,d,f=0;f<u;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),l[f]=d,lr(l[f],t,n,f,l,Be(c,n)));return new ot(o,this._parents,t,n)}function Nw(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bp(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,d=0;d<l;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,m=Be(c,n),p=0,v=f.length;p<v;++p)(h=f[p])&&lr(h,t,n,p,f,m);o.push(f),a.push(c)}return new ot(o,a,t,n)}var Ow=pn.prototype.constructor;function Mw(){return new Ow(this._groups,this._parents)}function Dw(e,t){var n,r,i;return function(){var o=Lt(this,e),a=(this.style.removeProperty(e),Lt(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function dy(e){return function(){this.style.removeProperty(e)}}function Lw(e,t,n){var r,i=n+"",o;return function(){var a=Lt(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function zw(e,t,n){var r,i,o;return function(){var a=Lt(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Lt(this,e))),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}function Fw(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var u=Je(this,e),l=u.on,c=u.value[o]==null?s||(s=dy(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),u.on=r}}function Hw(e,t,n){var r=(e+="")=="transform"?Bb:ly;return t==null?this.styleTween(e,Dw(e,r)).on("end.style."+e,dy(e)):typeof t=="function"?this.styleTween(e,zw(e,r,Lc(this,"style."+e,t))).each(Fw(this._id,e)):this.styleTween(e,Lw(e,r,t),n).on("end.style."+e,null)}function Bw(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Vw(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Bw(e,a,n)),r}return o._value=t,o}function Gw(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vw(e,t,n??""))}function Kw(e){return function(){this.textContent=e}}function jw(e){return function(){var t=e(this);this.textContent=t??""}}function Uw(e){return this.tween("text",typeof e=="function"?jw(Lc(this,"text",e)):Kw(e==null?"":e+""))}function Yw(e){return function(t){this.textContent=e.call(this,t)}}function Zw(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Yw(i)),t}return r._value=e,r}function Ww(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Zw(e))}function Xw(){for(var e=this._name,t=this._id,n=fy(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var c=Be(u,t);lr(u,e,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ot(r,this._parents,e,n)}function Jw(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){--i===0&&o()}};n.each(function(){var l=Je(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),l.on=t}),i===0&&o()})}var Qw=0;function ot(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function fy(){return++Qw}var $e=pn.prototype;ot.prototype={constructor:ot,select:Pw,selectAll:Nw,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:Cw,merge:qw,selection:Mw,transition:Xw,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:kw,attr:cw,attrTween:gw,style:Hw,styleTween:Gw,text:Uw,textTween:Ww,remove:Tw,tween:nw,delay:yw,duration:bw,ease:xw,easeVarying:Sw,end:Jw,[Symbol.iterator]:$e[Symbol.iterator]};function $w(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e1={time:null,delay:0,duration:250,ease:$w};function t1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function n1(e){var t,n;e instanceof ot?(t=e._id,e=e._name):(t=fy(),(n=e1).time=Mc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,u,l=0;l<s;++l)(u=a[l])&&lr(u,e,t,l,a,n||t1(u,t));return new ot(r,this._parents,e,t)}pn.prototype.interrupt=$b;pn.prototype.transition=n1;const Pn=e=>()=>e;function r1(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function tt(e,t,n){this.k=e,this.x=t,this.y=n}tt.prototype={constructor:tt,scale:function(e){return e===1?this:new tt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dr=new tt(1,0,0);hy.prototype=tt.prototype;function hy(e){for(;!e.__zoom;)if(!(e=e.parentNode))return dr;return e.__zoom}function Br(e){e.stopImmediatePropagation()}function Qt(e){e.preventDefault(),e.stopImmediatePropagation()}function i1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function o1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Ll(){return this.__zoom||dr}function a1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function s1(){return navigator.maxTouchPoints||"ontouchstart"in this}function u1(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function c1(){var e=i1,t=o1,n=u1,r=a1,i=s1,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,u=zn,l=sr("start","zoom","end"),c,d,f,h=500,m=150,p=0,v=10;function y(w){w.property("__zoom",Ll).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(w,k,T,z){var B=w.selection?w.selection():w;B.property("__zoom",Ll),w!==B?q(w,k,T,z):B.interrupt().each(function(){C(this,arguments).event(z).start().zoom(null,typeof k=="function"?k.apply(this,arguments):k).end()})},y.scaleBy=function(w,k,T,z){y.scaleTo(w,function(){var B=this.__zoom.k,F=typeof k=="function"?k.apply(this,arguments):k;return B*F},T,z)},y.scaleTo=function(w,k,T,z){y.transform(w,function(){var B=t.apply(this,arguments),F=this.__zoom,H=T==null?_(B):typeof T=="function"?T.apply(this,arguments):T,K=F.invert(H),U=typeof k=="function"?k.apply(this,arguments):k;return n(x(b(F,U),H,K),B,a)},T,z)},y.translateBy=function(w,k,T,z){y.transform(w,function(){return n(this.__zoom.translate(typeof k=="function"?k.apply(this,arguments):k,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),a)},null,z)},y.translateTo=function(w,k,T,z,B){y.transform(w,function(){var F=t.apply(this,arguments),H=this.__zoom,K=z==null?_(F):typeof z=="function"?z.apply(this,arguments):z;return n(dr.translate(K[0],K[1]).scale(H.k).translate(typeof k=="function"?-k.apply(this,arguments):-k,typeof T=="function"?-T.apply(this,arguments):-T),F,a)},z,B)};function b(w,k){return k=Math.max(o[0],Math.min(o[1],k)),k===w.k?w:new tt(k,w.x,w.y)}function x(w,k,T){var z=k[0]-T[0]*w.k,B=k[1]-T[1]*w.k;return z===w.x&&B===w.y?w:new tt(w.k,z,B)}function _(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function q(w,k,T,z){w.on("start.zoom",function(){C(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(z).end()}).tween("zoom",function(){var B=this,F=arguments,H=C(B,F).event(z),K=t.apply(B,F),U=T==null?_(K):typeof T=="function"?T.apply(B,F):T,Z=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),N=B.__zoom,D=typeof k=="function"?k.apply(B,F):k,L=u(N.invert(U).concat(Z/N.k),D.invert(U).concat(Z/D.k));return function(V){if(V===1)V=D;else{var G=L(V),X=Z/G[2];V=new tt(X,U[0]-G[0]*X,U[1]-G[1]*X)}H.zoom(null,V)}})}function C(w,k,T){return!T&&w.__zooming||new A(w,k)}function A(w,k){this.that=w,this.args=k,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,k),this.taps=0}A.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,k){return this.mouse&&w!=="mouse"&&(this.mouse[1]=k.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=k.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=k.invert(this.touch1[0])),this.that.__zoom=k,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var k=Le(this.that).datum();l.call(w,this.that,new r1(w,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:l}),k)}};function P(w,...k){if(!e.apply(this,arguments))return;var T=C(this,k).event(w),z=this.__zoom,B=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,r.apply(this,arguments)))),F=je(w);if(T.wheel)(T.mouse[0][0]!==F[0]||T.mouse[0][1]!==F[1])&&(T.mouse[1]=z.invert(T.mouse[0]=F)),clearTimeout(T.wheel);else{if(z.k===B)return;T.mouse=[F,z.invert(F)],Bn(this),T.start()}Qt(w),T.wheel=setTimeout(H,m),T.zoom("mouse",n(x(b(z,B),T.mouse[0],T.mouse[1]),T.extent,a));function H(){T.wheel=null,T.end()}}function O(w,...k){if(f||!e.apply(this,arguments))return;var T=w.currentTarget,z=C(this,k,!0).event(w),B=Le(w.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",Z,!0),F=je(w,T),H=w.clientX,K=w.clientY;Qp(w.view),Br(w),z.mouse=[F,this.__zoom.invert(F)],Bn(this),z.start();function U(N){if(Qt(N),!z.moved){var D=N.clientX-H,L=N.clientY-K;z.moved=D*D+L*L>p}z.event(N).zoom("mouse",n(x(z.that.__zoom,z.mouse[0]=je(N,T),z.mouse[1]),z.extent,a))}function Z(N){B.on("mousemove.zoom mouseup.zoom",null),$p(N.view,z.moved),Qt(N),z.event(N).end()}}function M(w,...k){if(e.apply(this,arguments)){var T=this.__zoom,z=je(w.changedTouches?w.changedTouches[0]:w,this),B=T.invert(z),F=T.k*(w.shiftKey?.5:2),H=n(x(b(T,F),z,B),t.apply(this,k),a);Qt(w),s>0?Le(this).transition().duration(s).call(q,H,z,w):Le(this).call(y.transform,H,z,w)}}function S(w,...k){if(e.apply(this,arguments)){var T=w.touches,z=T.length,B=C(this,k,w.changedTouches.length===z).event(w),F,H,K,U;for(Br(w),H=0;H<z;++H)K=T[H],U=je(K,this),U=[U,this.__zoom.invert(U),K.identifier],B.touch0?!B.touch1&&B.touch0[2]!==U[2]&&(B.touch1=U,B.taps=0):(B.touch0=U,F=!0,B.taps=1+!!c);c&&(c=clearTimeout(c)),F&&(B.taps<2&&(d=U[0],c=setTimeout(function(){c=null},h)),Bn(this),B.start())}}function E(w,...k){if(this.__zooming){var T=C(this,k).event(w),z=w.changedTouches,B=z.length,F,H,K,U;for(Qt(w),F=0;F<B;++F)H=z[F],K=je(H,this),T.touch0&&T.touch0[2]===H.identifier?T.touch0[0]=K:T.touch1&&T.touch1[2]===H.identifier&&(T.touch1[0]=K);if(H=T.that.__zoom,T.touch1){var Z=T.touch0[0],N=T.touch0[1],D=T.touch1[0],L=T.touch1[1],V=(V=D[0]-Z[0])*V+(V=D[1]-Z[1])*V,G=(G=L[0]-N[0])*G+(G=L[1]-N[1])*G;H=b(H,Math.sqrt(V/G)),K=[(Z[0]+D[0])/2,(Z[1]+D[1])/2],U=[(N[0]+L[0])/2,(N[1]+L[1])/2]}else if(T.touch0)K=T.touch0[0],U=T.touch0[1];else return;T.zoom("touch",n(x(H,K,U),T.extent,a))}}function R(w,...k){if(this.__zooming){var T=C(this,k).event(w),z=w.changedTouches,B=z.length,F,H;for(Br(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),F=0;F<B;++F)H=z[F],T.touch0&&T.touch0[2]===H.identifier?delete T.touch0:T.touch1&&T.touch1[2]===H.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(H=je(H,this),Math.hypot(d[0]-H[0],d[1]-H[1])<v)){var K=Le(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return y.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:Pn(+w),y):r},y.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Pn(!!w),y):e},y.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:Pn(!!w),y):i},y.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Pn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),y):t},y.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],y):[o[0],o[1]]},y.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(w){return arguments.length?(n=w,y):n},y.duration=function(w){return arguments.length?(s=+w,y):s},y.interpolate=function(w){return arguments.length?(u=w,y):u},y.on=function(){var w=l.on.apply(l,arguments);return w===l?y:w},y.clickDistance=function(w){return arguments.length?(p=(w=+w)*w,y):Math.sqrt(p)},y.tapDistance=function(w){return arguments.length?(v=+w,y):v},y}const fn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},xc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gy=["Enter"," ","Escape"],l1={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ft;(function(e){e.Strict="strict",e.Loose="loose"})(Ft||(Ft={}));var Dt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Dt||(Dt={}));var Wn;(function(e){e.Partial="partial",e.Full="full"})(Wn||(Wn={}));const Ec={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var lt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(lt||(lt={}));var Xn;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Xn||(Xn={}));var Q;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Q||(Q={}));const zl={[Q.Left]:Q.Right,[Q.Right]:Q.Left,[Q.Top]:Q.Bottom,[Q.Bottom]:Q.Top};function d1(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Fl(e,t,n){if(!n)return;const r=[];e.forEach((i,o)=>{t?.has(o)||r.push(i)}),r.length&&n(r)}function f1(e){return e===null?null:e?"valid":"invalid"}const vy=e=>"id"in e&&"source"in e&&"target"in e,h1=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),zc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),mn=(e,t=[0,0])=>{const{width:n,height:r}=Et(e),i=e.origin??t,o=n*i[0],a=r*i[1];return{x:e.position.x-o,y:e.position.y-a}},g1=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const o=typeof i=="string";let a=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(i):zc(i)?i:t.nodeLookup.get(i.id));const s=a?Jn(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return hr(r,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gr(n)},fr=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=hr(n,Jn(i)),r=!0)}),r?gr(n):{x:0,y:0,width:0,height:0}},Fc=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{const s={...bn(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const l of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=l;if(a&&!d||f)continue;const h=c.width??l.width??l.initialWidth??null,m=c.height??l.height??l.initialHeight??null,p=hn(s,Bt(l)),v=(h??0)*(m??0),y=o&&p>0;(!l.internals.handleBounds||y||p>=v||l.dragging)&&u.push(l)}return u},v1=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function p1(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function y1({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:o},a){if(e.size===0)return Promise.resolve(!0);const s=p1(e,a),u=fr(s),l=Hc(u,t,n,a?.minZoom??i,a?.maxZoom??o,a?.padding??.1);return await r.setViewport(l,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function py({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:o}){const a=n.get(e),s=a.parentId?n.get(a.parentId):void 0,{x:u,y:l}=s?s.internals.positionAbsolute:{x:0,y:0},c=a.origin??r;let d=a.extent||i;if(a.extent==="parent"&&!a.expandParent)if(!s)o?.("005",fn.error005());else{const h=s.measured.width,m=s.measured.height;h&&m&&(d=[[u,l],[u+h,l+m]])}else s&&Vt(a.extent)&&(d=[[a.extent[0][0]+u,a.extent[0][1]+l],[a.extent[1][0]+u,a.extent[1][1]+l]]);const f=Vt(d)?bt(t,d,a.measured):t;return(a.measured.width===void 0||a.measured.height===void 0)&&o?.("015",fn.error015()),{position:{x:f.x-u+(a.measured.width??0)*c[0],y:f.y-l+(a.measured.height??0)*c[1]},positionAbsolute:f}}async function m1({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),a=[];for(const f of n){if(f.deletable===!1)continue;const h=o.has(f.id),m=!h&&f.parentId&&a.find(p=>p.id===f.parentId);(h||m)&&a.push(f)}const s=new Set(t.map(f=>f.id)),u=r.filter(f=>f.deletable!==!1),c=v1(a,u);for(const f of u)s.has(f.id)&&!c.find(m=>m.id===f.id)&&c.push(f);if(!i)return{edges:c,nodes:a};const d=await i({nodes:a,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:a}:{edges:[],nodes:[]}:d}const Ht=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),bt=(e={x:0,y:0},t,n)=>({x:Ht(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Ht(e.y,t[0][1],t[1][1]-(n?.height??0))});function yy(e,t,n){const{width:r,height:i}=Et(n),{x:o,y:a}=n.internals.positionAbsolute;return bt(e,[[o,a],[o+r,a+i]],t)}const Hl=(e,t,n)=>e<t?Ht(Math.abs(e-t),1,t)/t:e>n?-Ht(Math.abs(e-n),1,t)/t:0,my=(e,t,n=15,r=40)=>{const i=Hl(e.x,r,t.width-r)*n,o=Hl(e.y,r,t.height-r)*n;return[i,o]},hr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Sc=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),gr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Bt=(e,t=[0,0])=>{const{x:n,y:r}=zc(e)?e.internals.positionAbsolute:mn(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Jn=(e,t=[0,0])=>{const{x:n,y:r}=zc(e)?e.internals.positionAbsolute:mn(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},_1=(e,t)=>gr(hr(Sc(e),Sc(t))),hn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Bl=e=>nt(e.width)&&nt(e.height)&&nt(e.x)&&nt(e.y),nt=e=>!isNaN(e)&&isFinite(e),b1=(e,t)=>{},_n=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),bn=({x:e,y:t},[n,r,i],o=!1,a=[1,1])=>{const s={x:(e-n)/i,y:(t-r)/i};return o?_n(s,a):s},Qn=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Tt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function w1(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Tt(e,n),i=Tt(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Tt(e.top??e.y??0,n),i=Tt(e.bottom??e.y??0,n),o=Tt(e.left??e.x??0,t),a=Tt(e.right??e.x??0,t);return{top:r,right:a,bottom:i,left:o,x:o+a,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function x1(e,t,n,r,i,o){const{x:a,y:s}=Qn(e,[t,n,r]),{x:u,y:l}=Qn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),c=i-u,d=o-l;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(c),bottom:Math.floor(d)}}const Hc=(e,t,n,r,i,o)=>{const a=w1(o,t,n),s=(t-a.x)/e.width,u=(n-a.y)/e.height,l=Math.min(s,u),c=Ht(l,r,i),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,p=x1(e,h,m,c,t,n),v={left:Math.min(p.left-a.left,0),top:Math.min(p.top-a.top,0),right:Math.min(p.right-a.right,0),bottom:Math.min(p.bottom-a.bottom,0)};return{x:h-v.left+v.right,y:m-v.top+v.bottom,zoom:c}},$n=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vt(e){return e!=null&&e!=="parent"}function Et(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function E1(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function S1(e,t={width:0,height:0},n,r,i){const o={...e},a=r.get(n);if(a){const s=a.origin||i;o.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return o}function C1(e){return{...l1,...e||{}}}function Vr(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:o,y:a}=Fe(e),s=bn({x:o-(i?.left??0),y:a-(i?.top??0)},r),{x:u,y:l}=n?_n(s,t):s;return{xSnapped:u,ySnapped:l,...s}}const _y=e=>({width:e.offsetWidth,height:e.offsetHeight}),by=e=>e?.getRootNode?.()||window?.document,q1=["INPUT","SELECT","TEXTAREA"];function wy(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:q1.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const xy=e=>"clientX"in e,Fe=(e,t)=>{const n=xy(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},Vl=(e,t,n,r,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:i,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/r,y:(s.top-n.top)/r,..._y(a)}})};function R1({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const u=e*.125+i*.375+a*.375+n*.125,l=t*.125+o*.375+s*.375+r*.125,c=Math.abs(u-e),d=Math.abs(l-t);return[u,l,c,d]}function Nn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Gl({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case Q.Left:return[t-Nn(t-r,o),n];case Q.Right:return[t+Nn(r-t,o),n];case Q.Top:return[t,n-Nn(n-i,o)];case Q.Bottom:return[t,n+Nn(i-n,o)]}}function Ey({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:i,targetPosition:o=Q.Top,curvature:a=.25}){const[s,u]=Gl({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[l,c]=Gl({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,m]=R1({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${u} ${l},${c} ${r},${i}`,d,f,h,m]}function Sy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function A1({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const o=i&&n?1e3:0,a=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return o+a}function k1({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const o=hr(Jn(e),Jn(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return hn(a,gr(o))>0}const I1=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,T1=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),P1=(e,t)=>{if(!e.source||!e.target)return t;let n;return vy(e)?n={...e}:n={...e,id:I1(e)},T1(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Cy({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=Sy({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const Kl={[Q.Left]:{x:-1,y:0},[Q.Right]:{x:1,y:0},[Q.Top]:{x:0,y:-1},[Q.Bottom]:{x:0,y:1}},N1=({source:e,sourcePosition:t=Q.Bottom,target:n})=>t===Q.Left||t===Q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jl=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function O1({source:e,sourcePosition:t=Q.Bottom,target:n,targetPosition:r=Q.Top,center:i,offset:o,stepPosition:a}){const s=Kl[t],u=Kl[r],l={x:e.x+s.x*o,y:e.y+s.y*o},c={x:n.x+u.x*o,y:n.y+u.y*o},d=N1({source:l,sourcePosition:t,target:c}),f=d.x!==0?"x":"y",h=d[f];let m=[],p,v;const y={x:0,y:0},b={x:0,y:0},[,,x,_]=Sy({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*u[f]===-1){f==="x"?(p=i.x??l.x+(c.x-l.x)*a,v=i.y??(l.y+c.y)/2):(p=i.x??(l.x+c.x)/2,v=i.y??l.y+(c.y-l.y)*a);const C=[{x:p,y:l.y},{x:p,y:c.y}],A=[{x:l.x,y:v},{x:c.x,y:v}];s[f]===h?m=f==="x"?C:A:m=f==="x"?A:C}else{const C=[{x:l.x,y:c.y}],A=[{x:c.x,y:l.y}];if(f==="x"?m=s.x===h?A:C:m=s.y===h?C:A,t===r){const E=Math.abs(e[f]-n[f]);if(E<=o){const R=Math.min(o-1,o-E);s[f]===h?y[f]=(l[f]>e[f]?-1:1)*R:b[f]=(c[f]>n[f]?-1:1)*R}}if(t!==r){const E=f==="x"?"y":"x",R=s[f]===u[E],w=l[E]>c[E],k=l[E]<c[E];(s[f]===1&&(!R&&w||R&&k)||s[f]!==1&&(!R&&k||R&&w))&&(m=f==="x"?C:A)}const P={x:l.x+y.x,y:l.y+y.y},O={x:c.x+b.x,y:c.y+b.y},M=Math.max(Math.abs(P.x-m[0].x),Math.abs(O.x-m[0].x)),S=Math.max(Math.abs(P.y-m[0].y),Math.abs(O.y-m[0].y));M>=S?(p=(P.x+O.x)/2,v=m[0].y):(p=m[0].x,v=(P.y+O.y)/2)}return[[e,{x:l.x+y.x,y:l.y+y.y},...m,{x:c.x+b.x,y:c.y+b.y},n],p,v,x,_]}function M1(e,t,n,r){const i=Math.min(jl(e,t)/2,jl(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const l=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*l},${a}Q ${o},${a} ${o},${a+i*c}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${o},${a+i*u}Q ${o},${a} ${o+i*s},${a}`}function Bc({sourceX:e,sourceY:t,sourcePosition:n=Q.Bottom,targetX:r,targetY:i,targetPosition:o=Q.Top,borderRadius:a=5,centerX:s,centerY:u,offset:l=20,stepPosition:c=.5}){const[d,f,h,m,p]=O1({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:u},offset:l,stepPosition:c});return[d.reduce((y,b,x)=>{let _="";return x>0&&x<d.length-1?_=M1(d[x-1],b,d[x+1],a):_=`${x===0?"M":"L"}${b.x} ${b.y}`,y+=_,y},""),f,h,m,p]}function Ul(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function D1(e){const{sourceNode:t,targetNode:n}=e;if(!Ul(t)||!Ul(n))return null;const r=t.internals.handleBounds||Yl(t.handles),i=n.internals.handleBounds||Yl(n.handles),o=Zl(r?.source??[],e.sourceHandle),a=Zl(e.connectionMode===Ft.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!o||!a)return e.onError?.("008",fn.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=o?.position||Q.Bottom,u=a?.position||Q.Top,l=gn(t,o,s),c=gn(n,a,u);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y,sourcePosition:s,targetPosition:u}}function Yl(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function gn(e,t,n=Q.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Et(e);if(r)return{x:i+a/2,y:o+s/2};switch(t?.position??n){case Q.Top:return{x:i+a/2,y:o};case Q.Right:return{x:i+a,y:o+s/2};case Q.Bottom:return{x:i+a/2,y:o+s};case Q.Left:return{x:i,y:o+s/2}}}function Zl(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Cc(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function L1(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const o=new Set;return e.reduce((a,s)=>([s.markerStart||r,s.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const l=Cc(u,t);o.has(l)||(a.push({id:l,color:u.color||n,...u}),o.add(l))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const qy=1e3,z1=10,Vc={nodeOrigin:[0,0],nodeExtent:xc,elevateNodesOnSelect:!0,defaults:{}},F1={...Vc,checkEquality:!0};function Gc(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function H1(e,t,n){const r=Gc(Vc,n);for(const i of e.values())if(i.parentId)Kc(i,e,t,r);else{const o=mn(i,r.nodeOrigin),a=Vt(i.extent)?i.extent:r.nodeExtent,s=bt(o,a,Et(i));i.internals.positionAbsolute=s}}function B1(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(o):i.type==="target"&&r.push(o)}return{source:n,target:r}}function V1(e,t,n,r){const i=Gc(F1,r);let o={i:-1},a=e.length>0;const s=new Map(t),u=i?.elevateNodesOnSelect?qy:0;t.clear(),n.clear();for(const l of e){let c=s.get(l.id);if(i.checkEquality&&l===c?.internals.userNode)t.set(l.id,c);else{const d=mn(l,i.nodeOrigin),f=Vt(l.extent)?l.extent:i.nodeExtent,h=bt(d,f,Et(l));c={...i.defaults,...l,measured:{width:l.measured?.width,height:l.measured?.height},internals:{positionAbsolute:h,handleBounds:B1(l,c),z:Ry(l,u),userNode:l}},t.set(l.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(a=!1),l.parentId&&Kc(c,t,n,r,o)}return a}function G1(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Kc(e,t,n,r,i){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:s}=Gc(Vc,r),u=e.parentId,l=t.get(u);if(!l){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}G1(e,n),i&&!l.parentId&&l.internals.rootParentIndex===void 0&&(l.internals.rootParentIndex=++i.i,l.internals.z=l.internals.z+i.i*z1),i&&l.internals.rootParentIndex!==void 0&&(i.i=l.internals.rootParentIndex);const c=o?qy:0,{x:d,y:f,z:h}=K1(e,l,a,s,c),{positionAbsolute:m}=e.internals,p=d!==m.x||f!==m.y;(p||h!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:f}:m,z:h}})}function Ry(e,t){return(nt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function K1(e,t,n,r,i){const{x:o,y:a}=t.internals.positionAbsolute,s=Et(e),u=mn(e,n),l=Vt(e.extent)?bt(u,e.extent,s):u;let c=bt({x:o+l.x,y:a+l.y},r,s);e.extent==="parent"&&(c=yy(c,s,t));const d=Ry(e,i),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>=d?f+1:d}}function j1(e,t,n,r=[0,0]){const i=[],o=new Map;for(const a of e){const s=t.get(a.parentId);if(!s)continue;const u=o.get(a.parentId)?.expandedRect??Bt(s),l=_1(u,a.rect);o.set(a.parentId,{expandedRect:l,parent:s})}return o.size>0&&o.forEach(({expandedRect:a,parent:s},u)=>{const l=s.internals.positionAbsolute,c=Et(s),d=s.origin??r,f=a.x<l.x?Math.round(Math.abs(l.x-a.x)):0,h=a.y<l.y?Math.round(Math.abs(l.y-a.y)):0,m=Math.max(c.width,Math.round(a.width)),p=Math.max(c.height,Math.round(a.height)),v=(m-c.width)*d[0],y=(p-c.height)*d[1];(f>0||h>0||v||y)&&(i.push({id:u,type:"position",position:{x:s.position.x-f+v,y:s.position.y-h+y}}),n.get(u)?.forEach(b=>{e.some(x=>x.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+f,y:b.position.y+h}})})),(c.width<a.width||c.height<a.height||f||h)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:m+(f?d[0]*f-v:0),height:p+(h?d[1]*h-y:0)}})}),i}function U1(e,t,n,r,i,o){const a=r?.querySelector(".xyflow__viewport");let s=!1;if(!a)return{changes:[],updatedInternals:s};const u=[],l=window.getComputedStyle(a),{m22:c}=new window.DOMMatrixReadOnly(l.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),s=!0;continue}const m=_y(f.nodeElement),p=h.measured.width!==m.width||h.measured.height!==m.height;if(!!(m.width&&m.height&&(p||!h.internals.handleBounds||f.force))){const y=f.nodeElement.getBoundingClientRect(),b=Vt(h.extent)?h.extent:o;let{positionAbsolute:x}=h.internals;h.parentId&&h.extent==="parent"?x=yy(x,m,t.get(h.parentId)):b&&(x=bt(x,b,m));const _={...h,measured:m,internals:{...h.internals,positionAbsolute:x,handleBounds:{source:Vl("source",f.nodeElement,y,c,h.id),target:Vl("target",f.nodeElement,y,c,h.id)}}};t.set(h.id,_),h.parentId&&Kc(_,t,n,{nodeOrigin:i}),s=!0,p&&(u.push({id:h.id,type:"dimensions",dimensions:m}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:Bt(_,i)}))}}if(d.length>0){const f=j1(d,t,n,i);u.push(...f)}return{changes:u,updatedInternals:s}}async function Y1({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,o]],r),s=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(s)}function Wl(e,t,n,r,i,o){let a=i;const s=r.get(a)||new Map;r.set(a,s.set(n,t)),a=`${i}-${e}`;const u=r.get(a)||new Map;if(r.set(a,u.set(n,t)),o){a=`${i}-${e}-${o}`;const l=r.get(a)||new Map;r.set(a,l.set(n,t))}}function Z1(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:o,sourceHandle:a=null,targetHandle:s=null}=r,u={edgeId:r.id,source:i,target:o,sourceHandle:a,targetHandle:s},l=`${i}-${a}--${o}-${s}`,c=`${o}-${s}--${i}-${a}`;Wl("source",u,c,e,i,a),Wl("target",u,l,e,o,s),t.set(r.id,r)}}function Ay(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ay(n,t):!1}function Xl(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function W1(e,t,n,r){const i=new Map;for(const[o,a]of e)if((a.selected||a.id===r)&&(!a.parentId||!Ay(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(o);s&&i.set(o,{id:o,position:s.position||{x:0,y:0},distance:{x:n.x-s.internals.positionAbsolute.x,y:n.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return i}function Gr({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[a,s]of t){const u=n.get(a)?.internals.userNode;u&&i.push({...u,position:s.position,dragging:r})}if(!e)return[i[0],i];const o=n.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:r}:i[0],i]}function X1({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const o={x:n-i.distance.x,y:r-i.distance.y},a=_n(o,t);return{x:a.x-o.x,y:a.y-o.y}}function J1({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let o={x:null,y:null},a=0,s=new Map,u=!1,l={x:0,y:0},c=null,d=!1,f=null,h=!1,m=!1,p=null;function v({noDragClassName:b,handleSelector:x,domNode:_,isSelectable:q,nodeId:C,nodeClickDistance:A=0}){f=Le(_);function P({x:E,y:R}){const{nodeLookup:w,nodeExtent:k,snapGrid:T,snapToGrid:z,nodeOrigin:B,onNodeDrag:F,onSelectionDrag:H,onError:K,updateNodePositions:U}=t();o={x:E,y:R};let Z=!1;const N=s.size>1,D=N&&k?Sc(fr(s)):null,L=N&&z?X1({dragItems:s,snapGrid:T,x:E,y:R}):null;for(const[V,G]of s){if(!w.has(V))continue;let X={x:E-G.distance.x,y:R-G.distance.y};z&&(X=L?{x:Math.round(X.x+L.x),y:Math.round(X.y+L.y)}:_n(X,T));let ee=null;if(N&&k&&!G.extent&&D){const{positionAbsolute:$}=G.internals,de=$.x-D.x+k[0][0],te=$.x+G.measured.width-D.x2+k[1][0],Ie=$.y-D.y+k[0][1],ne=$.y+G.measured.height-D.y2+k[1][1];ee=[[de,Ie],[te,ne]]}const{position:J,positionAbsolute:xe}=py({nodeId:V,nextPosition:X,nodeLookup:w,nodeExtent:ee||k,nodeOrigin:B,onError:K});Z=Z||G.position.x!==J.x||G.position.y!==J.y,G.position=J,G.internals.positionAbsolute=xe}if(m=m||Z,!!Z&&(U(s,!0),p&&(r||F||!C&&H))){const[V,G]=Gr({nodeId:C,dragItems:s,nodeLookup:w});r?.(p,s,V,G),F?.(p,V,G),C||H?.(p,G)}}async function O(){if(!c)return;const{transform:E,panBy:R,autoPanSpeed:w,autoPanOnNodeDrag:k}=t();if(!k){u=!1,cancelAnimationFrame(a);return}const[T,z]=my(l,c,w);(T!==0||z!==0)&&(o.x=(o.x??0)-T/E[2],o.y=(o.y??0)-z/E[2],await R({x:T,y:z})&&P(o)),a=requestAnimationFrame(O)}function M(E){const{nodeLookup:R,multiSelectionActive:w,nodesDraggable:k,transform:T,snapGrid:z,snapToGrid:B,selectNodesOnDrag:F,onNodeDragStart:H,onSelectionDragStart:K,unselectNodesAndEdges:U}=t();d=!0,(!F||!q)&&!w&&C&&(R.get(C)?.selected||U()),q&&F&&C&&e?.(C);const Z=Vr(E.sourceEvent,{transform:T,snapGrid:z,snapToGrid:B,containerBounds:c});if(o=Z,s=W1(R,k,Z,C),s.size>0&&(n||H||!C&&K)){const[N,D]=Gr({nodeId:C,dragItems:s,nodeLookup:R});n?.(E.sourceEvent,s,N,D),H?.(E.sourceEvent,N,D),C||K?.(E.sourceEvent,D)}}const S=pb().clickDistance(A).on("start",E=>{const{domNode:R,nodeDragThreshold:w,transform:k,snapGrid:T,snapToGrid:z}=t();c=R?.getBoundingClientRect()||null,h=!1,m=!1,p=E.sourceEvent,w===0&&M(E),o=Vr(E.sourceEvent,{transform:k,snapGrid:T,snapToGrid:z,containerBounds:c}),l=Fe(E.sourceEvent,c)}).on("drag",E=>{const{autoPanOnNodeDrag:R,transform:w,snapGrid:k,snapToGrid:T,nodeDragThreshold:z,nodeLookup:B}=t(),F=Vr(E.sourceEvent,{transform:w,snapGrid:k,snapToGrid:T,containerBounds:c});if(p=E.sourceEvent,(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1||C&&!B.has(C))&&(h=!0),!h){if(!u&&R&&d&&(u=!0,O()),!d){const H=Fe(E.sourceEvent,c),K=H.x-l.x,U=H.y-l.y;Math.sqrt(K*K+U*U)>z&&M(E)}(o.x!==F.xSnapped||o.y!==F.ySnapped)&&s&&d&&(l=Fe(E.sourceEvent,c),P(F))}}).on("end",E=>{if(!(!d||h)&&(u=!1,d=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:R,updateNodePositions:w,onNodeDragStop:k,onSelectionDragStop:T}=t();if(m&&(w(s,!1),m=!1),i||k||!C&&T){const[z,B]=Gr({nodeId:C,dragItems:s,nodeLookup:R,dragging:!1});i?.(E.sourceEvent,s,z,B),k?.(E.sourceEvent,z,B),C||T?.(E.sourceEvent,B)}}}).filter(E=>{const R=E.target;return!E.button&&(!b||!Xl(R,`.${b}`,_))&&(!x||Xl(R,x,_))});f.call(S)}function y(){f?.on(".drag",null)}return{update:v,destroy:y}}function Q1(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())hn(i,Bt(o))>0&&r.push(o);return r}const $1=250;function ex(e,t,n,r){let i=[],o=1/0;const a=Q1(e,n,t+$1);for(const s of a){const u=[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]];for(const l of u){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:c,y:d}=gn(s,l,l.position,!0),f=Math.sqrt(Math.pow(c-e.x,2)+Math.pow(d-e.y,2));f>t||(f<o?(i=[{...l,x:c,y:d}],o=f):f===o&&i.push({...l,x:c,y:d}))}}if(!i.length)return null;if(i.length>1){const s=r.type==="source"?"target":"source";return i.find(u=>u.type===s)??i[0]}return i[0]}function ky(e,t,n,r,i,o=!1){const a=r.get(e);if(!a)return null;const s=i==="strict"?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],u=(n?s?.find(l=>l.id===n):s?.[0])??null;return u&&o?{...u,...gn(a,u,u.position,!0)}:u}function Iy(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function tx(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ty=()=>!0;function nx(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:u,lib:l,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:m,onConnect:p,onConnectEnd:v,isValidConnection:y=Ty,onReconnectEnd:b,updateConnection:x,getTransform:_,getFromHandle:q,autoPanSpeed:C,dragThreshold:A=1,handleDomNode:P}){const O=by(e.target);let M=0,S;const{x:E,y:R}=Fe(e),w=Iy(o,P),k=s?.getBoundingClientRect();let T=!1;if(!k||!w)return;const z=ky(i,w,r,u,t);if(!z)return;let B=Fe(e,k),F=!1,H=null,K=!1,U=null;function Z(){if(!c||!k)return;const[J,xe]=my(B,k,C);f({x:J,y:xe}),M=requestAnimationFrame(Z)}const N={...z,nodeId:i,type:w,position:z.position},D=u.get(i);let V={inProgress:!0,isValid:null,from:gn(D,N,Q.Left,!0),fromHandle:N,fromPosition:N.position,fromNode:D,to:B,toHandle:null,toPosition:zl[N.position],toNode:null,pointer:B};function G(){T=!0,x(V),m?.(e,{nodeId:i,handleId:r,handleType:w})}A===0&&G();function X(J){if(!T){const{x:te,y:Ie}=Fe(J),ne=te-E,ae=Ie-R;if(!(ne*ne+ae*ae>A*A))return;G()}if(!q()||!N){ee(J);return}const xe=_();B=Fe(J,k),S=ex(bn(B,xe,!1,[1,1]),n,u,N),F||(Z(),F=!0);const $=Py(J,{handle:S,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:a?"target":"source",isValidConnection:y,doc:O,lib:l,flowId:d,nodeLookup:u});U=$.handleDomNode,H=$.connection,K=tx(!!S,$.isValid);const de={...V,isValid:K,to:$.toHandle&&K?Qn({x:$.toHandle.x,y:$.toHandle.y},xe):B,toHandle:$.toHandle,toPosition:K&&$.toHandle?$.toHandle.position:zl[N.position],toNode:$.toHandle?u.get($.toHandle.nodeId):null,pointer:B};x(de),V=de}function ee(J){if(!("touches"in J&&J.touches.length>0)){if(T){(S||U)&&H&&K&&p?.(H);const{inProgress:xe,...$}=V,de={...$,toPosition:V.toHandle?V.toPosition:null};v?.(J,de),o&&b?.(J,de)}h(),cancelAnimationFrame(M),F=!1,K=!1,H=null,U=null,O.removeEventListener("mousemove",X),O.removeEventListener("mouseup",ee),O.removeEventListener("touchmove",X),O.removeEventListener("touchend",ee)}}O.addEventListener("mousemove",X),O.addEventListener("mouseup",ee),O.addEventListener("touchmove",X),O.addEventListener("touchend",ee)}function Py(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:o,doc:a,lib:s,flowId:u,isValidConnection:l=Ty,nodeLookup:c}){const d=o==="target",f=t?a.querySelector(`.${s}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y:m}=Fe(e),p=a.elementFromPoint(h,m),v=p?.classList.contains(`${s}-flow__handle`)?p:f,y={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const b=Iy(void 0,v),x=v.getAttribute("data-nodeid"),_=v.getAttribute("data-handleid"),q=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!x||!b)return y;const A={source:d?x:r,sourceHandle:d?_:i,target:d?r:x,targetHandle:d?i:_};y.connection=A;const O=q&&C&&(n===Ft.Strict?d&&b==="source"||!d&&b==="target":x!==r||_!==i);y.isValid=O&&l(A),y.toHandle=ky(x,b,_,c,n,!0)}return y}const Jl={onPointerDown:nx,isValid:Py},vr=e=>({x:e.x,y:e.y,zoom:e.k}),Kr=({x:e,y:t,zoom:n})=>dr.translate(e,t).scale(n),Nt=(e,t)=>e.target.closest(`.${t}`),Ny=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),rx=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,jr=(e,t=0,n=rx,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Oy=e=>{const t=e.ctrlKey&&$n()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ix({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:l}){return c=>{if(Nt(c,t))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&a){const v=je(c),y=Oy(c),b=d*Math.pow(2,y);r.scaleTo(n,b,v,c);return}const f=c.deltaMode===1?20:1;let h=i===Dt.Vertical?0:c.deltaX*f,m=i===Dt.Horizontal?0:c.deltaY*f;!$n()&&c.shiftKey&&i!==Dt.Vertical&&(h=c.deltaY*f,m=0),r.translateBy(n,-(h/d)*o,-(m/d)*o,{internal:!0});const p=vr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(u?.(c,p),e.panScrollTimeout=setTimeout(()=>{l?.(c,p),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(c,p))}}function ox({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const o=r.type==="wheel",a=!t&&o&&!r.ctrlKey,s=Nt(r,e);if(r.ctrlKey&&o&&s&&r.preventDefault(),a||s)return null;r.preventDefault(),n.call(this,r,i)}}function ax({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=vr(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function sx({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return o=>{e.usedRightMouseButton=!!(n&&Ny(t,e.mouseButton??0)),o.sourceEvent?.sync||r([o.transform.x,o.transform.y,o.transform.k]),i&&!o.sourceEvent?.internal&&i?.(o.sourceEvent,vr(o.transform))}}function ux({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:o}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&Ny(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const s=vr(a.transform);e.prevViewport=s,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(a.sourceEvent,s)},n?150:0)}}}function cx({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:u,lib:l,connectionInProgress:c}){return d=>{const f=e||t,h=n&&d.ctrlKey,m=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(Nt(d,`${l}-flow__node`)||Nt(d,`${l}-flow__edge`)))return!0;if(!r&&!f&&!i&&!o&&!n||a||c&&!m||Nt(d,s)&&m||Nt(d,u)&&(!m||i&&m&&!e)||!n&&d.ctrlKey&&m)return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!i&&!h&&m||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||m)&&p}}function lx({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:s,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=e.getBoundingClientRect(),d=c1().scaleExtent([t,n]).translateExtent(r),f=Le(e).call(d);b({x:i.x,y:i.y,zoom:Ht(i.zoom,t,n)},[[0,0],[c.width,c.height]],r);const h=f.on("wheel.zoom"),m=f.on("dblclick.zoom");d.wheelDelta(Oy);function p(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:zn).transform(jr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function v({noWheelClassName:S,noPanClassName:E,onPaneContextMenu:R,userSelectionActive:w,panOnScroll:k,panOnDrag:T,panOnScrollMode:z,panOnScrollSpeed:B,preventScrolling:F,zoomOnPinch:H,zoomOnScroll:K,zoomOnDoubleClick:U,zoomActivationKeyPressed:Z,lib:N,onTransformChange:D,connectionInProgress:L,paneClickDistance:V,selectionOnDrag:G}){w&&!l.isZoomingOrPanning&&y();const X=k&&!Z&&!w;d.clickDistance(G?1/0:!nt(V)||V<0?0:V);const ee=X?ix({zoomPanValues:l,noWheelClassName:S,d3Selection:f,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:B,zoomOnPinch:H,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:s}):ox({noWheelClassName:S,preventScrolling:F,d3ZoomHandler:h});if(f.on("wheel.zoom",ee,{passive:!1}),!w){const xe=ax({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:a});d.on("start",xe);const $=sx({zoomPanValues:l,panOnDrag:T,onPaneContextMenu:!!R,onPanZoom:o,onTransformChange:D});d.on("zoom",$);const de=ux({zoomPanValues:l,panOnDrag:T,panOnScroll:k,onPaneContextMenu:R,onPanZoomEnd:s,onDraggingChange:u});d.on("end",de)}const J=cx({zoomActivationKeyPressed:Z,panOnDrag:T,zoomOnScroll:K,panOnScroll:k,zoomOnDoubleClick:U,zoomOnPinch:H,userSelectionActive:w,noPanClassName:E,noWheelClassName:S,lib:N,connectionInProgress:L});d.filter(J),U?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)}function y(){d.on("zoom",null)}async function b(S,E,R){const w=Kr(S),k=d?.constrain()(w,E,R);return k&&await p(k),new Promise(T=>T(k))}async function x(S,E){const R=Kr(S);return await p(R,E),new Promise(w=>w(R))}function _(S){if(f){const E=Kr(S),R=f.property("__zoom");(R.k!==S.zoom||R.x!==S.x||R.y!==S.y)&&d?.transform(f,E,null,{sync:!0})}}function q(){const S=f?hy(f.node()):{x:0,y:0,k:1};return{x:S.x,y:S.y,zoom:S.k}}function C(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:zn).scaleTo(jr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function A(S,E){return f?new Promise(R=>{d?.interpolate(E?.interpolate==="linear"?on:zn).scaleBy(jr(f,E?.duration,E?.ease,()=>R(!0)),S)}):Promise.resolve(!1)}function P(S){d?.scaleExtent(S)}function O(S){d?.translateExtent(S)}function M(S){const E=!nt(S)||S<0?0:S;d?.clickDistance(E)}return{update:v,destroy:y,setViewport:x,setViewportConstrained:b,getViewport:q,scaleTo:C,scaleBy:A,setScaleExtent:P,setTranslateExtent:O,syncViewport:_,setClickDistance:M}}var Ql;(function(e){e.Line="line",e.Handle="handle"})(Ql||(Ql={}));var dx=le("<div><!></div>");function Gt(e,t){ie(t,!0);let n=Y(t,"id",3,null),r=Y(t,"type",3,"source"),i=Y(t,"position",19,()=>Q.Top),o=Y(t,"isConnectableStart",3,!0),a=Y(t,"isConnectableEnd",3,!0),s=xt(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const u=an("svelteflow__node_id"),l=an("svelteflow__node_connectable");let c=I(()=>r()==="target"),d=I(()=>t.isConnectable!==void 0?t.isConnectable:l.value),f=St(),h=I(()=>f.ariaLabelConfig),m=null;m_(()=>{if(t.onconnect||t.ondisconnect){f.edges;let E=f.connectionLookup.get(`${u}-${r()}${n()?`-${n()}`:""}`);if(m&&!d1(E,m)){const R=E??new Map;Fl(m,R,t.ondisconnect),Fl(R,m,t.onconnect)}m=new Map(E)}});let p=I(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:E,toHandle:R,isValid:w}=f.connection,k=E&&E.nodeId===u&&E.type===r()&&E.id===n(),T=R&&R.nodeId===u&&R.type===r()&&R.id===n(),z=f.connectionMode===Ft.Strict?E?.type!==r():u!==E?.nodeId||n()!==E?.id;return[!0,k,T,z,T&&w]}),v=I(()=>vn(g(p),5)),y=I(()=>g(v)[0]),b=I(()=>g(v)[1]),x=I(()=>g(v)[2]),_=I(()=>g(v)[3]),q=I(()=>g(v)[4]);function C(E){const R=f.onbeforeconnect?f.onbeforeconnect(E):E;R&&(f.addEdge(R),f.onconnect?.(E))}function A(E){const R=xy(E);E.currentTarget&&(R&&E.button===0||!R)&&Jl.onPointerDown(E,{handleId:n(),nodeId:u,isTarget:g(c),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:C,onConnectStart:(w,k)=>{f.onconnectstart?.(w,{nodeId:k.nodeId,handleId:k.handleId,handleType:k.handleType})},onConnectEnd:(w,k)=>{f.onconnectend?.(w,k)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:E.currentTarget})}function P(E){if(!u||!f.clickConnectStartHandle&&!o())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(E,{nodeId:u,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:u,type:r(),id:n()};return}const R=by(E.target),w=t.isValidConnection??f.isValidConnection,{connectionMode:k,clickConnectStartHandle:T,flowId:z,nodeLookup:B}=f,{connection:F,isValid:H}=Jl.isValid(E,{handle:{nodeId:u,id:n(),type:r()},connectionMode:k,fromNodeId:T.nodeId,fromHandleId:T.id??null,fromType:T.type,isValidConnection:w,flowId:z,doc:R,lib:"svelte",nodeLookup:B});H&&F&&C(F);const K=structuredClone(Fp(f.connection));delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,f.onclickconnectend?.(E,K),f.clickConnectStartHandle=null}var O=dx(),M=()=>{};dt(O,()=>({"data-handleid":n(),"data-nodeid":u,"data-handlepos":i(),"data-id":`${f.flowId??""}-${u??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:A,ontouchstart:A,onclick:f.clickConnect?P:void 0,onkeypress:M,style:t.style,role:"button","aria-label":g(h)["handle.ariaLabel"],tabindex:"-1",...s,[Ac]:{valid:g(q),connectingto:g(x),connectingfrom:g(b),source:!g(c),target:g(c),connectablestart:o(),connectableend:a(),connectable:g(d),connectionindicator:g(d)&&(!g(y)||g(_))&&(g(y)||f.clickConnectStartHandle?a():o())}}));var S=ue(O);Te(S,()=>t.children??wt),re(O),W(e,O),oe()}var fx=le("<!> <!>",1);function My(e,t){ie(t,!0);let n=Y(t,"targetPosition",19,()=>Q.Top),r=Y(t,"sourcePosition",19,()=>Q.Bottom);var i=fx(),o=he(i);Gt(o,{type:"target",get position(){return n()}});var a=se(o),s=se(a);Gt(s,{type:"source",get position(){return r()}}),pe(()=>rt(a,` ${t.data?.label??""} `)),W(e,i),oe()}var hx=le(" <!>",1);function gx(e,t){ie(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),r=Y(t,"sourcePosition",19,()=>Q.Bottom);or();var i=hx(),o=he(i),a=se(o);Gt(a,{type:"source",get position(){return r()}}),pe(()=>rt(o,`${n()?.label??""} `)),W(e,i),oe()}var vx=le(" <!>",1);function px(e,t){ie(t,!0);let n=Y(t,"data",19,()=>({label:"Node"})),r=Y(t,"targetPosition",19,()=>Q.Top);or();var i=vx(),o=he(i),a=se(o);Gt(a,{type:"target",get position(){return r()}}),pe(()=>rt(o,`${n()?.label??""} `)),W(e,i),oe()}function yx(e,t){}function Ur(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function mx(e,t){const n=I(St),r=I(()=>g(n).domNode);let i;return g(r)?Ur(e,g(r),t):i=zp(()=>{yt(()=>{Ur(e,g(r),t),i?.()})}),{async update(o){Ur(e,g(r),o)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i?.()}}}function _x(){let e=_e(typeof window>"u");if(g(e)){const t=zp(()=>{yt(()=>{j(e,!1),t?.()})})}return{get value(){return g(e)}}}const $l=e=>h1(e),bx=e=>vy(e);function Xe(e){return e===void 0?void 0:`${e}px`}const er={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var wx=le("<div><!></div>");function xx(e,t){ie(t,!0);let n=Y(t,"x",3,0),r=Y(t,"y",3,0),i=Y(t,"selectEdgeOnClick",3,!1),o=Y(t,"transparent",3,!1),a=xt(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const s=St(),u=an("svelteflow__edge_id");if(!u)throw new Error("EdgeLabel must be used within an edge");let l=I(()=>s.visible.edges.get(u)?.zIndex);var c=wx(),d=()=>{i()&&s.handleEdgeSelection(u)};dt(c,h=>({class:["svelte-flow__edge-label",{transparent:o()},t.class],tabindex:"-1",onclick:d,...a,[ar]:h}),[()=>({display:_x().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:Xe(t.width),height:Xe(t.height),"z-index":g(l)})],void 0,void 0,"svelte-1wg91mu");var f=ue(c);Te(f,()=>t.children??wt),re(c),qe(c,(h,m)=>mx?.(h,m),()=>"edge-labels"),W(e,c),oe()}var Ex=be("<path></path>"),Sx=be('<path fill="none"></path><!><!>',1);function pr(e,t){let n=Y(t,"interactionWidth",3,20),r=xt(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=Sx(),o=he(i),a=se(o);{var s=c=>{var d=Ex();dt(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),W(c,d)};ve(a,c=>{n()>0&&c(s)})}var u=se(a);{var l=c=>{xx(c,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,f)=>{or();var h=Ap();pe(()=>rt(h,t.label)),W(d,h)},$$slots:{default:!0}})};ve(u,c=>{t.label&&c(l)})}pe(()=>{ce(o,"id",t.id),ce(o,"d",t.path),Ze(o,0,jt(["svelte-flow__edge-path",t.class])),ce(o,"marker-start",t.markerStart),ce(o,"marker-end",t.markerEnd),We(o,t.style)}),W(e,i)}function Dy(e,t){ie(t,!0);let n=I(()=>Ey({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),r=I(()=>vn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);pr(e,{get id(){return t.id},get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),oe()}function Cx(e,t){ie(t,!0);let n=I(()=>Bc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=I(()=>vn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);pr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),oe()}function qx(e,t){ie(t,!0);let n=I(()=>Cy({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=I(()=>vn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);pr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),oe()}function Rx(e,t){ie(t,!0);let n=I(()=>Bc({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=I(()=>vn(g(n),3)),i=I(()=>g(r)[0]),o=I(()=>g(r)[1]),a=I(()=>g(r)[2]);pr(e,{get path(){return g(i)},get labelX(){return g(o)},get labelY(){return g(a)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),oe()}class Ax{#e;#t;constructor(t,n){this.#e=t,this.#t=w_(n)}get current(){return this.#t(),this.#e()}}const kx=/\(.+\)/,Ix=new Set(["all","print","screen","and","or","not","only"]);class Tx extends Ax{constructor(t,n){let r=kx.test(t)||t.split(/[\s,]+/).some(o=>Ix.has(o.trim()))?t:`(${t})`;const i=window.matchMedia(r);super(()=>i.matches,o=>dc(i,"change",o))}}function Px(e,t,n,r){const i=new Map;return Fc(e,{x:0,y:0,width:n,height:r},t,!0).forEach(o=>{i.set(o.id,o)}),i}function ed(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:o,onerror:a,onlyRenderVisible:s,elevateEdgesOnSelect:u}=e,l=new Map;for(const c of t){const d=r.get(c.source),f=r.get(c.target);if(!d||!f)continue;if(s){const{visibleNodes:p,transform:v,width:y,height:b}=e;if(k1({sourceNode:d,targetNode:f,width:y,height:b,transform:v}))p.set(d.id,d),p.set(f.id,f);else continue}const h=i.get(c.id);if(h&&c===h.edge&&d==h.sourceNode&&f==h.targetNode){l.set(c.id,h);continue}const m=D1({id:c.id,sourceNode:d,targetNode:f,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:o,onError:a});m&&l.set(c.id,{...n,...c,...m,zIndex:A1({selected:c.selected,zIndex:c.zIndex??n.zIndex,sourceNode:d,targetNode:f,elevateOnSelect:u}),sourceNode:d,targetNode:f,edge:c})}return l}const Ly={input:gx,output:px,default:My,group:yx},zy={straight:qx,smoothstep:Cx,default:Dy,step:Rx};function Nx(e,t,n,r,i,o){if(t&&!n&&r&&i){const a=fr(o,{filter:s=>!!((s.width||s.initialWidth)&&(s.height||s.initialHeight))});return Hc(a,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Ox(e){class t{#e=I(()=>e.props.id??"1");get flowId(){return g(this.#e)}set flowId(r){j(this.#e,r)}#t=_e(null);get domNode(){return g(this.#t)}set domNode(r){j(this.#t,r)}#n=_e(null);get panZoom(){return g(this.#n)}set panZoom(r){j(this.#n,r)}#r=_e(e.width??0);get width(){return g(this.#r)}set width(r){j(this.#r,r)}#i=_e(e.height??0);get height(){return g(this.#i)}set height(r){j(this.#i,r)}#o=I(()=>{const r=V1(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&r&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),r});get nodesInitialized(){return g(this.#o)}set nodesInitialized(r){j(this.#o,r)}#a=I(()=>this.panZoom!==null);get viewportInitialized(){return g(this.#a)}set viewportInitialized(r){j(this.#a,r)}#s=I(()=>(Z1(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return g(this.#s)}set _edges(r){j(this.#s,r)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(r){e.nodes=r}get edges(){return this._edges}set edges(r){e.edges=r}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#u=I(()=>{const r=this._prevSelectedNodeIds.size,i=new Set,o=this.nodes.filter(a=>(a.selected&&(i.add(a.id),this._prevSelectedNodeIds.delete(a.id)),a.selected));return(r!==i.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=o),this._prevSelectedNodeIds=i,this._prevSelectedNodes});get selectedNodes(){return g(this.#u)}set selectedNodes(r){j(this.#u,r)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=I(()=>{const r=this._prevSelectedEdgeIds.size,i=new Set,o=this.edges.filter(a=>(a.selected&&(i.add(a.id),this._prevSelectedEdgeIds.delete(a.id)),a.selected));return(r!==i.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=o),this._prevSelectedEdgeIds=i,this._prevSelectedEdges});get selectedEdges(){return g(this.#c)}set selectedEdges(r){j(this.#c,r)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#l=I(()=>{const{nodes:r,_edges:i,_prevVisibleEdges:o,nodeLookup:a,connectionMode:s,onerror:u,onlyRenderVisibleElements:l,defaultEdgeOptions:c}=this;let d,f;const h={edges:i,defaultEdgeOptions:c,previousEdges:o,nodeLookup:a,connectionMode:s,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:u};if(l){const{viewport:m,width:p,height:v}=this,y=[m.x,m.y,m.zoom];d=Px(a,y,p,v),f=ed({...h,onlyRenderVisible:!0,visibleNodes:d,transform:y,width:p,height:v})}else d=this.nodeLookup,f=ed(h);return{nodes:d,edges:f}});get visible(){return g(this.#l)}set visible(r){j(this.#l,r)}#d=I(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return g(this.#d)}set nodesDraggable(r){j(this.#d,r)}#f=I(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return g(this.#f)}set nodesConnectable(r){j(this.#f,r)}#h=I(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return g(this.#h)}set elementsSelectable(r){j(this.#h,r)}#g=I(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return g(this.#g)}set nodesFocusable(r){j(this.#g,r)}#v=I(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return g(this.#v)}set edgesFocusable(r){j(this.#v,r)}#p=I(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return g(this.#p)}set disableKeyboardA11y(r){j(this.#p,r)}#y=I(()=>e.props.minZoom??.5);get minZoom(){return g(this.#y)}set minZoom(r){j(this.#y,r)}#m=I(()=>e.props.maxZoom??2);get maxZoom(){return g(this.#m)}set maxZoom(r){j(this.#m,r)}#_=I(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return g(this.#_)}set nodeOrigin(r){j(this.#_,r)}#b=I(()=>e.props.nodeExtent??xc);get nodeExtent(){return g(this.#b)}set nodeExtent(r){j(this.#b,r)}#w=I(()=>e.props.translateExtent??xc);get translateExtent(){return g(this.#w)}set translateExtent(r){j(this.#w,r)}#x=I(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return g(this.#x)}set defaultEdgeOptions(r){j(this.#x,r)}#E=I(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return g(this.#E)}set nodeDragThreshold(r){j(this.#E,r)}#S=I(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return g(this.#S)}set autoPanOnNodeDrag(r){j(this.#S,r)}#C=I(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return g(this.#C)}set autoPanOnConnect(r){j(this.#C,r)}#q=I(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return g(this.#q)}set autoPanOnNodeFocus(r){j(this.#q,r)}#R=I(()=>e.props.autoPanSpeed??15);get autoPanSpeed(){return g(this.#R)}set autoPanSpeed(r){j(this.#R,r)}#A=I(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return g(this.#A)}set connectionDragThreshold(r){j(this.#A,r)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#k=I(()=>e.props.snapGrid??null);get snapGrid(){return g(this.#k)}set snapGrid(r){j(this.#k,r)}#I=_e(!1);get dragging(){return g(this.#I)}set dragging(r){j(this.#I,r)}#T=_e(null);get selectionRect(){return g(this.#T)}set selectionRect(r){j(this.#T,r)}#P=_e(!1);get selectionKeyPressed(){return g(this.#P)}set selectionKeyPressed(r){j(this.#P,r)}#N=_e(!1);get multiselectionKeyPressed(){return g(this.#N)}set multiselectionKeyPressed(r){j(this.#N,r)}#O=_e(!1);get deleteKeyPressed(){return g(this.#O)}set deleteKeyPressed(r){j(this.#O,r)}#M=_e(!1);get panActivationKeyPressed(){return g(this.#M)}set panActivationKeyPressed(r){j(this.#M,r)}#D=_e(!1);get zoomActivationKeyPressed(){return g(this.#D)}set zoomActivationKeyPressed(r){j(this.#D,r)}#L=_e(null);get selectionRectMode(){return g(this.#L)}set selectionRectMode(r){j(this.#L,r)}#z=_e("");get ariaLiveMessage(){return g(this.#z)}set ariaLiveMessage(r){j(this.#z,r)}#F=I(()=>e.props.selectionMode??Wn.Partial);get selectionMode(){return g(this.#F)}set selectionMode(r){j(this.#F,r)}#H=I(()=>({...Ly,...e.props.nodeTypes}));get nodeTypes(){return g(this.#H)}set nodeTypes(r){j(this.#H,r)}#B=I(()=>({...zy,...e.props.edgeTypes}));get edgeTypes(){return g(this.#B)}set edgeTypes(r){j(this.#B,r)}#V=I(()=>e.props.noPanClass??"nopan");get noPanClass(){return g(this.#V)}set noPanClass(r){j(this.#V,r)}#G=I(()=>e.props.noDragClass??"nodrag");get noDragClass(){return g(this.#G)}set noDragClass(r){j(this.#G,r)}#K=I(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return g(this.#K)}set noWheelClass(r){j(this.#K,r)}#j=I(()=>C1(e.props.ariaLabelConfig));get ariaLabelConfig(){return g(this.#j)}set ariaLabelConfig(r){j(this.#j,r)}#U=_e(Nx(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return g(this.#U)}set _viewport(r){j(this.#U,r)}get viewport(){return e.viewport??this._viewport}set viewport(r){e.viewport&&(e.viewport=r),this._viewport=r}#Y=_e(Ec);get _connection(){return g(this.#Y)}set _connection(r){j(this.#Y,r)}#Z=I(()=>this._connection.inProgress?{...this._connection,to:bn(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return g(this.#Z)}set connection(r){j(this.#Z,r)}#W=I(()=>e.props.connectionMode??Ft.Strict);get connectionMode(){return g(this.#W)}set connectionMode(r){j(this.#W,r)}#X=I(()=>e.props.connectionRadius??20);get connectionRadius(){return g(this.#X)}set connectionRadius(r){j(this.#X,r)}#J=I(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return g(this.#J)}set isValidConnection(r){j(this.#J,r)}#Q=I(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return g(this.#Q)}set selectNodesOnDrag(r){j(this.#Q,r)}#$=I(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor);get defaultMarkerColor(){return g(this.#$)}set defaultMarkerColor(r){j(this.#$,r)}#ee=I(()=>L1(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return g(this.#ee)}set markers(r){j(this.#ee,r)}#te=I(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return g(this.#te)}set onlyRenderVisibleElements(r){j(this.#te,r)}#ne=I(()=>e.props.onflowerror??b1);get onerror(){return g(this.#ne)}set onerror(r){j(this.#ne,r)}#re=I(()=>e.props.ondelete);get ondelete(){return g(this.#re)}set ondelete(r){j(this.#re,r)}#ie=I(()=>e.props.onbeforedelete);get onbeforedelete(){return g(this.#ie)}set onbeforedelete(r){j(this.#ie,r)}#oe=I(()=>e.props.onbeforeconnect);get onbeforeconnect(){return g(this.#oe)}set onbeforeconnect(r){j(this.#oe,r)}#ae=I(()=>e.props.onconnect);get onconnect(){return g(this.#ae)}set onconnect(r){j(this.#ae,r)}#se=I(()=>e.props.onconnectstart);get onconnectstart(){return g(this.#se)}set onconnectstart(r){j(this.#se,r)}#ue=I(()=>e.props.onconnectend);get onconnectend(){return g(this.#ue)}set onconnectend(r){j(this.#ue,r)}#ce=I(()=>e.props.onbeforereconnect);get onbeforereconnect(){return g(this.#ce)}set onbeforereconnect(r){j(this.#ce,r)}#le=I(()=>e.props.onreconnect);get onreconnect(){return g(this.#le)}set onreconnect(r){j(this.#le,r)}#de=I(()=>e.props.onreconnectstart);get onreconnectstart(){return g(this.#de)}set onreconnectstart(r){j(this.#de,r)}#fe=I(()=>e.props.onreconnectend);get onreconnectend(){return g(this.#fe)}set onreconnectend(r){j(this.#fe,r)}#he=I(()=>e.props.clickConnect??!0);get clickConnect(){return g(this.#he)}set clickConnect(r){j(this.#he,r)}#ge=I(()=>e.props.onclickconnectstart);get onclickconnectstart(){return g(this.#ge)}set onclickconnectstart(r){j(this.#ge,r)}#ve=I(()=>e.props.onclickconnectend);get onclickconnectend(){return g(this.#ve)}set onclickconnectend(r){j(this.#ve,r)}#pe=_e(null);get clickConnectStartHandle(){return g(this.#pe)}set clickConnectStartHandle(r){j(this.#pe,r)}#ye=I(()=>e.props.onselectiondrag);get onselectiondrag(){return g(this.#ye)}set onselectiondrag(r){j(this.#ye,r)}#me=I(()=>e.props.onselectiondragstart);get onselectiondragstart(){return g(this.#me)}set onselectiondragstart(r){j(this.#me,r)}#_e=I(()=>e.props.onselectiondragstop);get onselectiondragstop(){return g(this.#_e)}set onselectiondragstop(r){j(this.#_e,r)}resolveFitView=async()=>{this.panZoom&&(await y1({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new Tx("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#be=I(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return g(this.#be)}set colorMode(r){j(this.#be,r)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Ec,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function St(){const e=an(tr);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const tr=Symbol();function Fy(e){const t=Ox(e);function n(S){t.nodeTypes={...Ly,...S}}function r(S){t.edgeTypes={...zy,...S}}function i(S){t.edges=P1(S,t.edges)}const o=(S,E=!1)=>{t.nodes=t.nodes.map(R=>{const w=S.get(R.id);return w?{...R,position:w.position,dragging:E}:R})};function a(S){const{changes:E,updatedInternals:R}=U1(S,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!R)return;H1(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const w=new Map;for(const k of E){const T=t.nodeLookup.get(k.id)?.internals.userNode;if(!T)continue;const z={...T};switch(k.type){case"dimensions":{const B={...z.measured,...k.dimensions};k.setAttributes&&(z.width=k.dimensions?.width??z.width,z.height=k.dimensions?.height??z.height),z.measured=B;break}case"position":z.position=k.position??z.position;break}w.set(k.id,z)}t.nodes=t.nodes.map(k=>w.get(k.id)??k)}function s(S){const E=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=S,t.fitViewResolver=E,t.nodes=[...t.nodes],E.promise}async function u(S,E,R){const w=typeof R?.zoom<"u"?R.zoom:t.maxZoom,k=t.panZoom;return k?(await k.setViewport({x:t.width/2-S*w,y:t.height/2-E*w,zoom:w},{duration:R?.duration,ease:R?.ease,interpolate:R?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function l(S,E){const R=t.panZoom;return R?R.scaleBy(S,E):Promise.resolve(!1)}function c(S){return l(1.2,S)}function d(S){return l(1/1.2,S)}function f(S){const E=t.panZoom;E&&(E.setScaleExtent([S,t.maxZoom]),t.minZoom=S)}function h(S){const E=t.panZoom;E&&(E.setScaleExtent([t.minZoom,S]),t.maxZoom=S)}function m(S){const E=t.panZoom;E&&(E.setTranslateExtent(S),t.translateExtent=S)}function p(S,E=null){let R=!1;const w=S.map(k=>(E?E.has(k.id):!0)&&k.selected?(R=!0,{...k,selected:!1}):k);return[R,w]}function v(S){const E=S?.nodes?new Set(S.nodes.map(B=>B.id)):null,[R,w]=p(t.nodes,E);R&&(t.nodes=w);const k=S?.edges?new Set(S.edges.map(B=>B.id)):null,[T,z]=p(t.edges,k);T&&(t.edges=z)}function y(S){const E=t.multiselectionKeyPressed;t.nodes=t.nodes.map(R=>{const w=S.includes(R.id),k=E&&R.selected||w;return!!R.selected!==k?{...R,selected:k}:R}),E||v({nodes:[]})}function b(S){const E=t.multiselectionKeyPressed;t.edges=t.edges.map(R=>{const w=S.includes(R.id),k=E&&R.selected||w;return!!R.selected!==k?{...R,selected:k}:R}),E||v({edges:[]})}function x(S,E,R){const w=t.nodeLookup.get(S);if(!w){console.warn("012",fn.error012(S));return}t.selectionRect=null,t.selectionRectMode=null,w.selected?(E||w.selected&&t.multiselectionKeyPressed)&&(v({nodes:[w],edges:[]}),requestAnimationFrame(()=>R?.blur())):y([S])}function _(S){const E=t.edgeLookup.get(S);if(!E){console.warn("012",fn.error012(S));return}(E.selectable||t.elementsSelectable&&typeof E.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,E.selected?E.selected&&t.multiselectionKeyPressed&&v({nodes:[],edges:[E]}):b([S]))}function q(S,E){const{nodeExtent:R,snapGrid:w,nodeOrigin:k,nodeLookup:T,nodesDraggable:z,onerror:B}=t,F=new Map,H=w?.[0]??5,K=w?.[1]??5,U=S.x*H*E,Z=S.y*K*E;for(const N of T.values()){if(!(N.selected&&(N.draggable||z&&typeof N.draggable>"u")))continue;let L={x:N.internals.positionAbsolute.x+U,y:N.internals.positionAbsolute.y+Z};w&&(L=_n(L,w));const{position:V,positionAbsolute:G}=py({nodeId:N.id,nextPosition:L,nodeLookup:T,nodeExtent:R,nodeOrigin:k,onError:B});N.position=V,N.internals.positionAbsolute=G,F.set(N.id,N)}o(F)}function C(S){return Y1({delta:S,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const A=S=>{t._connection={...S}};function P(){t._connection=Ec}function O(){t.resetStoreValues(),v()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:o,updateNodeInternals:a,zoomIn:c,zoomOut:d,fitView:s,setCenter:u,setMinZoom:f,setMaxZoom:h,setTranslateExtent:m,unselectNodesAndEdges:v,addSelectedNodes:y,addSelectedEdges:b,handleNodeSelection:x,handleEdgeSelection:_,moveSelectedNodes:q,panBy:C,updateConnection:A,cancelConnection:P,reset:O})}function Mx(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:o,onPanZoom:a,onPanZoomEnd:s,translateExtent:u,setPanZoomInstance:l,onDraggingChange:c,onTransformChange:d}=t,f=lx({domNode:e,minZoom:n,maxZoom:r,translateExtent:u,viewport:i,onPanZoom:a,onPanZoomStart:o,onPanZoomEnd:s,onDraggingChange:c}),h=f.getViewport();return(i.x!==h.x||i.y!==h.y||i.zoom!==h.zoom)&&d([h.x,h.y,h.zoom]),l(f),f.update(t),{update(m){f.update(m)}}}var Dx=le('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function Lx(e,t){ie(t,!0);let n=Y(t,"store",15),r=I(()=>n().panActivationKeyPressed||t.panOnDrag),i=I(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:o}=n();let a=!1;yt(()=>{!a&&n().viewportInitialized&&(t.oninit?.(),a=!0)});var s=Dx(),u=ue(s);Te(u,()=>t.children),re(s),qe(s,(l,c)=>Mx?.(l,c),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:o,onDraggingChange:l=>{n(n().dragging=l,!0)},setPanZoomInstance:l=>{n(n().panZoom=l,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:g(i),panOnDrag:g(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,selectionOnDrag:t.selectionOnDrag,onTransformChange:l=>{n(n().viewport={x:l[0],y:l[1],zoom:l[2]},!0)},connectionInProgress:n().connection.inProgress})),W(e,s),oe()}function td(e,t){return n=>{n.target===t&&e?.(n)}}function nd(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function rd(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var zx=le("<div><!></div>");function Fx(e,t){ie(t,!0);let n=Y(t,"store",15),r=Y(t,"panOnDrag",3,!0),i=Y(t,"paneClickDistance",3,1),o,a=null,s=new Set,u=new Set,l=I(()=>n().panActivationKeyPressed||r()),c=I(()=>n().selectionKeyPressed||!!n().selectionRect||t.selectionOnDrag&&g(l)!==!0),d=I(()=>n().elementsSelectable&&(g(c)||n().selectionRectMode==="user")),f=!1;function h(P){if(a=o?.getBoundingClientRect(),!a)return;const O=P.target===o,M=!O&&!!P.target.closest(".nokey"),S=t.selectionOnDrag&&O||n().selectionKeyPressed;if(M||!g(c)||!S||P.button!==0||!P.isPrimary)return;P.target?.setPointerCapture?.(P.pointerId),f=!1;const{x:E,y:R}=Fe(P,a);n(n().selectionRect={width:0,height:0,startX:E,startY:R,x:E,y:R},!0),O||(P.stopPropagation(),P.preventDefault())}function m(P){if(!g(c)||!a||!n().selectionRect)return;const O=Fe(P,a),{startX:M=0,startY:S=0}=n().selectionRect;if(!f){const T=n().selectionKeyPressed?0:i();if(Math.hypot(O.x-M,O.y-S)<=T)return;n().unselectNodesAndEdges(),t.onselectionstart?.(P)}f=!0;const E={...n().selectionRect,x:O.x<M?O.x:M,y:O.y<S?O.y:S,width:Math.abs(O.x-M),height:Math.abs(O.y-S)},R=s,w=u;s=new Set(Fc(n().nodeLookup,E,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Wn.Partial,!0).map(T=>T.id));const k=n().defaultEdgeOptions.selectable??!0;u=new Set;for(const T of s){const z=n().connectionLookup.get(T);if(z)for(const{edgeId:B}of z.values()){const F=n().edgeLookup.get(B);F&&(F.selectable??k)&&u.add(B)}}rd(R,s)||n(n().nodes=n().nodes.map(nd(s)),!0),rd(w,u)||n(n().edges=n().edges.map(nd(u)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=E,!0)}function p(P){P.button===0&&(P.target?.releasePointerCapture?.(P.pointerId),!f&&P.target===o&&b?.(P),n(n().selectionRect=null,!0),f&&n(n().selectionRectMode=s.size>0?"nodes":null,!0),f&&t.onselectionend?.(P))}const v=P=>{if(Array.isArray(g(l))&&g(l).includes(2)){P.preventDefault();return}t.onpanecontextmenu?.({event:P})},y=P=>{f&&(P.stopPropagation(),f=!1)};function b(P){if(f||n().connection.inProgress){f=!1;return}t.onpaneclick?.({event:P}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var x=zx();let _;var q=I(()=>g(d)?void 0:td(b,o));x.__click=function(...P){g(q)?.apply(this,P)},x.__pointermove=function(...P){(g(d)?m:void 0)?.apply(this,P)},x.__pointerup=function(...P){(g(d)?p:void 0)?.apply(this,P)};var C=I(()=>td(v,o));x.__contextmenu=function(...P){g(C)?.apply(this,P)};var A=ue(x);Te(A,()=>t.children),re(x),Kt(x,P=>o=P,()=>o),pe(P=>_=Ze(x,1,"svelte-flow__pane svelte-flow__container",null,_,P),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:g(c)})]),pt("pointerdown",x,function(...P){(g(d)?h:void 0)?.apply(this,P)},!0),pt("click",x,function(...P){(g(d)?y:void 0)?.apply(this,P)},!0),W(e,x),oe()}kp(["click","pointermove","pointerup","contextmenu"]);var Hx=le('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function Bx(e,t){ie(t,!0);var n=Hx();let r;var i=ue(n);Te(i,()=>t.children),re(n),pe(()=>r=We(n,"",r,{transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})),W(e,n),oe()}function Hy(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:a}=t,s=J1({onDrag:r,onDragStart:i,onDragStop:o,onNodeMouseDown:a,getStoreItems:()=>{const{snapGrid:l,viewport:c}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:l||[0,0],snapToGrid:!!l,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function u(l,c){if(c.disabled){s.destroy();return}s.update({domNode:l,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return u(e,t),{update(l){u(e,l)},destroy(){s.destroy()}}}var Vx=le('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),Gx=le('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function Kx(e,t){ie(t,!0);var n=Gx(),r=he(n),i=ue(r,!0);re(r);var o=se(r,2),a=ue(o,!0);re(o);var s=se(o,2);{var u=l=>{var c=Vx(),d=ue(c,!0);re(c),pe(()=>{ce(c,"id",`${jx}-${t.store.flowId}`),rt(d,t.store.ariaLiveMessage)}),W(l,c)};ve(s,l=>{t.store.disableKeyboardA11y||l(u)})}pe(()=>{ce(r,"id",`${By}-${t.store.flowId}`),rt(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ce(o,"id",`${Vy}-${t.store.flowId}`),rt(a,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),W(e,n),oe()}const By="svelte-flow__node-desc",Vy="svelte-flow__edge-desc",jx="svelte-flow__aria-live";var Ux=le("<div><!></div>");function Yx(e,t){ie(t,!0);let n=Y(t,"store",15),r=I(()=>Se(t.node.data,()=>({}),!0)),i=I(()=>Se(t.node.selected,!1)),o=I(()=>t.node.draggable),a=I(()=>t.node.selectable),s=I(()=>Se(t.node.deletable,!0)),u=I(()=>t.node.connectable),l=I(()=>t.node.focusable),c=I(()=>Se(t.node.hidden,!1)),d=I(()=>Se(t.node.dragging,!1)),f=I(()=>Se(t.node.style,"")),h=I(()=>t.node.class),m=I(()=>Se(t.node.type,"default")),p=I(()=>t.node.parentId),v=I(()=>t.node.sourcePosition),y=I(()=>t.node.targetPosition),b=I(()=>Se(t.node.measured,()=>({width:0,height:0}),!0).width),x=I(()=>Se(t.node.measured,()=>({width:0,height:0}),!0).height),_=I(()=>t.node.initialWidth),q=I(()=>t.node.initialHeight),C=I(()=>t.node.width),A=I(()=>t.node.height),P=I(()=>t.node.dragHandle),O=I(()=>Se(t.node.internals.z,0)),M=I(()=>t.node.internals.positionAbsolute.x),S=I(()=>t.node.internals.positionAbsolute.y),E=I(()=>t.node.internals.userNode),{id:R}=t.node,w=I(()=>g(o)??n().nodesDraggable),k=I(()=>g(a)??n().elementsSelectable),T=I(()=>g(u)??n().nodesConnectable),z=I(()=>E1(t.node)),B=I(()=>!!t.node.internals.handleBounds),F=I(()=>g(z)&&g(B)),H=I(()=>g(l)??n().nodesFocusable);function K(ae){return n().parentLookup.has(ae)}let U=I(()=>K(R)),Z=_e(null),N=null,D=g(m),L=g(v),V=g(y),G=I(()=>n().nodeTypes[g(m)]??My),X=I(()=>n().ariaLabelConfig);sn("svelteflow__node_connectable",{get value(){return g(T)}}),sn("svelteflow__node_id",R);let J=I(()=>{const ae=g(b)===void 0?g(C)??g(_):g(C),ye=g(x)===void 0?g(A)??g(q):g(A);if(!(ae===void 0&&ye===void 0&&g(f)===void 0))return`${g(f)};${ae?`width:${Xe(ae)};`:""}${ye?`height:${Xe(ye)};`:""}`});yt(()=>{(g(m)!==D||g(v)!==L||g(y)!==V)&&g(Z)!==null&&requestAnimationFrame(()=>{g(Z)!==null&&n().updateNodeInternals(new Map([[R,{id:R,nodeElement:g(Z),force:!0}]]))}),D=g(m),L=g(v),V=g(y)}),yt(()=>{t.resizeObserver&&(!g(F)||g(Z)!==N)&&(N&&t.resizeObserver.unobserve(N),g(Z)&&t.resizeObserver.observe(g(Z)),N=g(Z))}),ir(()=>{N&&t.resizeObserver?.unobserve(N)});function xe(ae){g(k)&&(!n().selectNodesOnDrag||!g(w)||n().nodeDragThreshold>0)&&n().handleNodeSelection(R),t.onnodeclick?.({node:g(E),event:ae})}function $(ae){if(!(wy(ae)||n().disableKeyboardA11y))if(gy.includes(ae.key)&&g(k)){const ye=ae.key==="Escape";n().handleNodeSelection(R,ye,g(Z))}else g(w)&&t.node.selected&&Object.prototype.hasOwnProperty.call(er,ae.key)&&(ae.preventDefault(),n(n().ariaLiveMessage=g(X)["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(er[ae.key],ae.shiftKey?4:1))}const de=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!g(Z)?.matches(":focus-visible"))return;const{width:ae,height:ye,viewport:ut}=n();Fc(new Map([[R,t.node]]),{x:0,y:0,width:ae,height:ye},[ut.x,ut.y,ut.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:ut.zoom})};var te=Re(),Ie=he(te);{var ne=ae=>{var ye=Ux();dt(ye,()=>({"data-id":R,class:["svelte-flow__node",`svelte-flow__node-${g(m)}`,g(h)],style:g(J),onclick:xe,onpointerenter:t.onnodepointerenter?fe=>t.onnodepointerenter({node:g(E),event:fe}):void 0,onpointerleave:t.onnodepointerleave?fe=>t.onnodepointerleave({node:g(E),event:fe}):void 0,onpointermove:t.onnodepointermove?fe=>t.onnodepointermove({node:g(E),event:fe}):void 0,oncontextmenu:t.onnodecontextmenu?fe=>t.onnodecontextmenu({node:g(E),event:fe}):void 0,onkeydown:g(H)?$:void 0,onfocus:g(H)?de:void 0,tabIndex:g(H)?0:void 0,role:t.node.ariaRole??(g(H)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${By}-${n().flowId}`,...t.node.domAttributes,[Ac]:{dragging:g(d),selected:g(i),draggable:g(w),connectable:g(T),selectable:g(k),nopan:g(w),parent:g(U)},[ar]:{"z-index":g(O),transform:`translate(${g(M)??""}px, ${g(S)??""}px)`,visibility:g(z)?"visible":"hidden"}}));var ut=ue(ye);Rc(ut,()=>g(G),(fe,Ee)=>{Ee(fe,{get data(){return g(r)},get id(){return R},get selected(){return g(i)},get selectable(){return g(k)},get deletable(){return g(s)},get sourcePosition(){return g(v)},get targetPosition(){return g(y)},get zIndex(){return g(O)},get dragging(){return g(d)},get draggable(){return g(w)},get dragHandle(){return g(P)},get parentId(){return g(p)},get type(){return g(m)},get isConnectable(){return g(T)},get positionAbsoluteX(){return g(M)},get positionAbsoluteY(){return g(S)},get width(){return g(C)},get height(){return g(A)}})}),re(ye),qe(ye,(fe,Ee)=>Hy?.(fe,Ee),()=>({nodeId:R,isSelectable:g(k),disabled:!g(w),handleSelector:g(P),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(fe,Ee,me,Ge)=>{t.onnodedrag?.({event:fe,targetNode:me,nodes:Ge})},onDragStart:(fe,Ee,me,Ge)=>{t.onnodedragstart?.({event:fe,targetNode:me,nodes:Ge})},onDragStop:(fe,Ee,me,Ge)=>{t.onnodedragstop?.({event:fe,targetNode:me,nodes:Ge})},store:n()})),Kt(ye,fe=>j(Z,fe),()=>g(Z)),W(ae,ye)};ve(Ie,ae=>{g(c)||ae(ne)})}W(e,te),oe()}var Zx=le('<div class="svelte-flow__nodes"></div>');function Wx(e,t){ie(t,!0);let n=Y(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(o=>{const a=new Map;o.forEach(s=>{const u=s.target.getAttribute("data-id");a.set(u,{id:u,nodeElement:s.target,force:!0})}),n().updateNodeInternals(a)});ir(()=>{r?.disconnect()});var i=Zx();kc(i,21,()=>n().visible.nodes.values(),o=>o.id,(o,a)=>{Yx(o,{get node(){return g(a)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(s){n(s)}})}),re(i),W(e,i),oe()}var Xx=be('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Jx(e,t){ie(t,!0);let n=I(()=>t.edge.source),r=I(()=>t.edge.target),i=I(()=>t.edge.sourceX),o=I(()=>t.edge.sourceY),a=I(()=>t.edge.targetX),s=I(()=>t.edge.targetY),u=I(()=>t.edge.sourcePosition),l=I(()=>t.edge.targetPosition),c=I(()=>Se(t.edge.animated,!1)),d=I(()=>Se(t.edge.selected,!1)),f=I(()=>t.edge.label),h=I(()=>t.edge.labelStyle),m=I(()=>Se(t.edge.data,()=>({}),!0)),p=I(()=>t.edge.style),v=I(()=>t.edge.interactionWidth),y=I(()=>Se(t.edge.type,"default")),b=I(()=>t.edge.sourceHandle),x=I(()=>t.edge.targetHandle),_=I(()=>t.edge.markerStart),q=I(()=>t.edge.markerEnd),C=I(()=>t.edge.selectable),A=I(()=>t.edge.focusable),P=I(()=>Se(t.edge.deletable,!0)),O=I(()=>t.edge.hidden),M=I(()=>t.edge.zIndex),S=I(()=>t.edge.class),E=I(()=>t.edge.ariaLabel),R=null;const{id:w}=t.edge;sn("svelteflow__edge_id",w);let k=I(()=>g(C)??t.store.elementsSelectable),T=I(()=>g(A)??t.store.edgesFocusable),z=I(()=>t.store.edgeTypes[g(y)]??Dy),B=I(()=>g(_)?`url('#${Cc(g(_),t.store.flowId)}')`:void 0),F=I(()=>g(q)?`url('#${Cc(g(q),t.store.flowId)}')`:void 0);function H(L){const V=t.store.edgeLookup.get(w);V&&(g(k)&&t.store.handleEdgeSelection(w),t.onedgeclick?.({event:L,edge:V}))}function K(L,V){const G=t.store.edgeLookup.get(w);G&&V({event:L,edge:G})}function U(L){if(!t.store.disableKeyboardA11y&&gy.includes(L.key)&&g(k)){const{unselectNodesAndEdges:V,addSelectedEdges:G}=t.store;L.key==="Escape"?(R?.blur(),V({edges:[t.edge]})):G([w])}}var Z=Re(),N=he(Z);{var D=L=>{var V=Xx();let G;var X=ue(V);dt(X,()=>({class:["svelte-flow__edge",g(S)],"data-id":w,onclick:H,oncontextmenu:t.onedgecontextmenu?J=>{K(J,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?J=>{K(J,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?J=>{K(J,t.onedgepointerleave)}:void 0,"aria-label":g(E)===null?void 0:g(E)?g(E):`Edge from ${g(n)} to ${g(r)}`,"aria-describedby":g(T)?`${Vy}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(g(T)?"group":"img"),"aria-roledescription":"edge",onkeydown:g(T)?U:void 0,tabindex:g(T)?0:void 0,...t.edge.domAttributes,[Ac]:{animated:g(c),selected:g(d),selectable:g(k)}}));var ee=ue(X);Rc(ee,()=>g(z),(J,xe)=>{xe(J,{get id(){return w},get source(){return g(n)},get target(){return g(r)},get sourceX(){return g(i)},get sourceY(){return g(o)},get targetX(){return g(a)},get targetY(){return g(s)},get sourcePosition(){return g(u)},get targetPosition(){return g(l)},get animated(){return g(c)},get selected(){return g(d)},get label(){return g(f)},get labelStyle(){return g(h)},get data(){return g(m)},get style(){return g(p)},get interactionWidth(){return g(v)},get selectable(){return g(k)},get deletable(){return g(P)},get type(){return g(y)},get sourceHandleId(){return g(b)},get targetHandleId(){return g(x)},get markerStart(){return g(B)},get markerEnd(){return g(F)}})}),re(X),Kt(X,J=>R=J,()=>R),re(V),pe(()=>G=We(V,"",G,{"z-index":g(M)})),W(L,V)};ve(N,L=>{g(O)||L(D)})}W(e,Z),oe()}var Qx=be("<defs></defs>");function $x(e,t){ie(t,!1);const n=St();rr();var r=Qx();kc(r,5,()=>n.markers,i=>i.id,(i,o)=>{rE(i,Pt(()=>g(o)))}),re(r),W(e,r),oe()}var eE=be('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),tE=be('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),nE=be('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function rE(e,t){ie(t,!0);let n=Y(t,"width",3,12.5),r=Y(t,"height",3,12.5),i=Y(t,"markerUnits",3,"strokeWidth"),o=Y(t,"orient",3,"auto-start-reverse"),a=Y(t,"color",3,"none");var s=nE(),u=ue(s);{var l=d=>{var f=eE();let h;pe(()=>{ce(f,"stroke-width",t.strokeWidth),h=We(f,"",h,{stroke:a()})}),W(d,f)},c=d=>{var f=Re(),h=he(f);{var m=p=>{var v=tE();let y;pe(()=>{ce(v,"stroke-width",t.strokeWidth),y=We(v,"",y,{stroke:a(),fill:a()})}),W(p,v)};ve(h,p=>{t.type===Xn.ArrowClosed&&p(m)},!0)}W(d,f)};ve(u,d=>{t.type===Xn.Arrow?d(l):d(c,!1)})}re(s),pe(()=>{ce(s,"id",t.id),ce(s,"markerWidth",`${n()}`),ce(s,"markerHeight",`${r()}`),ce(s,"markerUnits",i()),ce(s,"orient",o())}),W(e,s),oe()}var iE=le('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function oE(e,t){ie(t,!0);let n=Y(t,"store",15);var r=iE(),i=ue(r),o=ue(i);$x(o,{}),re(i);var a=se(i,2);kc(a,17,()=>n().visible.edges.values(),s=>s.id,(s,u)=>{Jx(s,{get edge(){return g(u)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(l){n(l)}})}),re(r),W(e,r),oe()}var aE=le('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function Gy(e,t){ie(t,!0);let n=Y(t,"x",3,0),r=Y(t,"y",3,0),i=Y(t,"width",3,0),o=Y(t,"height",3,0),a=Y(t,"isVisible",3,!0);var s=Re(),u=he(s);{var l=c=>{var d=aE();let f;pe(h=>f=We(d,"",f,h),[()=>({width:typeof i()=="string"?i():Xe(i()),height:typeof o()=="string"?o():Xe(o()),transform:`translate(${n()}px, ${r()}px)`})]),W(c,d)};ve(u,c=>{a()&&c(l)})}W(e,s),oe()}var sE=le("<div><!></div>");function uE(e,t){ie(t,!0);let n=_e(void 0);yt(()=>{t.store.disableKeyboardA11y||g(n)?.focus({preventScroll:!0})});let r=I(()=>{if(t.store.selectionRectMode==="nodes"){t.store.nodes;const c=fr(t.store.nodeLookup,{filter:d=>!!d.selected});if(c.width>0&&c.height>0)return c}return null});function i(c){const d=t.store.nodes.filter(f=>f.selected);t.onselectioncontextmenu?.({nodes:d,event:c})}function o(c){const d=t.store.nodes.filter(f=>f.selected);t.onselectionclick?.({nodes:d,event:c})}function a(c){Object.prototype.hasOwnProperty.call(er,c.key)&&(c.preventDefault(),t.store.moveSelectedNodes(er[c.key],c.shiftKey?4:1))}var s=Re(),u=he(s);{var l=c=>{var d=sE();d.__contextmenu=i,d.__click=o,d.__keydown=function(...m){(t.store.disableKeyboardA11y?void 0:a)?.apply(this,m)};let f;var h=ue(d);Gy(h,{width:"100%",height:"100%",x:0,y:0}),re(d),qe(d,(m,p)=>Hy?.(m,p),()=>({disabled:!1,store:t.store,onDrag:(m,p,v,y)=>{t.onnodedrag?.({event:m,targetNode:null,nodes:y})},onDragStart:(m,p,v,y)=>{t.onnodedragstart?.({event:m,targetNode:null,nodes:y})},onDragStop:(m,p,v,y)=>{t.onnodedragstop?.({event:m,targetNode:null,nodes:y})}})),Kt(d,m=>j(n,m),()=>g(n)),pe(m=>{Ze(d,1,jt(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-sf2y5e"),ce(d,"role",t.store.disableKeyboardA11y?void 0:"button"),ce(d,"tabindex",t.store.disableKeyboardA11y?void 0:-1),f=We(d,"",f,m)},[()=>({width:Xe(g(r).width),height:Xe(g(r).height),transform:`translate(${g(r).x??""}px, ${g(r).y??""}px)`})]),W(c,d)};ve(u,c=>{t.store.selectionRectMode==="nodes"&&g(r)&&nt(g(r).x)&&nt(g(r).y)&&c(l)})}W(e,s),oe()}kp(["contextmenu","click","keydown"]);function cE(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Ke(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function o(s){const u=Array.isArray(r)?r:[r],l=[s.metaKey,s.altKey,s.shiftKey,s.ctrlKey].reduce((c,d,f)=>d?c|1<<f:c,0);for(const c of u){const d={preventDefault:!1,enabled:!0,...c},{modifier:f,key:h,callback:m,preventDefault:p,enabled:v}=d;if(v){if(s.key!==h)continue;if(f===null||f===!1){if(l!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const b=Array.isArray(f)?f:[f];let x=!1;for(const _ of b)if((Array.isArray(_)?_:[_]).reduce((C,A)=>C|cE(A),0)===l){x=!0;break}if(!x)continue}p&&s.preventDefault();const y={node:e,trigger:d,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:y})),m?.(y)}}}let a;return n&&(a=dc(e,i,o)),{update:s=>{const{enabled:u=!0,type:l="keydown"}=s;n&&(!u||i!==l)?a?.():!n&&u&&(a=dc(e,l,o)),n=u,i=l,r=s.trigger},destroy:()=>{a?.()}}}function jc(){const e=I(St),t=o=>{const a=$l(o)?o:g(e).nodeLookup.get(o.id),s=a.parentId?S1(a.position,a.measured,a.parentId,g(e).nodeLookup,g(e).nodeOrigin):a.position,u={...a,position:s,width:a.measured?.width??a.width,height:a.measured?.height??a.height};return Bt(u)};function n(o,a,s={replace:!1}){g(e).nodes=Ce(()=>g(e).nodes).map(u=>{if(u.id===o){const l=typeof a=="function"?a(u):a;return s?.replace&&$l(l)?l:{...u,...l}}return u})}function r(o,a,s={replace:!1}){g(e).edges=Ce(()=>g(e).edges).map(u=>{if(u.id===o){const l=typeof a=="function"?a(u):a;return s.replace&&bx(l)?l:{...u,...l}}return u})}const i=o=>g(e).nodeLookup.get(o);return{zoomIn:g(e).zoomIn,zoomOut:g(e).zoomOut,getInternalNode:i,getNode:o=>i(o)?.internals.userNode,getNodes:o=>o===void 0?g(e).nodes:id(g(e).nodeLookup,o),getEdge:o=>g(e).edgeLookup.get(o),getEdges:o=>o===void 0?g(e).edges:id(g(e).edgeLookup,o),setZoom:(o,a)=>{const s=g(e).panZoom;return s?s.scaleTo(o,{duration:a?.duration}):Promise.resolve(!1)},getZoom:()=>g(e).viewport.zoom,setViewport:async(o,a)=>{const s=g(e).viewport;return g(e).panZoom?(await g(e).panZoom.setViewport({x:o.x??s.x,y:o.y??s.y,zoom:o.zoom??s.zoom},a),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Fp(g(e).viewport),setCenter:async(o,a,s)=>g(e).setCenter(o,a,s),fitView:o=>g(e).fitView(o),fitBounds:async(o,a)=>{if(!g(e).panZoom)return Promise.resolve(!1);const s=Hc(o,g(e).width,g(e).height,g(e).minZoom,g(e).maxZoom,a?.padding??.1);return await g(e).panZoom.setViewport(s,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(o,a=!0,s)=>{const u=Bl(o),l=u?o:t(o);return l?(s||g(e).nodes).filter(c=>{const d=g(e).nodeLookup.get(c.id);if(!d||!u&&c.id===o.id)return!1;const f=Bt(d),h=hn(f,l);return a&&h>0||h>=f.width*f.height||h>=l.width*l.height}):[]},isNodeIntersecting:(o,a,s=!0)=>{const l=Bl(o)?o:t(o);if(!l)return!1;const c=hn(l,a);return s&&c>0||c>=a.width*a.height||c>=l.width*l.height},deleteElements:async({nodes:o=[],edges:a=[]})=>{const{nodes:s,edges:u}=await m1({nodesToRemove:o,edgesToRemove:a,nodes:g(e).nodes,edges:g(e).edges,onBeforeDelete:g(e).onbeforedelete});return s&&(g(e).nodes=Ce(()=>g(e).nodes).filter(l=>!s.some(({id:c})=>c===l.id))),u&&(g(e).edges=Ce(()=>g(e).edges).filter(l=>!u.some(({id:c})=>c===l.id))),(s.length>0||u.length>0)&&g(e).ondelete?.({nodes:s,edges:u}),{deletedNodes:s,deletedEdges:u}},screenToFlowPosition:(o,a={snapToGrid:!0})=>{if(!g(e).domNode)return o;const s=a.snapToGrid?g(e).snapGrid:!1,{x:u,y:l,zoom:c}=g(e).viewport,{x:d,y:f}=g(e).domNode.getBoundingClientRect(),h={x:o.x-d,y:o.y-f};return bn(h,[u,l,c],s!==null,s||[1,1])},flowToScreenPosition:o=>{if(!g(e).domNode)return o;const{x:a,y:s,zoom:u}=g(e).viewport,{x:l,y:c}=g(e).domNode.getBoundingClientRect(),d=Qn(o,[a,s,u]);return{x:d.x+l,y:d.y+c}},toObject:()=>structuredClone({nodes:[...g(e).nodes],edges:[...g(e).edges],viewport:{...g(e).viewport}}),updateNode:n,updateNodeData:(o,a,s)=>{const u=g(e).nodeLookup.get(o)?.internals.userNode;if(!u)return;const l=typeof a=="function"?a(u):a;n(o,c=>({...c,data:s?.replace?l:{...c.data,...l}}))},updateEdge:r,getNodesBounds:o=>g1(o,{nodeLookup:g(e).nodeLookup,nodeOrigin:g(e).nodeOrigin}),getHandleConnections:({type:o,id:a,nodeId:s})=>Array.from(g(e).connectionLookup.get(`${s}-${o}-${a??null}`)?.values()??[])}}function id(e,t){const n=[];for(const r of t){const i=e.get(r);if(i){const o="internals"in i?i.internals?.userNode:i;n.push(o)}}return n}function lE(e,t){ie(t,!0);let n=Y(t,"store",15),r=Y(t,"selectionKey",3,"Shift"),i=Y(t,"multiSelectionKey",19,()=>$n()?"Meta":"Control"),o=Y(t,"deleteKey",3,"Backspace"),a=Y(t,"panActivationKey",3," "),s=Y(t,"zoomActivationKey",19,()=>$n()?"Meta":"Control"),{deleteElements:u}=jc();function l(p){return p!==null&&typeof p=="object"}function c(p){return l(p)?p.modifier||[]:[]}function d(p){return p==null?"":l(p)?p.key:p}function f(p,v){return(Array.isArray(p)?p:[p]).map(b=>{const x=d(b);return{key:x,modifier:c(b),enabled:x!==null,callback:v}})}function h(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function m(){const p=n().nodes.filter(y=>y.selected),v=n().edges.filter(y=>y.selected);u({nodes:p,edges:v})}pt("blur",Ne,h),pt("contextmenu",Ne,h),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(o(),p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!wy(p.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),m())}),type:"keydown"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(o(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(a(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(a(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(s(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),qe(Ne,(p,v)=>Ke?.(p,v),()=>({trigger:f(s(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),oe()}var dE=be('<path fill="none" class="svelte-flow__connection-path"></path>'),fE=be('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function hE(e,t){ie(t,!0);let n=I(()=>{if(!t.store.connection.inProgress)return"";const a={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case lt.Bezier:{const[s]=Ey(a);return s}case lt.Straight:{const[s]=Cy(a);return s}case lt.Step:case lt.SmoothStep:{const[s]=Bc({...a,borderRadius:t.type===lt.Step?0:void 0});return s}}});var r=Re(),i=he(r);{var o=a=>{var s=fE(),u=ue(s),l=ue(u);{var c=f=>{var h=Re(),m=he(h);Rc(m,()=>t.LineComponent,(p,v)=>{v(p,{})}),W(f,h)},d=f=>{var h=dE();pe(()=>{ce(h,"d",g(n)),We(h,t.style)}),W(f,h)};ve(l,f=>{t.LineComponent?f(c):f(d,!1)})}re(u),re(s),pe(f=>{ce(s,"width",t.store.width),ce(s,"height",t.store.height),We(s,t.containerStyle),Ze(u,0,f)},[()=>jt(["svelte-flow__connection",f1(t.store.connection.isValid)])]),W(a,s)};ve(i,a=>{t.store.connection.inProgress&&a(o)})}W(e,r),oe()}var gE=le("<div><!></div>");function Ky(e,t){ie(t,!0);let n=Y(t,"position",3,"top-right"),r=xt(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=I(()=>`${n()}`.split("-"));var o=gE();dt(o,s=>({class:s,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...g(i)]]);var a=ue(o);Te(a,()=>t.children??wt),re(o),W(e,o),oe()}var vE=le('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function pE(e,t){ie(t,!0);let n=Y(t,"position",3,"bottom-right");var r=Re(),i=he(r);{var o=a=>{Ky(a,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(s,u)=>{var l=vE();W(s,l)},$$slots:{default:!0}})};ve(i,a=>{t.proOptions?.hideAttribution||a(o)})}W(e,r),oe()}var yE=le("<div><!></div>");function mE(e,t){ie(t,!0);let n=Y(t,"domNode",15),r=Y(t,"clientWidth",15),i=Y(t,"clientHeight",15),o=I(()=>t.rest.class),a=I(()=>__(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed"]));function s(c){c.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(c)}var u=yE();dt(u,c=>({class:["svelte-flow","svelte-flow__container",g(o),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:s,...g(a),[ar]:c}),[()=>({width:Xe(t.width),height:Xe(t.height)})],void 0,void 0,"svelte-mkap6j");var l=ue(u);Te(l,()=>t.children??wt),re(u),Kt(u,c=>n(c),()=>n()),bl(u,"clientHeight",i),bl(u,"clientWidth",r),W(e,u),oe()}var _E=le('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),bE=le("<!> <!>",1),wE=le("<!> <!> <!> <!> <!>",1);function xE(e,t){ie(t,!0);let n=Y(t,"paneClickDistance",3,1),r=Y(t,"nodeClickDistance",3,1),i=Y(t,"panOnScrollMode",19,()=>Dt.Free),o=Y(t,"preventScrolling",3,!0),a=Y(t,"zoomOnScroll",3,!0),s=Y(t,"zoomOnDoubleClick",3,!0),u=Y(t,"zoomOnPinch",3,!0),l=Y(t,"panOnScroll",3,!1),c=Y(t,"panOnScrollSpeed",3,.5),d=Y(t,"panOnDrag",3,!0),f=Y(t,"selectionOnDrag",3,!1),h=Y(t,"connectionLineType",19,()=>lt.Bezier),m=Y(t,"nodes",31,()=>ml([])),p=Y(t,"edges",31,()=>ml([])),v=Y(t,"viewport",15,void 0),y=xt(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),b=Fy({props:y,width:t.width,height:t.height,get nodes(){return m()},set nodes(_){m(_)},get edges(){return p()},set edges(_){p(_)},get viewport(){return v()},set viewport(_){v(_)}});const x=an(tr);x&&x.setStore&&x.setStore(b),sn(tr,{provider:!1,getStore(){return b}}),yt(()=>{const _={nodes:b.selectedNodes,edges:b.selectedEdges};Ce(()=>t.onselectionchange)?.(_);for(const q of b.selectionChangeHandlers.values())q(_)}),ir(()=>{b.reset()}),mE(e,{get colorMode(){return b.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return y},get domNode(){return b.domNode},set domNode(_){b.domNode=_},get clientWidth(){return b.width},set clientWidth(_){b.width=_},get clientHeight(){return b.height},set clientHeight(_){b.height=_},children:(_,q)=>{var C=wE(),A=he(C);lE(A,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return b},set store(E){b=E}});var P=se(A,2);Lx(P,{get panOnScrollMode(){return i()},get preventScrolling(){return o()},get zoomOnScroll(){return a()},get zoomOnDoubleClick(){return s()},get zoomOnPinch(){return u()},get panOnScroll(){return l()},get panOnScrollSpeed(){return c()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return b},set store(E){b=E},children:(E,R)=>{Fx(E,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get paneClickDistance(){return n()},get selectionOnDrag(){return f()},get store(){return b},set store(w){b=w},children:(w,k)=>{var T=bE(),z=he(T);Bx(z,{get store(){return b},set store(F){b=F},children:(F,H)=>{var K=_E(),U=se(he(K),2);oE(U,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return b},set store(L){b=L}});var Z=se(U,4);hE(Z,{get type(){return h()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return b},set store(L){b=L}});var N=se(Z,2);Wx(N,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(L){b=L}});var D=se(N,2);uE(D,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return b},set store(L){b=L}}),or(2),W(F,K)},$$slots:{default:!0}});var B=se(z,2);{let F=I(()=>!!(b.selectionRect&&b.selectionRectMode==="user")),H=I(()=>b.selectionRect?.width),K=I(()=>b.selectionRect?.height),U=I(()=>b.selectionRect?.x),Z=I(()=>b.selectionRect?.y);Gy(B,{get isVisible(){return g(F)},get width(){return g(H)},get height(){return g(K)},get x(){return g(U)},get y(){return g(Z)}})}W(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}});var O=se(P,2);pE(O,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var M=se(O,2);Kx(M,{get store(){return b}});var S=se(M,2);Te(S,()=>t.children??wt),W(_,C)},$$slots:{default:!0}}),oe()}function EE(e,t){ie(t,!0);let n=_e(Fy({props:{},nodes:[],edges:[]}));sn(tr,{provider:!0,getStore(){return g(n)},setStore:o=>{j(n,o)}}),ir(()=>{g(n).reset()});var r=Re(),i=he(r);Te(i,()=>t.children??wt),W(e,r),oe()}var SE=le("<button><!></button>");function On(e,t){let n=xt(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=SE();dt(r,()=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[ar]:{"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor}}));var i=ue(r);Te(i,()=>t.children??wt),re(r),W(e,r)}var CE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function qE(e){var t=CE();W(e,t)}var RE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function AE(e){var t=RE();W(e,t)}var kE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function IE(e){var t=kE();W(e,t)}var TE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function PE(e){var t=TE();W(e,t)}var NE=be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function OE(e){var t=NE();W(e,t)}var ME=le("<!> <!>",1),DE=le("<!> <!> <!> <!> <!> <!>",1);function LE(e,t){ie(t,!0);let n=Y(t,"position",3,"bottom-left"),r=Y(t,"orientation",3,"vertical"),i=Y(t,"showZoom",3,!0),o=Y(t,"showFitView",3,!0),a=Y(t,"showLock",3,!0),s=xt(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),u=I(St);const l={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let c=I(()=>g(u).nodesDraggable||g(u).nodesConnectable||g(u).elementsSelectable),d=I(()=>g(u).viewport.zoom<=g(u).minZoom),f=I(()=>g(u).viewport.zoom>=g(u).maxZoom),h=I(()=>g(u).ariaLabelConfig),m=I(()=>r()==="horizontal"?"horizontal":"vertical");const p=()=>{g(u).zoomIn()},v=()=>{g(u).zoomOut()},y=()=>{g(u).fitView(t.fitViewOptions)},b=()=>{let x=!g(c);g(u).nodesDraggable=x,g(u).nodesConnectable=x,g(u).elementsSelectable=x};{let x=I(()=>["svelte-flow__controls",g(m),t.class]);Ky(e,Pt({get class(){return g(x)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return g(h)["controls.ariaLabel"]},get style(){return t.style}},()=>s,{children:(_,q)=>{var C=DE(),A=he(C);{var P=F=>{var H=Re(),K=he(H);Te(K,()=>t.before),W(F,H)};ve(A,F=>{t.before&&F(P)})}var O=se(A,2);{var M=F=>{var H=ME(),K=he(H);On(K,Pt({onclick:p,class:"svelte-flow__controls-zoomin",get title(){return g(h)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return g(h)["controls.zoomIn.ariaLabel"]},get disabled(){return g(f)}},()=>l,{children:(Z,N)=>{qE(Z)},$$slots:{default:!0}}));var U=se(K,2);On(U,Pt({onclick:v,class:"svelte-flow__controls-zoomout",get title(){return g(h)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return g(h)["controls.zoomOut.ariaLabel"]},get disabled(){return g(d)}},()=>l,{children:(Z,N)=>{AE(Z)},$$slots:{default:!0}})),W(F,H)};ve(O,F=>{i()&&F(M)})}var S=se(O,2);{var E=F=>{On(F,Pt({class:"svelte-flow__controls-fitview",onclick:y,get title(){return g(h)["controls.fitView.ariaLabel"]},get"aria-label"(){return g(h)["controls.fitView.ariaLabel"]}},()=>l,{children:(H,K)=>{IE(H)},$$slots:{default:!0}}))};ve(S,F=>{o()&&F(E)})}var R=se(S,2);{var w=F=>{On(F,Pt({class:"svelte-flow__controls-interactive",onclick:b,get title(){return g(h)["controls.interactive.ariaLabel"]},get"aria-label"(){return g(h)["controls.interactive.ariaLabel"]}},()=>l,{children:(H,K)=>{var U=Re(),Z=he(U);{var N=L=>{OE(L)},D=L=>{PE(L)};ve(Z,L=>{g(c)?L(N):L(D,!1)})}W(H,U)},$$slots:{default:!0}}))};ve(R,F=>{a()&&F(w)})}var k=se(R,2);{var T=F=>{var H=Re(),K=he(H);Te(K,()=>t.children),W(F,H)};ve(k,F=>{t.children&&F(T)})}var z=se(k,2);{var B=F=>{var H=Re(),K=he(H);Te(K,()=>t.after),W(F,H)};ve(z,F=>{t.after&&F(B)})}W(_,C)},$$slots:{default:!0}}))}oe()}var it;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(it||(it={}));var zE=be("<circle></circle>");function FE(e,t){var n=zE();pe(()=>{ce(n,"cx",t.radius),ce(n,"cy",t.radius),ce(n,"r",t.radius),Ze(n,0,jt(["svelte-flow__background-pattern","dots",t.class]))}),W(e,n)}var HE=be("<path></path>");function BE(e,t){ie(t,!0);var n=HE();pe(()=>{ce(n,"stroke-width",t.lineWidth),ce(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Ze(n,0,jt(["svelte-flow__background-pattern",t.variant,t.class]))}),W(e,n),oe()}const VE={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6};var GE=be('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function KE(e,t){ie(t,!0);let n=Y(t,"variant",19,()=>it.Dots),r=Y(t,"gap",3,20),i=Y(t,"lineWidth",3,1),o=I(St),a=I(()=>n()===it.Dots),s=I(()=>n()===it.Cross),u=I(()=>Array.isArray(r())?r():[r(),r()]),l=I(()=>`background-pattern-${g(o).flowId}-${t.id??""}`),c=I(()=>[g(u)[0]*g(o).viewport.zoom||1,g(u)[1]*g(o).viewport.zoom||1]),d=I(()=>(t.size??VE[n()])*g(o).viewport.zoom),f=I(()=>g(s)?[g(d),g(d)]:g(c)),h=I(()=>g(a)?[g(d)/2,g(d)/2]:[g(f)[0]/2,g(f)[1]/2]);var m=GE();let p;var v=ue(m),y=ue(v);{var b=q=>{{let C=I(()=>g(d)/2);FE(q,{get radius(){return g(C)},get class(){return t.patternClass}})}},x=q=>{BE(q,{get dimensions(){return g(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};ve(y,q=>{g(a)?q(b):q(x,!1)})}re(v);var _=se(v);re(m),pe(()=>{Ze(m,0,jt(["svelte-flow__background","svelte-flow__container",t.class])),p=We(m,"",p,{"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor}),ce(v,"id",g(l)),ce(v,"x",g(o).viewport.x%g(c)[0]),ce(v,"y",g(o).viewport.y%g(c)[1]),ce(v,"width",g(c)[0]),ce(v,"height",g(c)[1]),ce(v,"patternTransform",`translate(-${g(h)[0]},-${g(h)[1]})`),ce(_,"fill",`url(#${g(l)})`)}),W(e,m),oe()}var jE=be('<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'),UE=le(`<button class="flex h-6 w-6 items-center justify-center rounded-full transition-colors cursor-pointer text-xs font-bold border
                   bg-gray-200 hover:bg-gray-300 text-gray-700 border-gray-300
                   dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-white dark:border-gray-500" aria-label="Toggle children"><!></button>`),YE=le('<div><!> <div> </div> <div class="absolute right-3 top-1/2 -translate-y-1/2 w-6 h-6 translate-x-1/2"><!></div></div>');function ZE(e,t){ie(t,!1);let n=Y(t,"data",8),r=Y(t,"isConnectable",8);const{fitView:i}=jc();function o(){n().onToggle&&(n().onToggle(),setTimeout(()=>{i({duration:500})},100))}rr();var a=YE(),s=ue(a);Gt(s,{type:"target",get position(){return et(Q),Ce(()=>Q.Left)},get isConnectable(){return r()},class:"!bg-gray-400"});var u=se(s,2),l=ue(u,!0);re(u);var c=se(u,2),d=ue(c);Gt(d,{type:"source",get position(){return et(Q),Ce(()=>Q.Right)},get isConnectable(){return r()},class:"!w-full !h-full !border-0 !bg-transparent flex items-center justify-center",children:(f,h)=>{var m=Re(),p=he(m);{var v=y=>{var b=UE(),x=ue(b);{var _=C=>{var A=jE();W(C,A)},q=C=>{var A=Ap();pe(()=>rt(A,(et(n()),Ce(()=>n().childrenCount)))),W(C,A)};ve(x,C=>{et(n()),Ce(()=>n().expanded)?C(_):C(q,!1)})}re(b),pt("click",b,R_(o)),W(y,b)};ve(p,y=>{et(n()),Ce(()=>n().hasChildren)&&y(v)})}W(f,m)},$$slots:{default:!0}}),re(c),re(a),pe(()=>{Ze(a,1,`relative inline-flex items-center rounded-lg border ${et(n()),Ce(()=>n().highlighted?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/30":"border-gray-300 bg-white dark:border-gray-600 dark:bg-gray-900")??""} pl-4 pr-3 py-2 text-gray-900 shadow-md max-w-xs dark:text-white transition-colors duration-200`),Ze(u,1,`font-medium ${et(n()),Ce(()=>n().hasChildren?"mr-8":"")??""} overflow-hidden text-ellipsis whitespace-nowrap`),rt(l,(et(n()),Ce(()=>n().label)))}),W(e,a),oe()}var WE=le(`<div class="flex items-center"><label class="cursor-pointer inline-flex items-center px-3 py-1.5 rounded-md text-sm font-medium transition-colors
                bg-slate-600 text-white dark:text-slate-900 hover:bg-slate-700
                dark:bg-slate-200 dark:hover:bg-slate-100"><span>Subir JSON</span> <input type="file" accept=".json" class="hidden"/></label></div>`);function XE(e,t){ie(t,!1);const n=Zm();let r=qc();function i(u){const c=u.target.files?.[0];if(c){const d=new FileReader;d.onload=f=>{try{const h=JSON.parse(f.target?.result);n("load",h)}catch(h){console.error("Invalid JSON",h),alert("Invalid JSON file")}},d.readAsText(c)}}rr();var o=WE(),a=ue(o),s=se(ue(a),2);Kt(s,u=>j(r,u),()=>g(r)),re(a),re(o),pt("change",s,i),W(e,o),oe()}var Mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uc(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yr,od;function JE(){if(od)return Yr;od=1;function e(){this.__data__=[],this.size=0}return Yr=e,Yr}var Zr,ad;function Ut(){if(ad)return Zr;ad=1;function e(t,n){return t===n||t!==t&&n!==n}return Zr=e,Zr}var Wr,sd;function yr(){if(sd)return Wr;sd=1;var e=Ut();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Wr=t,Wr}var Xr,ud;function QE(){if(ud)return Xr;ud=1;var e=yr(),t=Array.prototype,n=t.splice;function r(i){var o=this.__data__,a=e(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():n.call(o,a,1),--this.size,!0}return Xr=r,Xr}var Jr,cd;function $E(){if(cd)return Jr;cd=1;var e=yr();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Jr=t,Jr}var Qr,ld;function eS(){if(ld)return Qr;ld=1;var e=yr();function t(n){return e(this.__data__,n)>-1}return Qr=t,Qr}var $r,dd;function tS(){if(dd)return $r;dd=1;var e=yr();function t(n,r){var i=this.__data__,o=e(i,n);return o<0?(++this.size,i.push([n,r])):i[o][1]=r,this}return $r=t,$r}var ei,fd;function mr(){if(fd)return ei;fd=1;var e=JE(),t=QE(),n=$E(),r=eS(),i=tS();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,ei=o,ei}var ti,hd;function nS(){if(hd)return ti;hd=1;var e=mr();function t(){this.__data__=new e,this.size=0}return ti=t,ti}var ni,gd;function rS(){if(gd)return ni;gd=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ni=e,ni}var ri,vd;function iS(){if(vd)return ri;vd=1;function e(t){return this.__data__.get(t)}return ri=e,ri}var ii,pd;function oS(){if(pd)return ii;pd=1;function e(t){return this.__data__.has(t)}return ii=e,ii}var oi,yd;function jy(){if(yd)return oi;yd=1;var e=typeof Mn=="object"&&Mn&&Mn.Object===Object&&Mn;return oi=e,oi}var ai,md;function Ve(){if(md)return ai;md=1;var e=jy(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ai=n,ai}var si,_d;function Yt(){if(_d)return si;_d=1;var e=Ve(),t=e.Symbol;return si=t,si}var ui,bd;function aS(){if(bd)return ui;bd=1;var e=Yt(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(a){var s=n.call(a,i),u=a[i];try{a[i]=void 0;var l=!0}catch{}var c=r.call(a);return l&&(s?a[i]=u:delete a[i]),c}return ui=o,ui}var ci,wd;function sS(){if(wd)return ci;wd=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return ci=n,ci}var li,xd;function Ct(){if(xd)return li;xd=1;var e=Yt(),t=aS(),n=sS(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?i:r:o&&o in Object(s)?t(s):n(s)}return li=a,li}var di,Ed;function Oe(){if(Ed)return di;Ed=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return di=e,di}var fi,Sd;function wn(){if(Sd)return fi;Sd=1;var e=Ct(),t=Oe(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!t(s))return!1;var u=e(s);return u==r||u==i||u==n||u==o}return fi=a,fi}var hi,Cd;function uS(){if(Cd)return hi;Cd=1;var e=Ve(),t=e["__core-js_shared__"];return hi=t,hi}var gi,qd;function cS(){if(qd)return gi;qd=1;var e=uS(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return gi=n,gi}var vi,Rd;function Uy(){if(Rd)return vi;Rd=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return vi=n,vi}var pi,Ad;function lS(){if(Ad)return pi;Ad=1;var e=wn(),t=cS(),n=Oe(),r=Uy(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?c:o;return h.test(r(f))}return pi=d,pi}var yi,kd;function dS(){if(kd)return yi;kd=1;function e(t,n){return t?.[n]}return yi=e,yi}var mi,Id;function qt(){if(Id)return mi;Id=1;var e=lS(),t=dS();function n(r,i){var o=t(r,i);return e(o)?o:void 0}return mi=n,mi}var _i,Td;function Yc(){if(Td)return _i;Td=1;var e=qt(),t=Ve(),n=e(t,"Map");return _i=n,_i}var bi,Pd;function _r(){if(Pd)return bi;Pd=1;var e=qt(),t=e(Object,"create");return bi=t,bi}var wi,Nd;function fS(){if(Nd)return wi;Nd=1;var e=_r();function t(){this.__data__=e?e(null):{},this.size=0}return wi=t,wi}var xi,Od;function hS(){if(Od)return xi;Od=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return xi=e,xi}var Ei,Md;function gS(){if(Md)return Ei;Md=1;var e=_r(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;if(e){var s=a[o];return s===t?void 0:s}return r.call(a,o)?a[o]:void 0}return Ei=i,Ei}var Si,Dd;function vS(){if(Dd)return Si;Dd=1;var e=_r(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var o=this.__data__;return e?o[i]!==void 0:n.call(o,i)}return Si=r,Si}var Ci,Ld;function pS(){if(Ld)return Ci;Ld=1;var e=_r(),t="__lodash_hash_undefined__";function n(r,i){var o=this.__data__;return this.size+=this.has(r)?0:1,o[r]=e&&i===void 0?t:i,this}return Ci=n,Ci}var qi,zd;function yS(){if(zd)return qi;zd=1;var e=fS(),t=hS(),n=gS(),r=vS(),i=pS();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,qi=o,qi}var Ri,Fd;function mS(){if(Fd)return Ri;Fd=1;var e=yS(),t=mr(),n=Yc();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ri=r,Ri}var Ai,Hd;function _S(){if(Hd)return Ai;Hd=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ai=e,Ai}var ki,Bd;function br(){if(Bd)return ki;Bd=1;var e=_S();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return ki=t,ki}var Ii,Vd;function bS(){if(Vd)return Ii;Vd=1;var e=br();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ii=t,Ii}var Ti,Gd;function wS(){if(Gd)return Ti;Gd=1;var e=br();function t(n){return e(this,n).get(n)}return Ti=t,Ti}var Pi,Kd;function xS(){if(Kd)return Pi;Kd=1;var e=br();function t(n){return e(this,n).has(n)}return Pi=t,Pi}var Ni,jd;function ES(){if(jd)return Ni;jd=1;var e=br();function t(n,r){var i=e(this,n),o=i.size;return i.set(n,r),this.size+=i.size==o?0:1,this}return Ni=t,Ni}var Oi,Ud;function Zc(){if(Ud)return Oi;Ud=1;var e=mS(),t=bS(),n=wS(),r=xS(),i=ES();function o(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var l=a[s];this.set(l[0],l[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,Oi=o,Oi}var Mi,Yd;function SS(){if(Yd)return Mi;Yd=1;var e=mr(),t=Yc(),n=Zc(),r=200;function i(o,a){var s=this.__data__;if(s instanceof e){var u=s.__data__;if(!t||u.length<r-1)return u.push([o,a]),this.size=++s.size,this;s=this.__data__=new n(u)}return s.set(o,a),this.size=s.size,this}return Mi=i,Mi}var Di,Zd;function wr(){if(Zd)return Di;Zd=1;var e=mr(),t=nS(),n=rS(),r=iS(),i=oS(),o=SS();function a(s){var u=this.__data__=new e(s);this.size=u.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Di=a,Di}var Li,Wd;function Wc(){if(Wd)return Li;Wd=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Li=e,Li}var zi,Xd;function Yy(){if(Xd)return zi;Xd=1;var e=qt(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return zi=t,zi}var Fi,Jd;function xr(){if(Jd)return Fi;Jd=1;var e=Yy();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Fi=t,Fi}var Hi,Qd;function Er(){if(Qd)return Hi;Qd=1;var e=xr(),t=Ut(),n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s){var u=o[a];(!(r.call(o,a)&&t(u,s))||s===void 0&&!(a in o))&&e(o,a,s)}return Hi=i,Hi}var Bi,$d;function xn(){if($d)return Bi;$d=1;var e=Er(),t=xr();function n(r,i,o,a){var s=!o;o||(o={});for(var u=-1,l=i.length;++u<l;){var c=i[u],d=a?a(o[c],r[c],c,o,r):void 0;d===void 0&&(d=r[c]),s?t(o,c,d):e(o,c,d)}return o}return Bi=n,Bi}var Vi,ef;function CS(){if(ef)return Vi;ef=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Vi=e,Vi}var Gi,tf;function Qe(){if(tf)return Gi;tf=1;function e(t){return t!=null&&typeof t=="object"}return Gi=e,Gi}var Ki,nf;function qS(){if(nf)return Ki;nf=1;var e=Ct(),t=Qe(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Ki=r,Ki}var ji,rf;function En(){if(rf)return ji;rf=1;var e=qS(),t=Qe(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(a){return t(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return ji=o,ji}var Ui,of;function we(){if(of)return Ui;of=1;var e=Array.isArray;return Ui=e,Ui}var tn={exports:{}},Yi,af;function RS(){if(af)return Yi;af=1;function e(){return!1}return Yi=e,Yi}tn.exports;var sf;function Zt(){return sf||(sf=1,(function(e,t){var n=Ve(),r=RS(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;e.exports=l})(tn,tn.exports)),tn.exports}var Zi,uf;function Sr(){if(uf)return Zi;uf=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var o=typeof r;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Zi=n,Zi}var Wi,cf;function Xc(){if(cf)return Wi;cf=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Wi=t,Wi}var Xi,lf;function AS(){if(lf)return Xi;lf=1;var e=Ct(),t=Xc(),n=Qe(),r="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",m="[object String]",p="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",q="[object Int16Array]",C="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",M="[object Uint32Array]",S={};S[b]=S[x]=S[_]=S[q]=S[C]=S[A]=S[P]=S[O]=S[M]=!0,S[r]=S[i]=S[v]=S[o]=S[y]=S[a]=S[s]=S[u]=S[l]=S[c]=S[d]=S[f]=S[h]=S[m]=S[p]=!1;function E(R){return n(R)&&t(R.length)&&!!S[e(R)]}return Xi=E,Xi}var Ji,df;function Cr(){if(df)return Ji;df=1;function e(t){return function(n){return t(n)}}return Ji=e,Ji}var nn={exports:{}};nn.exports;var ff;function Jc(){return ff||(ff=1,(function(e,t){var n=jy(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o&&n.process,s=(function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}})();e.exports=s})(nn,nn.exports)),nn.exports}var Qi,hf;function Sn(){if(hf)return Qi;hf=1;var e=AS(),t=Cr(),n=Jc(),r=n&&n.isTypedArray,i=r?t(r):e;return Qi=i,Qi}var $i,gf;function Zy(){if(gf)return $i;gf=1;var e=CS(),t=En(),n=we(),r=Zt(),i=Sr(),o=Sn(),a=Object.prototype,s=a.hasOwnProperty;function u(l,c){var d=n(l),f=!d&&t(l),h=!d&&!f&&r(l),m=!d&&!f&&!h&&o(l),p=d||f||h||m,v=p?e(l.length,String):[],y=v.length;for(var b in l)(c||s.call(l,b))&&!(p&&(b=="length"||h&&(b=="offset"||b=="parent")||m&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,y)))&&v.push(b);return v}return $i=u,$i}var eo,vf;function qr(){if(vf)return eo;vf=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return eo=t,eo}var to,pf;function Wy(){if(pf)return to;pf=1;function e(t,n){return function(r){return t(n(r))}}return to=e,to}var no,yf;function kS(){if(yf)return no;yf=1;var e=Wy(),t=e(Object.keys,Object);return no=t,no}var ro,mf;function Qc(){if(mf)return ro;mf=1;var e=qr(),t=kS(),n=Object.prototype,r=n.hasOwnProperty;function i(o){if(!e(o))return t(o);var a=[];for(var s in Object(o))r.call(o,s)&&s!="constructor"&&a.push(s);return a}return ro=i,ro}var io,_f;function at(){if(_f)return io;_f=1;var e=wn(),t=Xc();function n(r){return r!=null&&t(r.length)&&!e(r)}return io=n,io}var oo,bf;function ft(){if(bf)return oo;bf=1;var e=Zy(),t=Qc(),n=at();function r(i){return n(i)?e(i):t(i)}return oo=r,oo}var ao,wf;function IS(){if(wf)return ao;wf=1;var e=xn(),t=ft();function n(r,i){return r&&e(i,t(i),r)}return ao=n,ao}var so,xf;function TS(){if(xf)return so;xf=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return so=e,so}var uo,Ef;function PS(){if(Ef)return uo;Ef=1;var e=Oe(),t=qr(),n=TS(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!e(a))return n(a);var s=t(a),u=[];for(var l in a)l=="constructor"&&(s||!i.call(a,l))||u.push(l);return u}return uo=o,uo}var co,Sf;function Rt(){if(Sf)return co;Sf=1;var e=Zy(),t=PS(),n=at();function r(i){return n(i)?e(i,!0):t(i)}return co=r,co}var lo,Cf;function NS(){if(Cf)return lo;Cf=1;var e=xn(),t=Rt();function n(r,i){return r&&e(i,t(i),r)}return lo=n,lo}var rn={exports:{}};rn.exports;var qf;function Xy(){return qf||(qf=1,(function(e,t){var n=Ve(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===r,a=o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var d=l.length,f=s?s(d):new l.constructor(d);return l.copy(f),f}e.exports=u})(rn,rn.exports)),rn.exports}var fo,Rf;function Jy(){if(Rf)return fo;Rf=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return fo=e,fo}var ho,Af;function Qy(){if(Af)return ho;Af=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=0,a=[];++r<i;){var s=t[r];n(s,r,t)&&(a[o++]=s)}return a}return ho=e,ho}var go,kf;function $y(){if(kf)return go;kf=1;function e(){return[]}return go=e,go}var vo,If;function $c(){if(If)return vo;If=1;var e=Qy(),t=$y(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(s){return r.call(a,s)}))}:t;return vo=o,vo}var po,Tf;function OS(){if(Tf)return po;Tf=1;var e=xn(),t=$c();function n(r,i){return e(r,t(r),i)}return po=n,po}var yo,Pf;function el(){if(Pf)return yo;Pf=1;function e(t,n){for(var r=-1,i=n.length,o=t.length;++r<i;)t[o+r]=n[r];return t}return yo=e,yo}var mo,Nf;function Rr(){if(Nf)return mo;Nf=1;var e=Wy(),t=e(Object.getPrototypeOf,Object);return mo=t,mo}var _o,Of;function em(){if(Of)return _o;Of=1;var e=el(),t=Rr(),n=$c(),r=$y(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,n(a)),a=t(a);return s}:r;return _o=o,_o}var bo,Mf;function MS(){if(Mf)return bo;Mf=1;var e=xn(),t=em();function n(r,i){return e(r,t(r),i)}return bo=n,bo}var wo,Df;function tm(){if(Df)return wo;Df=1;var e=el(),t=we();function n(r,i,o){var a=i(r);return t(r)?a:e(a,o(r))}return wo=n,wo}var xo,Lf;function nm(){if(Lf)return xo;Lf=1;var e=tm(),t=$c(),n=ft();function r(i){return e(i,n,t)}return xo=r,xo}var Eo,zf;function DS(){if(zf)return Eo;zf=1;var e=tm(),t=em(),n=Rt();function r(i){return e(i,n,t)}return Eo=r,Eo}var So,Ff;function LS(){if(Ff)return So;Ff=1;var e=qt(),t=Ve(),n=e(t,"DataView");return So=n,So}var Co,Hf;function zS(){if(Hf)return Co;Hf=1;var e=qt(),t=Ve(),n=e(t,"Promise");return Co=n,Co}var qo,Bf;function rm(){if(Bf)return qo;Bf=1;var e=qt(),t=Ve(),n=e(t,"Set");return qo=n,qo}var Ro,Vf;function FS(){if(Vf)return Ro;Vf=1;var e=qt(),t=Ve(),n=e(t,"WeakMap");return Ro=n,Ro}var Ao,Gf;function Wt(){if(Gf)return Ao;Gf=1;var e=LS(),t=Yc(),n=zS(),r=rm(),i=FS(),o=Ct(),a=Uy(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),m=a(t),p=a(n),v=a(r),y=a(i),b=o;return(e&&b(new e(new ArrayBuffer(1)))!=f||t&&b(new t)!=s||n&&b(n.resolve())!=l||r&&b(new r)!=c||i&&b(new i)!=d)&&(b=function(x){var _=o(x),q=_==u?x.constructor:void 0,C=q?a(q):"";if(C)switch(C){case h:return f;case m:return s;case p:return l;case v:return c;case y:return d}return _}),Ao=b,Ao}var ko,Kf;function HS(){if(Kf)return ko;Kf=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,o=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(o.index=r.index,o.input=r.input),o}return ko=n,ko}var Io,jf;function im(){if(jf)return Io;jf=1;var e=Ve(),t=e.Uint8Array;return Io=t,Io}var To,Uf;function tl(){if(Uf)return To;Uf=1;var e=im();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return To=t,To}var Po,Yf;function BS(){if(Yf)return Po;Yf=1;var e=tl();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Po=t,Po}var No,Zf;function VS(){if(Zf)return No;Zf=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return No=t,No}var Oo,Wf;function GS(){if(Wf)return Oo;Wf=1;var e=Yt(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Oo=r,Oo}var Mo,Xf;function om(){if(Xf)return Mo;Xf=1;var e=tl();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Mo=t,Mo}var Do,Jf;function KS(){if(Jf)return Do;Jf=1;var e=tl(),t=BS(),n=VS(),r=GS(),i=om(),o="[object Boolean]",a="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",m="[object DataView]",p="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",q="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]";function P(O,M,S){var E=O.constructor;switch(M){case h:return e(O);case o:case a:return new E(+O);case m:return t(O,S);case p:case v:case y:case b:case x:case _:case q:case C:case A:return i(O,S);case s:return new E;case u:case d:return new E(O);case l:return n(O);case c:return new E;case f:return r(O)}}return Do=P,Do}var Lo,Qf;function am(){if(Qf)return Lo;Qf=1;var e=Oe(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var o=new r;return r.prototype=void 0,o}})();return Lo=n,Lo}var zo,$f;function sm(){if($f)return zo;$f=1;var e=am(),t=Rr(),n=qr();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return zo=r,zo}var Fo,eh;function jS(){if(eh)return Fo;eh=1;var e=Wt(),t=Qe(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Fo=r,Fo}var Ho,th;function US(){if(th)return Ho;th=1;var e=jS(),t=Cr(),n=Jc(),r=n&&n.isMap,i=r?t(r):e;return Ho=i,Ho}var Bo,nh;function YS(){if(nh)return Bo;nh=1;var e=Wt(),t=Qe(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Bo=r,Bo}var Vo,rh;function ZS(){if(rh)return Vo;rh=1;var e=YS(),t=Cr(),n=Jc(),r=n&&n.isSet,i=r?t(r):e;return Vo=i,Vo}var Go,ih;function um(){if(ih)return Go;ih=1;var e=wr(),t=Wc(),n=Er(),r=IS(),i=NS(),o=Xy(),a=Jy(),s=OS(),u=MS(),l=nm(),c=DS(),d=Wt(),f=HS(),h=KS(),m=sm(),p=we(),v=Zt(),y=US(),b=Oe(),x=ZS(),_=ft(),q=Rt(),C=1,A=2,P=4,O="[object Arguments]",M="[object Array]",S="[object Boolean]",E="[object Date]",R="[object Error]",w="[object Function]",k="[object GeneratorFunction]",T="[object Map]",z="[object Number]",B="[object Object]",F="[object RegExp]",H="[object Set]",K="[object String]",U="[object Symbol]",Z="[object WeakMap]",N="[object ArrayBuffer]",D="[object DataView]",L="[object Float32Array]",V="[object Float64Array]",G="[object Int8Array]",X="[object Int16Array]",ee="[object Int32Array]",J="[object Uint8Array]",xe="[object Uint8ClampedArray]",$="[object Uint16Array]",de="[object Uint32Array]",te={};te[O]=te[M]=te[N]=te[D]=te[S]=te[E]=te[L]=te[V]=te[G]=te[X]=te[ee]=te[T]=te[z]=te[B]=te[F]=te[H]=te[K]=te[U]=te[J]=te[xe]=te[$]=te[de]=!0,te[R]=te[w]=te[Z]=!1;function Ie(ne,ae,ye,ut,fe,Ee){var me,Ge=ae&C,qn=ae&A,Um=ae&P;if(ye&&(me=fe?ye(ne,ut,fe,Ee):ye(ne)),me!==void 0)return me;if(!b(ne))return ne;var ll=p(ne);if(ll){if(me=f(ne),!Ge)return a(ne,me)}else{var kt=d(ne),dl=kt==w||kt==k;if(v(ne))return o(ne,Ge);if(kt==B||kt==O||dl&&!fe){if(me=qn||dl?{}:m(ne),!Ge)return qn?u(ne,i(me,ne)):s(ne,r(me,ne))}else{if(!te[kt])return fe?ne:{};me=h(ne,kt,Ge)}}Ee||(Ee=new e);var fl=Ee.get(ne);if(fl)return fl;Ee.set(ne,me),x(ne)?ne.forEach(function(ct){me.add(Ie(ct,ae,ye,ct,ne,Ee))}):y(ne)&&ne.forEach(function(ct,ht){me.set(ht,Ie(ct,ae,ye,ht,ne,Ee))});var Ym=Um?qn?c:l:qn?q:_,hl=ll?void 0:Ym(ne);return t(hl||ne,function(ct,ht){hl&&(ht=ct,ct=ne[ht]),n(me,ht,Ie(ct,ae,ye,ht,ne,Ee))}),me}return Go=Ie,Go}var Ko,oh;function WS(){if(oh)return Ko;oh=1;var e=um(),t=4;function n(r){return e(r,t)}return Ko=n,Ko}var jo,ah;function nl(){if(ah)return jo;ah=1;function e(t){return function(){return t}}return jo=e,jo}var Uo,sh;function XS(){if(sh)return Uo;sh=1;function e(t){return function(n,r,i){for(var o=-1,a=Object(n),s=i(n),u=s.length;u--;){var l=s[t?u:++o];if(r(a[l],l,a)===!1)break}return n}}return Uo=e,Uo}var Yo,uh;function rl(){if(uh)return Yo;uh=1;var e=XS(),t=e();return Yo=t,Yo}var Zo,ch;function il(){if(ch)return Zo;ch=1;var e=rl(),t=ft();function n(r,i){return r&&e(r,i,t)}return Zo=n,Zo}var Wo,lh;function JS(){if(lh)return Wo;lh=1;var e=at();function t(n,r){return function(i,o){if(i==null)return i;if(!e(i))return n(i,o);for(var a=i.length,s=r?a:-1,u=Object(i);(r?s--:++s<a)&&o(u[s],s,u)!==!1;);return i}}return Wo=t,Wo}var Xo,dh;function Ar(){if(dh)return Xo;dh=1;var e=il(),t=JS(),n=t(e);return Xo=n,Xo}var Jo,fh;function At(){if(fh)return Jo;fh=1;function e(t){return t}return Jo=e,Jo}var Qo,hh;function cm(){if(hh)return Qo;hh=1;var e=At();function t(n){return typeof n=="function"?n:e}return Qo=t,Qo}var $o,gh;function lm(){if(gh)return $o;gh=1;var e=Wc(),t=Ar(),n=cm(),r=we();function i(o,a){var s=r(o)?e:t;return s(o,n(a))}return $o=i,$o}var ea,vh;function dm(){return vh||(vh=1,ea=lm()),ea}var ta,ph;function QS(){if(ph)return ta;ph=1;var e=Ar();function t(n,r){var i=[];return e(n,function(o,a,s){r(o,a,s)&&i.push(o)}),i}return ta=t,ta}var na,yh;function $S(){if(yh)return na;yh=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return na=t,na}var ra,mh;function eC(){if(mh)return ra;mh=1;function e(t){return this.__data__.has(t)}return ra=e,ra}var ia,_h;function fm(){if(_h)return ia;_h=1;var e=Zc(),t=$S(),n=eC();function r(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new e;++o<a;)this.add(i[o])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ia=r,ia}var oa,bh;function tC(){if(bh)return oa;bh=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return oa=e,oa}var aa,wh;function hm(){if(wh)return aa;wh=1;function e(t,n){return t.has(n)}return aa=e,aa}var sa,xh;function gm(){if(xh)return sa;xh=1;var e=fm(),t=tC(),n=hm(),r=1,i=2;function o(a,s,u,l,c,d){var f=u&r,h=a.length,m=s.length;if(h!=m&&!(f&&m>h))return!1;var p=d.get(a),v=d.get(s);if(p&&v)return p==s&&v==a;var y=-1,b=!0,x=u&i?new e:void 0;for(d.set(a,s),d.set(s,a);++y<h;){var _=a[y],q=s[y];if(l)var C=f?l(q,_,y,s,a,d):l(_,q,y,a,s,d);if(C!==void 0){if(C)continue;b=!1;break}if(x){if(!t(s,function(A,P){if(!n(x,P)&&(_===A||c(_,A,u,l,d)))return x.push(P)})){b=!1;break}}else if(!(_===q||c(_,q,u,l,d))){b=!1;break}}return d.delete(a),d.delete(s),b}return sa=o,sa}var ua,Eh;function nC(){if(Eh)return ua;Eh=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,o){r[++n]=[o,i]}),r}return ua=e,ua}var ca,Sh;function ol(){if(Sh)return ca;Sh=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return ca=e,ca}var la,Ch;function rC(){if(Ch)return la;Ch=1;var e=Yt(),t=im(),n=Ut(),r=gm(),i=nC(),o=ol(),a=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",m="[object Set]",p="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",x=e?e.prototype:void 0,_=x?x.valueOf:void 0;function q(C,A,P,O,M,S,E){switch(P){case b:if(C.byteLength!=A.byteLength||C.byteOffset!=A.byteOffset)return!1;C=C.buffer,A=A.buffer;case y:return!(C.byteLength!=A.byteLength||!S(new t(C),new t(A)));case u:case l:case f:return n(+C,+A);case c:return C.name==A.name&&C.message==A.message;case h:case p:return C==A+"";case d:var R=i;case m:var w=O&a;if(R||(R=o),C.size!=A.size&&!w)return!1;var k=E.get(C);if(k)return k==A;O|=s,E.set(C,A);var T=r(R(C),R(A),O,M,S,E);return E.delete(C),T;case v:if(_)return _.call(C)==_.call(A)}return!1}return la=q,la}var da,qh;function iC(){if(qh)return da;qh=1;var e=nm(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(o,a,s,u,l,c){var d=s&t,f=e(o),h=f.length,m=e(a),p=m.length;if(h!=p&&!d)return!1;for(var v=h;v--;){var y=f[v];if(!(d?y in a:r.call(a,y)))return!1}var b=c.get(o),x=c.get(a);if(b&&x)return b==a&&x==o;var _=!0;c.set(o,a),c.set(a,o);for(var q=d;++v<h;){y=f[v];var C=o[y],A=a[y];if(u)var P=d?u(A,C,y,a,o,c):u(C,A,y,o,a,c);if(!(P===void 0?C===A||l(C,A,s,u,c):P)){_=!1;break}q||(q=y=="constructor")}if(_&&!q){var O=o.constructor,M=a.constructor;O!=M&&"constructor"in o&&"constructor"in a&&!(typeof O=="function"&&O instanceof O&&typeof M=="function"&&M instanceof M)&&(_=!1)}return c.delete(o),c.delete(a),_}return da=i,da}var fa,Rh;function oC(){if(Rh)return fa;Rh=1;var e=wr(),t=gm(),n=rC(),r=iC(),i=Wt(),o=we(),a=Zt(),s=Sn(),u=1,l="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function m(p,v,y,b,x,_){var q=o(p),C=o(v),A=q?c:i(p),P=C?c:i(v);A=A==l?d:A,P=P==l?d:P;var O=A==d,M=P==d,S=A==P;if(S&&a(p)){if(!a(v))return!1;q=!0,O=!1}if(S&&!O)return _||(_=new e),q||s(p)?t(p,v,y,b,x,_):n(p,v,A,y,b,x,_);if(!(y&u)){var E=O&&h.call(p,"__wrapped__"),R=M&&h.call(v,"__wrapped__");if(E||R){var w=E?p.value():p,k=R?v.value():v;return _||(_=new e),x(w,k,y,b,_)}}return S?(_||(_=new e),r(p,v,y,b,x,_)):!1}return fa=m,fa}var ha,Ah;function vm(){if(Ah)return ha;Ah=1;var e=oC(),t=Qe();function n(r,i,o,a,s){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,o,a,n,s)}return ha=n,ha}var ga,kh;function aC(){if(kh)return ga;kh=1;var e=wr(),t=vm(),n=1,r=2;function i(o,a,s,u){var l=s.length,c=l,d=!u;if(o==null)return!c;for(o=Object(o);l--;){var f=s[l];if(d&&f[2]?f[1]!==o[f[0]]:!(f[0]in o))return!1}for(;++l<c;){f=s[l];var h=f[0],m=o[h],p=f[1];if(d&&f[2]){if(m===void 0&&!(h in o))return!1}else{var v=new e;if(u)var y=u(m,p,h,o,a,v);if(!(y===void 0?t(p,m,n|r,u,v):y))return!1}}return!0}return ga=i,ga}var va,Ih;function pm(){if(Ih)return va;Ih=1;var e=Oe();function t(n){return n===n&&!e(n)}return va=t,va}var pa,Th;function sC(){if(Th)return pa;Th=1;var e=pm(),t=ft();function n(r){for(var i=t(r),o=i.length;o--;){var a=i[o],s=r[a];i[o]=[a,s,e(s)]}return i}return pa=n,pa}var ya,Ph;function ym(){if(Ph)return ya;Ph=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return ya=e,ya}var ma,Nh;function uC(){if(Nh)return ma;Nh=1;var e=aC(),t=sC(),n=ym();function r(i){var o=t(i);return o.length==1&&o[0][2]?n(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return ma=r,ma}var _a,Oh;function Xt(){if(Oh)return _a;Oh=1;var e=Ct(),t=Qe(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return _a=r,_a}var ba,Mh;function al(){if(Mh)return ba;Mh=1;var e=we(),t=Xt(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:r.test(o)||!n.test(o)||a!=null&&o in Object(a)}return ba=i,ba}var wa,Dh;function cC(){if(Dh)return wa;Dh=1;var e=Zc(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],u=o.cache;if(u.has(s))return u.get(s);var l=r.apply(this,a);return o.cache=u.set(s,l)||u,l};return o.cache=new(n.Cache||e),o}return n.Cache=e,wa=n,wa}var xa,Lh;function lC(){if(Lh)return xa;Lh=1;var e=cC(),t=500;function n(r){var i=e(r,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return xa=n,xa}var Ea,zh;function dC(){if(zh)return Ea;zh=1;var e=lC(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,u,l){o.push(u?l.replace(n,"$1"):s||a)}),o});return Ea=r,Ea}var Sa,Fh;function kr(){if(Fh)return Sa;Fh=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,o=Array(i);++r<i;)o[r]=n(t[r],r,t);return o}return Sa=e,Sa}var Ca,Hh;function fC(){if(Hh)return Ca;Hh=1;var e=Yt(),t=kr(),n=we(),r=Xt(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(n(s))return t(s,a)+"";if(r(s))return o?o.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return Ca=a,Ca}var qa,Bh;function mm(){if(Bh)return qa;Bh=1;var e=fC();function t(n){return n==null?"":e(n)}return qa=t,qa}var Ra,Vh;function Ir(){if(Vh)return Ra;Vh=1;var e=we(),t=al(),n=dC(),r=mm();function i(o,a){return e(o)?o:t(o,a)?[o]:n(r(o))}return Ra=i,Ra}var Aa,Gh;function Cn(){if(Gh)return Aa;Gh=1;var e=Xt();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Aa=t,Aa}var ka,Kh;function Tr(){if(Kh)return ka;Kh=1;var e=Ir(),t=Cn();function n(r,i){i=e(i,r);for(var o=0,a=i.length;r!=null&&o<a;)r=r[t(i[o++])];return o&&o==a?r:void 0}return ka=n,ka}var Ia,jh;function hC(){if(jh)return Ia;jh=1;var e=Tr();function t(n,r,i){var o=n==null?void 0:e(n,r);return o===void 0?i:o}return Ia=t,Ia}var Ta,Uh;function gC(){if(Uh)return Ta;Uh=1;function e(t,n){return t!=null&&n in Object(t)}return Ta=e,Ta}var Pa,Yh;function _m(){if(Yh)return Pa;Yh=1;var e=Ir(),t=En(),n=we(),r=Sr(),i=Xc(),o=Cn();function a(s,u,l){u=e(u,s);for(var c=-1,d=u.length,f=!1;++c<d;){var h=o(u[c]);if(!(f=s!=null&&l(s,h)))break;s=s[h]}return f||++c!=d?f:(d=s==null?0:s.length,!!d&&i(d)&&r(h,d)&&(n(s)||t(s)))}return Pa=a,Pa}var Na,Zh;function bm(){if(Zh)return Na;Zh=1;var e=gC(),t=_m();function n(r,i){return r!=null&&t(r,i,e)}return Na=n,Na}var Oa,Wh;function vC(){if(Wh)return Oa;Wh=1;var e=vm(),t=hC(),n=bm(),r=al(),i=pm(),o=ym(),a=Cn(),s=1,u=2;function l(c,d){return r(c)&&i(d)?o(a(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,s|u)}}return Oa=l,Oa}var Ma,Xh;function wm(){if(Xh)return Ma;Xh=1;function e(t){return function(n){return n?.[t]}}return Ma=e,Ma}var Da,Jh;function pC(){if(Jh)return Da;Jh=1;var e=Tr();function t(n){return function(r){return e(r,n)}}return Da=t,Da}var La,Qh;function yC(){if(Qh)return La;Qh=1;var e=wm(),t=pC(),n=al(),r=Cn();function i(o){return n(o)?e(r(o)):t(o)}return La=i,La}var za,$h;function st(){if($h)return za;$h=1;var e=uC(),t=vC(),n=At(),r=we(),i=yC();function o(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return za=o,za}var Fa,eg;function xm(){if(eg)return Fa;eg=1;var e=Qy(),t=QS(),n=st(),r=we();function i(o,a){var s=r(o)?e:t;return s(o,n(a,3))}return Fa=i,Fa}var Ha,tg;function mC(){if(tg)return Ha;tg=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Ha=n,Ha}var Ba,ng;function Em(){if(ng)return Ba;ng=1;var e=mC(),t=_m();function n(r,i){return r!=null&&t(r,i,e)}return Ba=n,Ba}var Va,rg;function _C(){if(rg)return Va;rg=1;var e=Qc(),t=Wt(),n=En(),r=we(),i=at(),o=Zt(),a=qr(),s=Sn(),u="[object Map]",l="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||s(h)||n(h)))return!h.length;var m=t(h);if(m==u||m==l)return!h.size;if(a(h))return!e(h).length;for(var p in h)if(d.call(h,p))return!1;return!0}return Va=f,Va}var Ga,ig;function Sm(){if(ig)return Ga;ig=1;function e(t){return t===void 0}return Ga=e,Ga}var Ka,og;function Cm(){if(og)return Ka;og=1;var e=Ar(),t=at();function n(r,i){var o=-1,a=t(r)?Array(r.length):[];return e(r,function(s,u,l){a[++o]=i(s,u,l)}),a}return Ka=n,Ka}var ja,ag;function qm(){if(ag)return ja;ag=1;var e=kr(),t=st(),n=Cm(),r=we();function i(o,a){var s=r(o)?e:n;return s(o,t(a,3))}return ja=i,ja}var Ua,sg;function bC(){if(sg)return Ua;sg=1;function e(t,n,r,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++o]);++o<a;)r=n(r,t[o],o,t);return r}return Ua=e,Ua}var Ya,ug;function wC(){if(ug)return Ya;ug=1;function e(t,n,r,i,o){return o(t,function(a,s,u){r=i?(i=!1,a):n(r,a,s,u)}),r}return Ya=e,Ya}var Za,cg;function Rm(){if(cg)return Za;cg=1;var e=bC(),t=Ar(),n=st(),r=wC(),i=we();function o(a,s,u){var l=i(a)?e:r,c=arguments.length<3;return l(a,n(s,4),u,c,t)}return Za=o,Za}var Wa,lg;function xC(){if(lg)return Wa;lg=1;var e=Ct(),t=we(),n=Qe(),r="[object String]";function i(o){return typeof o=="string"||!t(o)&&n(o)&&e(o)==r}return Wa=i,Wa}var Xa,dg;function EC(){if(dg)return Xa;dg=1;var e=wm(),t=e("length");return Xa=t,Xa}var Ja,fg;function SC(){if(fg)return Ja;fg=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function u(l){return s.test(l)}return Ja=u,Ja}var Qa,hg;function CC(){if(hg)return Qa;hg=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",m=l+"?",p="["+o+"]?",v="(?:"+h+"(?:"+[c,d,f].join("|")+")"+p+m+")*",y=p+m+v,b="(?:"+[c+s+"?",s,d,f,a].join("|")+")",x=RegExp(u+"(?="+u+")|"+b+y,"g");function _(q){for(var C=x.lastIndex=0;x.test(q);)++C;return C}return Qa=_,Qa}var $a,gg;function qC(){if(gg)return $a;gg=1;var e=EC(),t=SC(),n=CC();function r(i){return t(i)?n(i):e(i)}return $a=r,$a}var es,vg;function RC(){if(vg)return es;vg=1;var e=Qc(),t=Wt(),n=at(),r=xC(),i=qC(),o="[object Map]",a="[object Set]";function s(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var l=t(u);return l==o||l==a?u.size:e(u).length}return es=s,es}var ts,pg;function AC(){if(pg)return ts;pg=1;var e=Wc(),t=am(),n=il(),r=st(),i=Rr(),o=we(),a=Zt(),s=wn(),u=Oe(),l=Sn();function c(d,f,h){var m=o(d),p=m||a(d)||l(d);if(f=r(f,4),h==null){var v=d&&d.constructor;p?h=m?new v:[]:u(d)?h=s(v)?t(i(d)):{}:h={}}return(p?e:n)(d,function(y,b,x){return f(h,y,b,x)}),h}return ts=c,ts}var ns,yg;function kC(){if(yg)return ns;yg=1;var e=Yt(),t=En(),n=we(),r=e?e.isConcatSpreadable:void 0;function i(o){return n(o)||t(o)||!!(r&&o&&o[r])}return ns=i,ns}var rs,mg;function sl(){if(mg)return rs;mg=1;var e=el(),t=kC();function n(r,i,o,a,s){var u=-1,l=r.length;for(o||(o=t),s||(s=[]);++u<l;){var c=r[u];i>0&&o(c)?i>1?n(c,i-1,o,a,s):e(s,c):a||(s[s.length]=c)}return s}return rs=n,rs}var is,_g;function IC(){if(_g)return is;_g=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return is=e,is}var os,bg;function Am(){if(bg)return os;bg=1;var e=IC(),t=Math.max;function n(r,i,o){return i=t(i===void 0?r.length-1:i,0),function(){for(var a=arguments,s=-1,u=t(a.length-i,0),l=Array(u);++s<u;)l[s]=a[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=a[s];return c[i]=o(l),e(r,this,c)}}return os=n,os}var as,wg;function TC(){if(wg)return as;wg=1;var e=nl(),t=Yy(),n=At(),r=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:n;return as=r,as}var ss,xg;function PC(){if(xg)return ss;xg=1;var e=800,t=16,n=Date.now;function r(i){var o=0,a=0;return function(){var s=n(),u=t-(s-a);if(a=s,u>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return ss=r,ss}var us,Eg;function km(){if(Eg)return us;Eg=1;var e=TC(),t=PC(),n=t(e);return us=n,us}var cs,Sg;function Pr(){if(Sg)return cs;Sg=1;var e=At(),t=Am(),n=km();function r(i,o){return n(t(i,o,e),i+"")}return cs=r,cs}var ls,Cg;function Im(){if(Cg)return ls;Cg=1;function e(t,n,r,i){for(var o=t.length,a=r+(i?1:-1);i?a--:++a<o;)if(n(t[a],a,t))return a;return-1}return ls=e,ls}var ds,qg;function NC(){if(qg)return ds;qg=1;function e(t){return t!==t}return ds=e,ds}var fs,Rg;function OC(){if(Rg)return fs;Rg=1;function e(t,n,r){for(var i=r-1,o=t.length;++i<o;)if(t[i]===n)return i;return-1}return fs=e,fs}var hs,Ag;function MC(){if(Ag)return hs;Ag=1;var e=Im(),t=NC(),n=OC();function r(i,o,a){return o===o?n(i,o,a):e(i,t,a)}return hs=r,hs}var gs,kg;function DC(){if(kg)return gs;kg=1;var e=MC();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return gs=t,gs}var vs,Ig;function LC(){if(Ig)return vs;Ig=1;function e(t,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;)if(r(n,t[i]))return!0;return!1}return vs=e,vs}var ps,Tg;function zC(){if(Tg)return ps;Tg=1;function e(){}return ps=e,ps}var ys,Pg;function FC(){if(Pg)return ys;Pg=1;var e=rm(),t=zC(),n=ol(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(o){return new e(o)}:t;return ys=i,ys}var ms,Ng;function HC(){if(Ng)return ms;Ng=1;var e=fm(),t=DC(),n=LC(),r=hm(),i=FC(),o=ol(),a=200;function s(u,l,c){var d=-1,f=t,h=u.length,m=!0,p=[],v=p;if(c)m=!1,f=n;else if(h>=a){var y=l?null:i(u);if(y)return o(y);m=!1,f=r,v=new e}else v=l?[]:p;e:for(;++d<h;){var b=u[d],x=l?l(b):b;if(b=c||b!==0?b:0,m&&x===x){for(var _=v.length;_--;)if(v[_]===x)continue e;l&&v.push(x),p.push(b)}else f(v,x,c)||(v!==p&&v.push(x),p.push(b))}return p}return ms=s,ms}var _s,Og;function Tm(){if(Og)return _s;Og=1;var e=at(),t=Qe();function n(r){return t(r)&&e(r)}return _s=n,_s}var bs,Mg;function BC(){if(Mg)return bs;Mg=1;var e=sl(),t=Pr(),n=HC(),r=Tm(),i=t(function(o){return n(e(o,1,r,!0))});return bs=i,bs}var ws,Dg;function VC(){if(Dg)return ws;Dg=1;var e=kr();function t(n,r){return e(r,function(i){return n[i]})}return ws=t,ws}var xs,Lg;function Pm(){if(Lg)return xs;Lg=1;var e=VC(),t=ft();function n(r){return r==null?[]:e(r,t(r))}return xs=n,xs}var Es,zg;function Me(){if(zg)return Es;zg=1;var e;if(typeof Uc=="function")try{e={clone:WS(),constant:nl(),each:dm(),filter:xm(),has:Em(),isArray:we(),isEmpty:_C(),isFunction:wn(),isUndefined:Sm(),keys:ft(),map:qm(),reduce:Rm(),size:RC(),transform:AC(),union:BC(),values:Pm()}}catch{}return e||(e=window._),Es=e,Es}var Ss,Fg;function ul(){if(Fg)return Ss;Fg=1;var e=Me();Ss=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(m){f.length>1?h.setNode(m,d):h.setNode(m)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(p,v){c(v)&&d.setNode(v,p)}),e.each(this._edgeObjs,function(p){d.hasNode(p.v)&&d.hasNode(p.w)&&d.setEdge(p,f.edge(p))});var h={};function m(p){var v=f.parent(p);return v===void 0||d.hasNode(v)?(h[p]=v,v):v in h?h[v]:m(v)}return this._isCompound&&e.each(d.nodes(),function(p){d.setParent(p,m(p))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(m,p){return h.length>1?f.setEdge(m,p,d):f.setEdge(m,p),p}),this},i.prototype.setEdge=function(){var c,d,f,h,m=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(c=p.v,d=p.w,f=p.name,arguments.length===2&&(h=arguments[1],m=!0)):(c=p,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],m=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var v=s(this._isDirected,c,d,f);if(e.has(this._edgeLabels,v))return m&&(this._edgeLabels[v]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[v]=m?h:this._defaultEdgeLabelFn(c,d,f);var y=u(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[v]=y,o(this._preds[d],c),o(this._sucs[c],d),this._in[d][v]=y,this._out[c][v]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?l(this._isDirected,arguments[0]):s(this._isDirected,c,d,f),m=this._edgeObjs[h];return m&&(c=m.v,d=m.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(m){return m.v===d}):h}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(m){return m.w===d}):h}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function o(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function s(c,d,f,h){var m=""+d,p=""+f;if(!c&&m>p){var v=m;m=p,p=v}return m+r+p+r+(e.isUndefined(h)?t:h)}function u(c,d,f,h){var m=""+d,p=""+f;if(!c&&m>p){var v=m;m=p,p=v}var y={v:m,w:p};return h&&(y.name=h),y}function l(c,d){return s(c,d.v,d.w,d.name)}return Ss}var Cs,Hg;function GC(){return Hg||(Hg=1,Cs="2.1.8"),Cs}var qs,Bg;function KC(){return Bg||(Bg=1,qs={Graph:ul(),version:GC()}),qs}var Rs,Vg;function jC(){if(Vg)return Rs;Vg=1;var e=Me(),t=ul();Rs={write:n,read:o};function n(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function r(a){return e.map(a.nodes(),function(s){var u=a.node(s),l=a.parent(s),c={v:s};return e.isUndefined(u)||(c.value=u),e.isUndefined(l)||(c.parent=l),c})}function i(a){return e.map(a.edges(),function(s){var u=a.edge(s),l={v:s.v,w:s.w};return e.isUndefined(s.name)||(l.name=s.name),e.isUndefined(u)||(l.value=u),l})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(u){s.setNode(u.v,u.value),u.parent&&s.setParent(u.v,u.parent)}),e.each(a.edges,function(u){s.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),s}return Rs}var As,Gg;function UC(){if(Gg)return As;Gg=1;var e=Me();As=t;function t(n){var r={},i=[],o;function a(s){e.has(r,s)||(r[s]=!0,o.push(s),e.each(n.successors(s),a),e.each(n.predecessors(s),a))}return e.each(n.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return As}var ks,Kg;function Nm(){if(Kg)return ks;Kg=1;var e=Me();ks=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var o=this._arr,a=o.length;return i[n]=a,o.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,o=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,o<r.length&&(a=r[o].priority<r[a].priority?o:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,o;n!==0&&(o=n>>1,!(r[o].priority<i));)this._swap(n,o),n=o},t.prototype._swap=function(n,r){var i=this._arr,o=this._keyIndices,a=i[n],s=i[r];i[n]=s,i[r]=a,o[s.key]=n,o[a.key]=r},ks}var Is,jg;function Om(){if(jg)return Is;jg=1;var e=Me(),t=Nm();Is=r;var n=e.constant(1);function r(o,a,s,u){return i(o,String(a),s||n,u||function(l){return o.outEdges(l)})}function i(o,a,s,u){var l={},c=new t,d,f,h=function(m){var p=m.v!==d?m.v:m.w,v=l[p],y=s(m),b=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+y);b<v.distance&&(v.distance=b,v.predecessor=d,c.decrease(p,b))};for(o.nodes().forEach(function(m){var p=m===a?0:Number.POSITIVE_INFINITY;l[m]={distance:p},c.add(m,p)});c.size()>0&&(d=c.removeMin(),f=l[d],f.distance!==Number.POSITIVE_INFINITY);)u(d).forEach(h);return l}return Is}var Ts,Ug;function YC(){if(Ug)return Ts;Ug=1;var e=Om(),t=Me();Ts=n;function n(r,i,o){return t.transform(r.nodes(),function(a,s){a[s]=e(r,s,i,o)},{})}return Ts}var Ps,Yg;function Mm(){if(Yg)return Ps;Yg=1;var e=Me();Ps=t;function t(n){var r=0,i=[],o={},a=[];function s(u){var l=o[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(f){e.has(o,f)?o[f].onStack&&(l.lowlink=Math.min(l.lowlink,o[f].index)):(s(f),l.lowlink=Math.min(l.lowlink,o[f].lowlink))}),l.lowlink===l.index){var c=[],d;do d=i.pop(),o[d].onStack=!1,c.push(d);while(u!==d);a.push(c)}}return n.nodes().forEach(function(u){e.has(o,u)||s(u)}),a}return Ps}var Ns,Zg;function ZC(){if(Zg)return Ns;Zg=1;var e=Me(),t=Mm();Ns=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Ns}var Os,Wg;function WC(){if(Wg)return Os;Wg=1;var e=Me();Os=n;var t=e.constant(1);function n(i,o,a){return r(i,o||t,a||function(s){return i.outEdges(s)})}function r(i,o,a){var s={},u=i.nodes();return u.forEach(function(l){s[l]={},s[l][l]={distance:0},u.forEach(function(c){l!==c&&(s[l][c]={distance:Number.POSITIVE_INFINITY})}),a(l).forEach(function(c){var d=c.v===l?c.w:c.v,f=o(c);s[l][d]={distance:f,predecessor:l}})}),u.forEach(function(l){var c=s[l];u.forEach(function(d){var f=s[d];u.forEach(function(h){var m=f[l],p=c[h],v=f[h],y=m.distance+p.distance;y<v.distance&&(v.distance=y,v.predecessor=p.predecessor)})})}),s}return Os}var Ms,Xg;function Dm(){if(Xg)return Ms;Xg=1;var e=Me();Ms=t,t.CycleException=n;function t(r){var i={},o={},a=[];function s(u){if(e.has(o,u))throw new n;e.has(i,u)||(o[u]=!0,i[u]=!0,e.each(r.predecessors(u),s),delete o[u],a.push(u))}if(e.each(r.sinks(),s),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,Ms}var Ds,Jg;function XC(){if(Jg)return Ds;Jg=1;var e=Dm();Ds=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Ds}var Ls,Qg;function Lm(){if(Qg)return Ls;Qg=1;var e=Me();Ls=t;function t(r,i,o){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],u={};return e.each(i,function(l){if(!r.hasNode(l))throw new Error("Graph does not have node: "+l);n(r,l,o==="post",u,a,s)}),s}function n(r,i,o,a,s,u){e.has(a,i)||(a[i]=!0,o||u.push(i),e.each(s(i),function(l){n(r,l,o,a,s,u)}),o&&u.push(i))}return Ls}var zs,$g;function JC(){if($g)return zs;$g=1;var e=Lm();zs=t;function t(n,r){return e(n,r,"post")}return zs}var Fs,ev;function QC(){if(ev)return Fs;ev=1;var e=Lm();Fs=t;function t(n,r){return e(n,r,"pre")}return Fs}var Hs,tv;function $C(){if(tv)return Hs;tv=1;var e=Me(),t=ul(),n=Nm();Hs=r;function r(i,o){var a=new t,s={},u=new n,l;function c(f){var h=f.v===l?f.w:f.v,m=u.priority(h);if(m!==void 0){var p=o(f);p<m&&(s[h]=l,u.decrease(h,p))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(i.nodes()[0],0);for(var d=!1;u.size()>0;){if(l=u.removeMin(),e.has(s,l))a.setEdge(l,s[l]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(l).forEach(c)}return a}return Hs}var Bs,nv;function eq(){return nv||(nv=1,Bs={components:UC(),dijkstra:Om(),dijkstraAll:YC(),findCycles:ZC(),floydWarshall:WC(),isAcyclic:XC(),postorder:JC(),preorder:QC(),prim:$C(),tarjan:Mm(),topsort:Dm()}),Bs}var Vs,rv;function tq(){if(rv)return Vs;rv=1;var e=KC();return Vs={Graph:e.Graph,json:jC(),alg:eq(),version:e.version},Vs}var Gs,iv;function He(){if(iv)return Gs;iv=1;var e;if(typeof Uc=="function")try{e=tq()}catch{}return e||(e=window.graphlib),Gs=e,Gs}var Ks,ov;function nq(){if(ov)return Ks;ov=1;var e=um(),t=1,n=4;function r(i){return e(i,t|n)}return Ks=r,Ks}var js,av;function Nr(){if(av)return js;av=1;var e=Ut(),t=at(),n=Sr(),r=Oe();function i(o,a,s){if(!r(s))return!1;var u=typeof a;return(u=="number"?t(s)&&n(a,s.length):u=="string"&&a in s)?e(s[a],o):!1}return js=i,js}var Us,sv;function rq(){if(sv)return Us;sv=1;var e=Pr(),t=Ut(),n=Nr(),r=Rt(),i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,u){s=Object(s);var l=-1,c=u.length,d=c>2?u[2]:void 0;for(d&&n(u[0],u[1],d)&&(c=1);++l<c;)for(var f=u[l],h=r(f),m=-1,p=h.length;++m<p;){var v=h[m],y=s[v];(y===void 0||t(y,i[v])&&!o.call(s,v))&&(s[v]=f[v])}return s});return Us=a,Us}var Ys,uv;function iq(){if(uv)return Ys;uv=1;var e=st(),t=at(),n=ft();function r(i){return function(o,a,s){var u=Object(o);if(!t(o)){var l=e(a,3);o=n(o),a=function(d){return l(u[d],d,u)}}var c=i(o,a,s);return c>-1?u[l?o[c]:c]:void 0}}return Ys=r,Ys}var Zs,cv;function oq(){if(cv)return Zs;cv=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Zs=t,Zs}var Ws,lv;function aq(){if(lv)return Ws;lv=1;var e=oq(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Ws=n,Ws}var Xs,dv;function sq(){if(dv)return Xs;dv=1;var e=aq(),t=Oe(),n=Xt(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(n(l))return r;if(t(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=t(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=e(l);var d=o.test(l);return d||a.test(l)?s(l.slice(2),d?2:8):i.test(l)?r:+l}return Xs=u,Xs}var Js,fv;function zm(){if(fv)return Js;fv=1;var e=sq(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*n}return i===i?i:0}return Js=r,Js}var Qs,hv;function uq(){if(hv)return Qs;hv=1;var e=zm();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Qs=t,Qs}var $s,gv;function cq(){if(gv)return $s;gv=1;var e=Im(),t=st(),n=uq(),r=Math.max;function i(o,a,s){var u=o==null?0:o.length;if(!u)return-1;var l=s==null?0:n(s);return l<0&&(l=r(u+l,0)),e(o,t(a,3),l)}return $s=i,$s}var eu,vv;function lq(){if(vv)return eu;vv=1;var e=iq(),t=cq(),n=e(t);return eu=n,eu}var tu,pv;function Fm(){if(pv)return tu;pv=1;var e=sl();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return tu=t,tu}var nu,yv;function dq(){if(yv)return nu;yv=1;var e=rl(),t=cm(),n=Rt();function r(i,o){return i==null?i:e(i,t(o),n)}return nu=r,nu}var ru,mv;function fq(){if(mv)return ru;mv=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ru=e,ru}var iu,_v;function hq(){if(_v)return iu;_v=1;var e=xr(),t=il(),n=st();function r(i,o){var a={};return o=n(o,3),t(i,function(s,u,l){e(a,u,o(s,u,l))}),a}return iu=r,iu}var ou,bv;function cl(){if(bv)return ou;bv=1;var e=Xt();function t(n,r,i){for(var o=-1,a=n.length;++o<a;){var s=n[o],u=r(s);if(u!=null&&(l===void 0?u===u&&!e(u):i(u,l)))var l=u,c=s}return c}return ou=t,ou}var au,wv;function gq(){if(wv)return au;wv=1;function e(t,n){return t>n}return au=e,au}var su,xv;function vq(){if(xv)return su;xv=1;var e=cl(),t=gq(),n=At();function r(i){return i&&i.length?e(i,n,t):void 0}return su=r,su}var uu,Ev;function Hm(){if(Ev)return uu;Ev=1;var e=xr(),t=Ut();function n(r,i,o){(o!==void 0&&!t(r[i],o)||o===void 0&&!(i in r))&&e(r,i,o)}return uu=n,uu}var cu,Sv;function pq(){if(Sv)return cu;Sv=1;var e=Ct(),t=Rr(),n=Qe(),r="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,u=a.call(Object);function l(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=s.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==u}return cu=l,cu}var lu,Cv;function Bm(){if(Cv)return lu;Cv=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return lu=e,lu}var du,qv;function yq(){if(qv)return du;qv=1;var e=xn(),t=Rt();function n(r){return e(r,t(r))}return du=n,du}var fu,Rv;function mq(){if(Rv)return fu;Rv=1;var e=Hm(),t=Xy(),n=om(),r=Jy(),i=sm(),o=En(),a=we(),s=Tm(),u=Zt(),l=wn(),c=Oe(),d=pq(),f=Sn(),h=Bm(),m=yq();function p(v,y,b,x,_,q,C){var A=h(v,b),P=h(y,b),O=C.get(P);if(O){e(v,b,O);return}var M=q?q(A,P,b+"",v,y,C):void 0,S=M===void 0;if(S){var E=a(P),R=!E&&u(P),w=!E&&!R&&f(P);M=P,E||R||w?a(A)?M=A:s(A)?M=r(A):R?(S=!1,M=t(P,!0)):w?(S=!1,M=n(P,!0)):M=[]:d(P)||o(P)?(M=A,o(A)?M=m(A):(!c(A)||l(A))&&(M=i(P))):S=!1}S&&(C.set(P,M),_(M,P,x,q,C),C.delete(P)),e(v,b,M)}return fu=p,fu}var hu,Av;function _q(){if(Av)return hu;Av=1;var e=wr(),t=Hm(),n=rl(),r=mq(),i=Oe(),o=Rt(),a=Bm();function s(u,l,c,d,f){u!==l&&n(l,function(h,m){if(f||(f=new e),i(h))r(u,l,m,c,s,d,f);else{var p=d?d(a(u,m),h,m+"",u,l,f):void 0;p===void 0&&(p=h),t(u,m,p)}},o)}return hu=s,hu}var gu,kv;function bq(){if(kv)return gu;kv=1;var e=Pr(),t=Nr();function n(r){return e(function(i,o){var a=-1,s=o.length,u=s>1?o[s-1]:void 0,l=s>2?o[2]:void 0;for(u=r.length>3&&typeof u=="function"?(s--,u):void 0,l&&t(o[0],o[1],l)&&(u=s<3?void 0:u,s=1),i=Object(i);++a<s;){var c=o[a];c&&r(i,c,a,u)}return i})}return gu=n,gu}var vu,Iv;function wq(){if(Iv)return vu;Iv=1;var e=_q(),t=bq(),n=t(function(r,i,o){e(r,i,o)});return vu=n,vu}var pu,Tv;function Vm(){if(Tv)return pu;Tv=1;function e(t,n){return t<n}return pu=e,pu}var yu,Pv;function xq(){if(Pv)return yu;Pv=1;var e=cl(),t=Vm(),n=At();function r(i){return i&&i.length?e(i,n,t):void 0}return yu=r,yu}var mu,Nv;function Eq(){if(Nv)return mu;Nv=1;var e=cl(),t=st(),n=Vm();function r(i,o){return i&&i.length?e(i,t(o,2),n):void 0}return mu=r,mu}var _u,Ov;function Sq(){if(Ov)return _u;Ov=1;var e=Ve(),t=function(){return e.Date.now()};return _u=t,_u}var bu,Mv;function Cq(){if(Mv)return bu;Mv=1;var e=Er(),t=Ir(),n=Sr(),r=Oe(),i=Cn();function o(a,s,u,l){if(!r(a))return a;s=t(s,a);for(var c=-1,d=s.length,f=d-1,h=a;h!=null&&++c<d;){var m=i(s[c]),p=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return a;if(c!=f){var v=h[m];p=l?l(v,m,h):void 0,p===void 0&&(p=r(v)?v:n(s[c+1])?[]:{})}e(h,m,p),h=h[m]}return a}return bu=o,bu}var wu,Dv;function qq(){if(Dv)return wu;Dv=1;var e=Tr(),t=Cq(),n=Ir();function r(i,o,a){for(var s=-1,u=o.length,l={};++s<u;){var c=o[s],d=e(i,c);a(d,c)&&t(l,n(c,i),d)}return l}return wu=r,wu}var xu,Lv;function Rq(){if(Lv)return xu;Lv=1;var e=qq(),t=bm();function n(r,i){return e(r,i,function(o,a){return t(r,a)})}return xu=n,xu}var Eu,zv;function Aq(){if(zv)return Eu;zv=1;var e=Fm(),t=Am(),n=km();function r(i){return n(t(i,void 0,e),i+"")}return Eu=r,Eu}var Su,Fv;function kq(){if(Fv)return Su;Fv=1;var e=Rq(),t=Aq(),n=t(function(r,i){return r==null?{}:e(r,i)});return Su=n,Su}var Cu,Hv;function Iq(){if(Hv)return Cu;Hv=1;var e=Math.ceil,t=Math.max;function n(r,i,o,a){for(var s=-1,u=t(e((i-r)/(o||1)),0),l=Array(u);u--;)l[a?u:++s]=r,r+=o;return l}return Cu=n,Cu}var qu,Bv;function Tq(){if(Bv)return qu;Bv=1;var e=Iq(),t=Nr(),n=zm();function r(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=n(o),a===void 0?(a=o,o=0):a=n(a),s=s===void 0?o<a?1:-1:n(s),e(o,a,s,i)}}return qu=r,qu}var Ru,Vv;function Pq(){if(Vv)return Ru;Vv=1;var e=Tq(),t=e();return Ru=t,Ru}var Au,Gv;function Nq(){if(Gv)return Au;Gv=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Au=e,Au}var ku,Kv;function Oq(){if(Kv)return ku;Kv=1;var e=Xt();function t(n,r){if(n!==r){var i=n!==void 0,o=n===null,a=n===n,s=e(n),u=r!==void 0,l=r===null,c=r===r,d=e(r);if(!l&&!d&&!s&&n>r||s&&u&&c&&!l&&!d||o&&u&&c||!i&&c||!a)return 1;if(!o&&!s&&!d&&n<r||d&&i&&a&&!o&&!s||l&&i&&a||!u&&a||!c)return-1}return 0}return ku=t,ku}var Iu,jv;function Mq(){if(jv)return Iu;jv=1;var e=Oq();function t(n,r,i){for(var o=-1,a=n.criteria,s=r.criteria,u=a.length,l=i.length;++o<u;){var c=e(a[o],s[o]);if(c){if(o>=l)return c;var d=i[o];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Iu=t,Iu}var Tu,Uv;function Dq(){if(Uv)return Tu;Uv=1;var e=kr(),t=Tr(),n=st(),r=Cm(),i=Nq(),o=Cr(),a=Mq(),s=At(),u=we();function l(c,d,f){d.length?d=e(d,function(p){return u(p)?function(v){return t(v,p.length===1?p[0]:p)}:p}):d=[s];var h=-1;d=e(d,o(n));var m=r(c,function(p,v,y){var b=e(d,function(x){return x(p)});return{criteria:b,index:++h,value:p}});return i(m,function(p,v){return a(p,v,f)})}return Tu=l,Tu}var Pu,Yv;function Lq(){if(Yv)return Pu;Yv=1;var e=sl(),t=Dq(),n=Pr(),r=Nr(),i=n(function(o,a){if(o==null)return[];var s=a.length;return s>1&&r(o,a[0],a[1])?a=[]:s>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return Pu=i,Pu}var Nu,Zv;function zq(){if(Zv)return Nu;Zv=1;var e=mm(),t=0;function n(r){var i=++t;return e(r)+i}return Nu=n,Nu}var Ou,Wv;function Fq(){if(Wv)return Ou;Wv=1;function e(t,n,r){for(var i=-1,o=t.length,a=n.length,s={};++i<o;){var u=i<a?n[i]:void 0;r(s,t[i],u)}return s}return Ou=e,Ou}var Mu,Xv;function Hq(){if(Xv)return Mu;Xv=1;var e=Er(),t=Fq();function n(r,i){return t(r||[],i||[],e)}return Mu=n,Mu}var Du,Jv;function ge(){if(Jv)return Du;Jv=1;var e;if(typeof Uc=="function")try{e={cloneDeep:nq(),constant:nl(),defaults:rq(),each:dm(),filter:xm(),find:lq(),flatten:Fm(),forEach:lm(),forIn:dq(),has:Em(),isUndefined:Sm(),last:fq(),map:qm(),mapValues:hq(),max:vq(),merge:wq(),min:xq(),minBy:Eq(),now:Sq(),pick:kq(),range:Pq(),reduce:Rm(),sortBy:Lq(),uniqueId:zq(),values:Pm(),zipObject:Hq()}}catch{}return e||(e=window._),Du=e,Du}var Lu,Qv;function Bq(){if(Qv)return Lu;Qv=1,Lu=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,o=i._prev;o!==i;)r.push(JSON.stringify(o,n)),o=o._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Lu}var zu,$v;function Vq(){if($v)return zu;$v=1;var e=ge(),t=He().Graph,n=Bq();zu=i;var r=e.constant(1);function i(l,c){if(l.nodeCount()<=1)return[];var d=s(l,c||r),f=o(d.graph,d.buckets,d.zeroIdx);return e.flatten(e.map(f,function(h){return l.outEdges(h.v,h.w)}),!0)}function o(l,c,d){for(var f=[],h=c[c.length-1],m=c[0],p;l.nodeCount();){for(;p=m.dequeue();)a(l,c,d,p);for(;p=h.dequeue();)a(l,c,d,p);if(l.nodeCount()){for(var v=c.length-2;v>0;--v)if(p=c[v].dequeue(),p){f=f.concat(a(l,c,d,p,!0));break}}}return f}function a(l,c,d,f,h){var m=h?[]:void 0;return e.forEach(l.inEdges(f.v),function(p){var v=l.edge(p),y=l.node(p.v);h&&m.push({v:p.v,w:p.w}),y.out-=v,u(c,d,y)}),e.forEach(l.outEdges(f.v),function(p){var v=l.edge(p),y=p.w,b=l.node(y);b.in-=v,u(c,d,b)}),l.removeNode(f.v),m}function s(l,c){var d=new t,f=0,h=0;e.forEach(l.nodes(),function(v){d.setNode(v,{v,in:0,out:0})}),e.forEach(l.edges(),function(v){var y=d.edge(v.v,v.w)||0,b=c(v),x=y+b;d.setEdge(v.v,v.w,x),h=Math.max(h,d.node(v.v).out+=b),f=Math.max(f,d.node(v.w).in+=b)});var m=e.range(h+f+3).map(function(){return new n}),p=f+1;return e.forEach(d.nodes(),function(v){u(m,p,d.node(v))}),{graph:d,buckets:m,zeroIdx:p}}function u(l,c,d){d.out?d.in?l[d.out-d.in+c].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}return zu}var Fu,ep;function Gq(){if(ep)return Fu;ep=1;var e=ge(),t=Vq();Fu={run:n,undo:i};function n(o){var a=o.graph().acyclicer==="greedy"?t(o,s(o)):r(o);e.forEach(a,function(u){var l=o.edge(u);o.removeEdge(u),l.forwardName=u.name,l.reversed=!0,o.setEdge(u.w,u.v,l,e.uniqueId("rev"))});function s(u){return function(l){return u.edge(l).weight}}}function r(o){var a=[],s={},u={};function l(c){e.has(u,c)||(u[c]=!0,s[c]=!0,e.forEach(o.outEdges(c),function(d){e.has(s,d.w)?a.push(d):l(d.w)}),delete s[c])}return e.forEach(o.nodes(),l),a}function i(o){e.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var u=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,u)}})}return Fu}var Hu,tp;function ke(){if(tp)return Hu;tp=1;var e=ge(),t=He().Graph;Hu={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:c,addBorderNode:d,maxRank:f,partition:h,time:m,notime:p};function n(v,y,b,x){var _;do _=e.uniqueId(x);while(v.hasNode(_));return b.dummy=y,v.setNode(_,b),_}function r(v){var y=new t().setGraph(v.graph());return e.forEach(v.nodes(),function(b){y.setNode(b,v.node(b))}),e.forEach(v.edges(),function(b){var x=y.edge(b.v,b.w)||{weight:0,minlen:1},_=v.edge(b);y.setEdge(b.v,b.w,{weight:x.weight+_.weight,minlen:Math.max(x.minlen,_.minlen)})}),y}function i(v){var y=new t({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(b){v.children(b).length||y.setNode(b,v.node(b))}),e.forEach(v.edges(),function(b){y.setEdge(b,v.edge(b))}),y}function o(v){var y=e.map(v.nodes(),function(b){var x={};return e.forEach(v.outEdges(b),function(_){x[_.w]=(x[_.w]||0)+v.edge(_).weight}),x});return e.zipObject(v.nodes(),y)}function a(v){var y=e.map(v.nodes(),function(b){var x={};return e.forEach(v.inEdges(b),function(_){x[_.v]=(x[_.v]||0)+v.edge(_).weight}),x});return e.zipObject(v.nodes(),y)}function s(v,y){var b=v.x,x=v.y,_=y.x-b,q=y.y-x,C=v.width/2,A=v.height/2;if(!_&&!q)throw new Error("Not possible to find intersection inside of the rectangle");var P,O;return Math.abs(q)*C>Math.abs(_)*A?(q<0&&(A=-A),P=A*_/q,O=A):(_<0&&(C=-C),P=C,O=C*q/_),{x:b+P,y:x+O}}function u(v){var y=e.map(e.range(f(v)+1),function(){return[]});return e.forEach(v.nodes(),function(b){var x=v.node(b),_=x.rank;e.isUndefined(_)||(y[_][x.order]=b)}),y}function l(v){var y=e.min(e.map(v.nodes(),function(b){return v.node(b).rank}));e.forEach(v.nodes(),function(b){var x=v.node(b);e.has(x,"rank")&&(x.rank-=y)})}function c(v){var y=e.min(e.map(v.nodes(),function(q){return v.node(q).rank})),b=[];e.forEach(v.nodes(),function(q){var C=v.node(q).rank-y;b[C]||(b[C]=[]),b[C].push(q)});var x=0,_=v.graph().nodeRankFactor;e.forEach(b,function(q,C){e.isUndefined(q)&&C%_!==0?--x:x&&e.forEach(q,function(A){v.node(A).rank+=x})})}function d(v,y,b,x){var _={width:0,height:0};return arguments.length>=4&&(_.rank=b,_.order=x),n(v,"border",_,y)}function f(v){return e.max(e.map(v.nodes(),function(y){var b=v.node(y).rank;if(!e.isUndefined(b))return b}))}function h(v,y){var b={lhs:[],rhs:[]};return e.forEach(v,function(x){y(x)?b.lhs.push(x):b.rhs.push(x)}),b}function m(v,y){var b=e.now();try{return y()}finally{console.log(v+" time: "+(e.now()-b)+"ms")}}function p(v,y){return y()}return Hu}var Bu,np;function Kq(){if(np)return Bu;np=1;var e=ge(),t=ke();Bu={run:n,undo:i};function n(o){o.graph().dummyChains=[],e.forEach(o.edges(),function(a){r(o,a)})}function r(o,a){var s=a.v,u=o.node(s).rank,l=a.w,c=o.node(l).rank,d=a.name,f=o.edge(a),h=f.labelRank;if(c!==u+1){o.removeEdge(a);var m,p,v;for(v=0,++u;u<c;++v,++u)f.points=[],p={width:0,height:0,edgeLabel:f,edgeObj:a,rank:u},m=t.addDummyNode(o,"edge",p,"_d"),u===h&&(p.width=f.width,p.height=f.height,p.dummy="edge-label",p.labelpos=f.labelpos),o.setEdge(s,m,{weight:f.weight},d),v===0&&o.graph().dummyChains.push(m),s=m;o.setEdge(s,l,{weight:f.weight},d)}}function i(o){e.forEach(o.graph().dummyChains,function(a){var s=o.node(a),u=s.edgeLabel,l;for(o.setEdge(s.edgeObj,u);s.dummy;)l=o.successors(a)[0],o.removeNode(a),u.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(u.x=s.x,u.y=s.y,u.width=s.width,u.height=s.height),a=l,s=o.node(a)})}return Bu}var Vu,rp;function nr(){if(rp)return Vu;rp=1;var e=ge();Vu={longestPath:t,slack:n};function t(r){var i={};function o(a){var s=r.node(a);if(e.has(i,a))return s.rank;i[a]=!0;var u=e.min(e.map(r.outEdges(a),function(l){return o(l.w)-r.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),s.rank=u}e.forEach(r.sources(),o)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Vu}var Gu,ip;function Gm(){if(ip)return Gu;ip=1;var e=ge(),t=He().Graph,n=nr().slack;Gu=r;function r(s){var u=new t({directed:!1}),l=s.nodes()[0],c=s.nodeCount();u.setNode(l,{});for(var d,f;i(u,s)<c;)d=o(u,s),f=u.hasNode(d.v)?n(s,d):-n(s,d),a(u,s,f);return u}function i(s,u){function l(c){e.forEach(u.nodeEdges(c),function(d){var f=d.v,h=c===f?d.w:f;!s.hasNode(h)&&!n(u,d)&&(s.setNode(h,{}),s.setEdge(c,h,{}),l(h))})}return e.forEach(s.nodes(),l),s.nodeCount()}function o(s,u){return e.minBy(u.edges(),function(l){if(s.hasNode(l.v)!==s.hasNode(l.w))return n(u,l)})}function a(s,u,l){e.forEach(s.nodes(),function(c){u.node(c).rank+=l})}return Gu}var Ku,op;function jq(){if(op)return Ku;op=1;var e=ge(),t=Gm(),n=nr().slack,r=nr().longestPath,i=He().alg.preorder,o=He().alg.postorder,a=ke().simplify;Ku=s,s.initLowLimValues=d,s.initCutValues=u,s.calcCutValue=c,s.leaveEdge=h,s.enterEdge=m,s.exchangeEdges=p;function s(x){x=a(x),r(x);var _=t(x);d(_),u(_,x);for(var q,C;q=h(_);)C=m(_,x,q),p(_,x,q,C)}function u(x,_){var q=o(x,x.nodes());q=q.slice(0,q.length-1),e.forEach(q,function(C){l(x,_,C)})}function l(x,_,q){var C=x.node(q),A=C.parent;x.edge(q,A).cutvalue=c(x,_,q)}function c(x,_,q){var C=x.node(q),A=C.parent,P=!0,O=_.edge(q,A),M=0;return O||(P=!1,O=_.edge(A,q)),M=O.weight,e.forEach(_.nodeEdges(q),function(S){var E=S.v===q,R=E?S.w:S.v;if(R!==A){var w=E===P,k=_.edge(S).weight;if(M+=w?k:-k,y(x,q,R)){var T=x.edge(q,R).cutvalue;M+=w?-T:T}}}),M}function d(x,_){arguments.length<2&&(_=x.nodes()[0]),f(x,{},1,_)}function f(x,_,q,C,A){var P=q,O=x.node(C);return _[C]=!0,e.forEach(x.neighbors(C),function(M){e.has(_,M)||(q=f(x,_,q,M,C))}),O.low=P,O.lim=q++,A?O.parent=A:delete O.parent,q}function h(x){return e.find(x.edges(),function(_){return x.edge(_).cutvalue<0})}function m(x,_,q){var C=q.v,A=q.w;_.hasEdge(C,A)||(C=q.w,A=q.v);var P=x.node(C),O=x.node(A),M=P,S=!1;P.lim>O.lim&&(M=O,S=!0);var E=e.filter(_.edges(),function(R){return S===b(x,x.node(R.v),M)&&S!==b(x,x.node(R.w),M)});return e.minBy(E,function(R){return n(_,R)})}function p(x,_,q,C){var A=q.v,P=q.w;x.removeEdge(A,P),x.setEdge(C.v,C.w,{}),d(x),u(x,_),v(x,_)}function v(x,_){var q=e.find(x.nodes(),function(A){return!_.node(A).parent}),C=i(x,q);C=C.slice(1),e.forEach(C,function(A){var P=x.node(A).parent,O=_.edge(A,P),M=!1;O||(O=_.edge(P,A),M=!0),_.node(A).rank=_.node(P).rank+(M?O.minlen:-O.minlen)})}function y(x,_,q){return x.hasEdge(_,q)}function b(x,_,q){return q.low<=_.lim&&_.lim<=q.lim}return Ku}var ju,ap;function Uq(){if(ap)return ju;ap=1;var e=nr(),t=e.longestPath,n=Gm(),r=jq();ju=i;function i(u){switch(u.graph().ranker){case"network-simplex":s(u);break;case"tight-tree":a(u);break;case"longest-path":o(u);break;default:s(u)}}var o=t;function a(u){t(u),n(u)}function s(u){r(u)}return ju}var Uu,sp;function Yq(){if(sp)return Uu;sp=1;var e=ge();Uu=t;function t(i){var o=r(i);e.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),u=s.edgeObj,l=n(i,o,u.v,u.w),c=l.path,d=l.lca,f=0,h=c[f],m=!0;a!==u.w;){if(s=i.node(a),m){for(;(h=c[f])!==d&&i.node(h).maxRank<s.rank;)f++;h===d&&(m=!1)}if(!m){for(;f<c.length-1&&i.node(h=c[f+1]).minRank<=s.rank;)f++;h=c[f]}i.setParent(a,h),a=i.successors(a)[0]}})}function n(i,o,a,s){var u=[],l=[],c=Math.min(o[a].low,o[s].low),d=Math.max(o[a].lim,o[s].lim),f,h;f=a;do f=i.parent(f),u.push(f);while(f&&(o[f].low>c||d>o[f].lim));for(h=f,f=s;(f=i.parent(f))!==h;)l.push(f);return{path:u.concat(l.reverse()),lca:h}}function r(i){var o={},a=0;function s(u){var l=a;e.forEach(i.children(u),s),o[u]={low:l,lim:a++}}return e.forEach(i.children(),s),o}return Uu}var Yu,up;function Zq(){if(up)return Yu;up=1;var e=ge(),t=ke();Yu={run:n,cleanup:a};function n(s){var u=t.addDummyNode(s,"root",{},"_root"),l=i(s),c=e.max(e.values(l))-1,d=2*c+1;s.graph().nestingRoot=u,e.forEach(s.edges(),function(h){s.edge(h).minlen*=d});var f=o(s)+1;e.forEach(s.children(),function(h){r(s,u,d,f,c,l,h)}),s.graph().nodeRankFactor=d}function r(s,u,l,c,d,f,h){var m=s.children(h);if(!m.length){h!==u&&s.setEdge(u,h,{weight:0,minlen:l});return}var p=t.addBorderNode(s,"_bt"),v=t.addBorderNode(s,"_bb"),y=s.node(h);s.setParent(p,h),y.borderTop=p,s.setParent(v,h),y.borderBottom=v,e.forEach(m,function(b){r(s,u,l,c,d,f,b);var x=s.node(b),_=x.borderTop?x.borderTop:b,q=x.borderBottom?x.borderBottom:b,C=x.borderTop?c:2*c,A=_!==q?1:d-f[h]+1;s.setEdge(p,_,{weight:C,minlen:A,nestingEdge:!0}),s.setEdge(q,v,{weight:C,minlen:A,nestingEdge:!0})}),s.parent(h)||s.setEdge(u,p,{weight:0,minlen:d+f[h]})}function i(s){var u={};function l(c,d){var f=s.children(c);f&&f.length&&e.forEach(f,function(h){l(h,d+1)}),u[c]=d}return e.forEach(s.children(),function(c){l(c,1)}),u}function o(s){return e.reduce(s.edges(),function(u,l){return u+s.edge(l).weight},0)}function a(s){var u=s.graph();s.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(s.edges(),function(l){var c=s.edge(l);c.nestingEdge&&s.removeEdge(l)})}return Yu}var Zu,cp;function Wq(){if(cp)return Zu;cp=1;var e=ge(),t=ke();Zu=n;function n(i){function o(a){var s=i.children(a),u=i.node(a);if(s.length&&e.forEach(s,o),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,c=u.maxRank+1;l<c;++l)r(i,"borderLeft","_bl",a,u,l),r(i,"borderRight","_br",a,u,l)}}e.forEach(i.children(),o)}function r(i,o,a,s,u,l){var c={width:0,height:0,rank:l,borderType:o},d=u[o][l-1],f=t.addDummyNode(i,"border",c,a);u[o][l]=f,i.setParent(f,s),d&&i.setEdge(d,f,{weight:1})}return Zu}var Wu,lp;function Xq(){if(lp)return Wu;lp=1;var e=ge();Wu={adjust:t,undo:n};function t(l){var c=l.graph().rankdir.toLowerCase();(c==="lr"||c==="rl")&&r(l)}function n(l){var c=l.graph().rankdir.toLowerCase();(c==="bt"||c==="rl")&&o(l),(c==="lr"||c==="rl")&&(s(l),r(l))}function r(l){e.forEach(l.nodes(),function(c){i(l.node(c))}),e.forEach(l.edges(),function(c){i(l.edge(c))})}function i(l){var c=l.width;l.width=l.height,l.height=c}function o(l){e.forEach(l.nodes(),function(c){a(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,a),e.has(d,"y")&&a(d)})}function a(l){l.y=-l.y}function s(l){e.forEach(l.nodes(),function(c){u(l.node(c))}),e.forEach(l.edges(),function(c){var d=l.edge(c);e.forEach(d.points,u),e.has(d,"x")&&u(d)})}function u(l){var c=l.x;l.x=l.y,l.y=c}return Wu}var Xu,dp;function Jq(){if(dp)return Xu;dp=1;var e=ge();Xu=t;function t(n){var r={},i=e.filter(n.nodes(),function(l){return!n.children(l).length}),o=e.max(e.map(i,function(l){return n.node(l).rank})),a=e.map(e.range(o+1),function(){return[]});function s(l){if(!e.has(r,l)){r[l]=!0;var c=n.node(l);a[c.rank].push(l),e.forEach(n.successors(l),s)}}var u=e.sortBy(i,function(l){return n.node(l).rank});return e.forEach(u,s),a}return Xu}var Ju,fp;function Qq(){if(fp)return Ju;fp=1;var e=ge();Ju=t;function t(r,i){for(var o=0,a=1;a<i.length;++a)o+=n(r,i[a-1],i[a]);return o}function n(r,i,o){for(var a=e.zipObject(o,e.map(o,function(f,h){return h})),s=e.flatten(e.map(i,function(f){return e.sortBy(e.map(r.outEdges(f),function(h){return{pos:a[h.w],weight:r.edge(h).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var l=2*u-1;u-=1;var c=e.map(new Array(l),function(){return 0}),d=0;return e.forEach(s.forEach(function(f){var h=f.pos+u;c[h]+=f.weight;for(var m=0;h>0;)h%2&&(m+=c[h+1]),h=h-1>>1,c[h]+=f.weight;d+=f.weight*m})),d}return Ju}var Qu,hp;function $q(){if(hp)return Qu;hp=1;var e=ge();Qu=t;function t(n,r){return e.map(r,function(i){var o=n.inEdges(i);if(o.length){var a=e.reduce(o,function(s,u){var l=n.edge(u),c=n.node(u.v);return{sum:s.sum+l.weight*c.order,weight:s.weight+l.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return Qu}var $u,gp;function eR(){if(gp)return $u;gp=1;var e=ge();$u=t;function t(i,o){var a={};e.forEach(i,function(u,l){var c=a[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};e.isUndefined(u.barycenter)||(c.barycenter=u.barycenter,c.weight=u.weight)}),e.forEach(o.edges(),function(u){var l=a[u.v],c=a[u.w];!e.isUndefined(l)&&!e.isUndefined(c)&&(c.indegree++,l.out.push(a[u.w]))});var s=e.filter(a,function(u){return!u.indegree});return n(s)}function n(i){var o=[];function a(l){return function(c){c.merged||(e.isUndefined(c.barycenter)||e.isUndefined(l.barycenter)||c.barycenter>=l.barycenter)&&r(l,c)}}function s(l){return function(c){c.in.push(l),--c.indegree===0&&i.push(c)}}for(;i.length;){var u=i.pop();o.push(u),e.forEach(u.in.reverse(),a(u)),e.forEach(u.out,s(u))}return e.map(e.filter(o,function(l){return!l.merged}),function(l){return e.pick(l,["vs","i","barycenter","weight"])})}function r(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return $u}var ec,vp;function tR(){if(vp)return ec;vp=1;var e=ge(),t=ke();ec=n;function n(o,a){var s=t.partition(o,function(p){return e.has(p,"barycenter")}),u=s.lhs,l=e.sortBy(s.rhs,function(p){return-p.i}),c=[],d=0,f=0,h=0;u.sort(i(!!a)),h=r(c,l,h),e.forEach(u,function(p){h+=p.vs.length,c.push(p.vs),d+=p.barycenter*p.weight,f+=p.weight,h=r(c,l,h)});var m={vs:e.flatten(c,!0)};return f&&(m.barycenter=d/f,m.weight=f),m}function r(o,a,s){for(var u;a.length&&(u=e.last(a)).i<=s;)a.pop(),o.push(u.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return ec}var tc,pp;function nR(){if(pp)return tc;pp=1;var e=ge(),t=$q(),n=eR(),r=tR();tc=i;function i(s,u,l,c){var d=s.children(u),f=s.node(u),h=f?f.borderLeft:void 0,m=f?f.borderRight:void 0,p={};h&&(d=e.filter(d,function(q){return q!==h&&q!==m}));var v=t(s,d);e.forEach(v,function(q){if(s.children(q.v).length){var C=i(s,q.v,l,c);p[q.v]=C,e.has(C,"barycenter")&&a(q,C)}});var y=n(v,l);o(y,p);var b=r(y,c);if(h&&(b.vs=e.flatten([h,b.vs,m],!0),s.predecessors(h).length)){var x=s.node(s.predecessors(h)[0]),_=s.node(s.predecessors(m)[0]);e.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+x.order+_.order)/(b.weight+2),b.weight+=2}return b}function o(s,u){e.forEach(s,function(l){l.vs=e.flatten(l.vs.map(function(c){return u[c]?u[c].vs:c}),!0)})}function a(s,u){e.isUndefined(s.barycenter)?(s.barycenter=u.barycenter,s.weight=u.weight):(s.barycenter=(s.barycenter*s.weight+u.barycenter*u.weight)/(s.weight+u.weight),s.weight+=u.weight)}return tc}var nc,yp;function rR(){if(yp)return nc;yp=1;var e=ge(),t=He().Graph;nc=n;function n(i,o,a){var s=r(i),u=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(l){return i.node(l)});return e.forEach(i.nodes(),function(l){var c=i.node(l),d=i.parent(l);(c.rank===o||c.minRank<=o&&o<=c.maxRank)&&(u.setNode(l),u.setParent(l,d||s),e.forEach(i[a](l),function(f){var h=f.v===l?f.w:f.v,m=u.edge(h,l),p=e.isUndefined(m)?0:m.weight;u.setEdge(h,l,{weight:i.edge(f).weight+p})}),e.has(c,"minRank")&&u.setNode(l,{borderLeft:c.borderLeft[o],borderRight:c.borderRight[o]}))}),u}function r(i){for(var o;i.hasNode(o=e.uniqueId("_root")););return o}return nc}var rc,mp;function iR(){if(mp)return rc;mp=1;var e=ge();rc=t;function t(n,r,i){var o={},a;e.forEach(i,function(s){for(var u=n.parent(s),l,c;u;){if(l=n.parent(u),l?(c=o[l],o[l]=u):(c=a,a=u),c&&c!==u){r.setEdge(c,u);return}u=l}})}return rc}var ic,_p;function oR(){if(_p)return ic;_p=1;var e=ge(),t=Jq(),n=Qq(),r=nR(),i=rR(),o=iR(),a=He().Graph,s=ke();ic=u;function u(f){var h=s.maxRank(f),m=l(f,e.range(1,h+1),"inEdges"),p=l(f,e.range(h-1,-1,-1),"outEdges"),v=t(f);d(f,v);for(var y=Number.POSITIVE_INFINITY,b,x=0,_=0;_<4;++x,++_){c(x%2?m:p,x%4>=2),v=s.buildLayerMatrix(f);var q=n(f,v);q<y&&(_=0,b=e.cloneDeep(v),y=q)}d(f,b)}function l(f,h,m){return e.map(h,function(p){return i(f,p,m)})}function c(f,h){var m=new a;e.forEach(f,function(p){var v=p.graph().root,y=r(p,v,m,h);e.forEach(y.vs,function(b,x){p.node(b).order=x}),o(p,m,y.vs)})}function d(f,h){e.forEach(h,function(m){e.forEach(m,function(p,v){f.node(p).order=v})})}return ic}var oc,bp;function aR(){if(bp)return oc;bp=1;var e=ge(),t=He().Graph,n=ke();oc={positionX:m,findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:d,balance:h};function r(y,b){var x={};function _(q,C){var A=0,P=0,O=q.length,M=e.last(C);return e.forEach(C,function(S,E){var R=o(y,S),w=R?y.node(R).order:O;(R||S===M)&&(e.forEach(C.slice(P,E+1),function(k){e.forEach(y.predecessors(k),function(T){var z=y.node(T),B=z.order;(B<A||w<B)&&!(z.dummy&&y.node(k).dummy)&&a(x,T,k)})}),P=E+1,A=w)}),C}return e.reduce(b,_),x}function i(y,b){var x={};function _(C,A,P,O,M){var S;e.forEach(e.range(A,P),function(E){S=C[E],y.node(S).dummy&&e.forEach(y.predecessors(S),function(R){var w=y.node(R);w.dummy&&(w.order<O||w.order>M)&&a(x,R,S)})})}function q(C,A){var P=-1,O,M=0;return e.forEach(A,function(S,E){if(y.node(S).dummy==="border"){var R=y.predecessors(S);R.length&&(O=y.node(R[0]).order,_(A,M,E,P,O),M=E,P=O)}_(A,M,A.length,O,C.length)}),A}return e.reduce(b,q),x}function o(y,b){if(y.node(b).dummy)return e.find(y.predecessors(b),function(x){return y.node(x).dummy})}function a(y,b,x){if(b>x){var _=b;b=x,x=_}var q=y[b];q||(y[b]=q={}),q[x]=!0}function s(y,b,x){if(b>x){var _=b;b=x,x=_}return e.has(y[b],x)}function u(y,b,x,_){var q={},C={},A={};return e.forEach(b,function(P){e.forEach(P,function(O,M){q[O]=O,C[O]=O,A[O]=M})}),e.forEach(b,function(P){var O=-1;e.forEach(P,function(M){var S=_(M);if(S.length){S=e.sortBy(S,function(T){return A[T]});for(var E=(S.length-1)/2,R=Math.floor(E),w=Math.ceil(E);R<=w;++R){var k=S[R];C[M]===M&&O<A[k]&&!s(x,M,k)&&(C[k]=M,C[M]=q[M]=q[k],O=A[k])}}})}),{root:q,align:C}}function l(y,b,x,_,q){var C={},A=c(y,b,x,q),P=q?"borderLeft":"borderRight";function O(E,R){for(var w=A.nodes(),k=w.pop(),T={};k;)T[k]?E(k):(T[k]=!0,w.push(k),w=w.concat(R(k))),k=w.pop()}function M(E){C[E]=A.inEdges(E).reduce(function(R,w){return Math.max(R,C[w.v]+A.edge(w))},0)}function S(E){var R=A.outEdges(E).reduce(function(k,T){return Math.min(k,C[T.w]-A.edge(T))},Number.POSITIVE_INFINITY),w=y.node(E);R!==Number.POSITIVE_INFINITY&&w.borderType!==P&&(C[E]=Math.max(C[E],R))}return O(M,A.predecessors.bind(A)),O(S,A.successors.bind(A)),e.forEach(_,function(E){C[E]=C[x[E]]}),C}function c(y,b,x,_){var q=new t,C=y.graph(),A=p(C.nodesep,C.edgesep,_);return e.forEach(b,function(P){var O;e.forEach(P,function(M){var S=x[M];if(q.setNode(S),O){var E=x[O],R=q.edge(E,S);q.setEdge(E,S,Math.max(A(y,M,O),R||0))}O=M})}),q}function d(y,b){return e.minBy(e.values(b),function(x){var _=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY;return e.forIn(x,function(C,A){var P=v(y,A)/2;_=Math.max(C+P,_),q=Math.min(C-P,q)}),_-q})}function f(y,b){var x=e.values(b),_=e.min(x),q=e.max(x);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(A){var P=C+A,O=y[P],M;if(O!==b){var S=e.values(O);M=A==="l"?_-e.min(S):q-e.max(S),M&&(y[P]=e.mapValues(O,function(E){return E+M}))}})})}function h(y,b){return e.mapValues(y.ul,function(x,_){if(b)return y[b.toLowerCase()][_];var q=e.sortBy(e.map(y,_));return(q[1]+q[2])/2})}function m(y){var b=n.buildLayerMatrix(y),x=e.merge(r(y,b),i(y,b)),_={},q;e.forEach(["u","d"],function(A){q=A==="u"?b:e.values(b).reverse(),e.forEach(["l","r"],function(P){P==="r"&&(q=e.map(q,function(E){return e.values(E).reverse()}));var O=(A==="u"?y.predecessors:y.successors).bind(y),M=u(y,q,x,O),S=l(y,q,M.root,M.align,P==="r");P==="r"&&(S=e.mapValues(S,function(E){return-E})),_[A+P]=S})});var C=d(y,_);return f(_,C),h(_,y.graph().align)}function p(y,b,x){return function(_,q,C){var A=_.node(q),P=_.node(C),O=0,M;if(O+=A.width/2,e.has(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":M=-A.width/2;break;case"r":M=A.width/2;break}if(M&&(O+=x?M:-M),M=0,O+=(A.dummy?b:y)/2,O+=(P.dummy?b:y)/2,O+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":M=P.width/2;break;case"r":M=-P.width/2;break}return M&&(O+=x?M:-M),M=0,O}}function v(y,b){return y.node(b).width}return oc}var ac,wp;function sR(){if(wp)return ac;wp=1;var e=ge(),t=ke(),n=aR().positionX;ac=r;function r(o){o=t.asNonCompoundGraph(o),i(o),e.forEach(n(o),function(a,s){o.node(s).x=a})}function i(o){var a=t.buildLayerMatrix(o),s=o.graph().ranksep,u=0;e.forEach(a,function(l){var c=e.max(e.map(l,function(d){return o.node(d).height}));e.forEach(l,function(d){o.node(d).y=u+c/2}),u+=c+s})}return ac}var sc,xp;function uR(){if(xp)return sc;xp=1;var e=ge(),t=Gq(),n=Kq(),r=Uq(),i=ke().normalizeRanks,o=Yq(),a=ke().removeEmptyRanks,s=Zq(),u=Wq(),l=Xq(),c=oR(),d=sR(),f=ke(),h=He().Graph;sc=m;function m(N,D){var L=D&&D.debugTiming?f.time:f.notime;L("layout",function(){var V=L("  buildLayoutGraph",function(){return O(N)});L("  runLayout",function(){p(V,L)}),L("  updateInputGraph",function(){v(N,V)})})}function p(N,D){D("    makeSpaceForEdgeLabels",function(){M(N)}),D("    removeSelfEdges",function(){F(N)}),D("    acyclic",function(){t.run(N)}),D("    nestingGraph.run",function(){s.run(N)}),D("    rank",function(){r(f.asNonCompoundGraph(N))}),D("    injectEdgeLabelProxies",function(){S(N)}),D("    removeEmptyRanks",function(){a(N)}),D("    nestingGraph.cleanup",function(){s.cleanup(N)}),D("    normalizeRanks",function(){i(N)}),D("    assignRankMinMax",function(){E(N)}),D("    removeEdgeLabelProxies",function(){R(N)}),D("    normalize.run",function(){n.run(N)}),D("    parentDummyChains",function(){o(N)}),D("    addBorderSegments",function(){u(N)}),D("    order",function(){c(N)}),D("    insertSelfEdges",function(){H(N)}),D("    adjustCoordinateSystem",function(){l.adjust(N)}),D("    position",function(){d(N)}),D("    positionSelfEdges",function(){K(N)}),D("    removeBorderNodes",function(){B(N)}),D("    normalize.undo",function(){n.undo(N)}),D("    fixupEdgeLabelCoords",function(){T(N)}),D("    undoCoordinateSystem",function(){l.undo(N)}),D("    translateGraph",function(){w(N)}),D("    assignNodeIntersects",function(){k(N)}),D("    reversePoints",function(){z(N)}),D("    acyclic.undo",function(){t.undo(N)})}function v(N,D){e.forEach(N.nodes(),function(L){var V=N.node(L),G=D.node(L);V&&(V.x=G.x,V.y=G.y,D.children(L).length&&(V.width=G.width,V.height=G.height))}),e.forEach(N.edges(),function(L){var V=N.edge(L),G=D.edge(L);V.points=G.points,e.has(G,"x")&&(V.x=G.x,V.y=G.y)}),N.graph().width=D.graph().width,N.graph().height=D.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],_=["width","height"],q={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],A={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},P=["labelpos"];function O(N){var D=new h({multigraph:!0,compound:!0}),L=Z(N.graph());return D.setGraph(e.merge({},b,U(L,y),e.pick(L,x))),e.forEach(N.nodes(),function(V){var G=Z(N.node(V));D.setNode(V,e.defaults(U(G,_),q)),D.setParent(V,N.parent(V))}),e.forEach(N.edges(),function(V){var G=Z(N.edge(V));D.setEdge(V,e.merge({},A,U(G,C),e.pick(G,P)))}),D}function M(N){var D=N.graph();D.ranksep/=2,e.forEach(N.edges(),function(L){var V=N.edge(L);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(D.rankdir==="TB"||D.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function S(N){e.forEach(N.edges(),function(D){var L=N.edge(D);if(L.width&&L.height){var V=N.node(D.v),G=N.node(D.w),X={rank:(G.rank-V.rank)/2+V.rank,e:D};f.addDummyNode(N,"edge-proxy",X,"_ep")}})}function E(N){var D=0;e.forEach(N.nodes(),function(L){var V=N.node(L);V.borderTop&&(V.minRank=N.node(V.borderTop).rank,V.maxRank=N.node(V.borderBottom).rank,D=e.max(D,V.maxRank))}),N.graph().maxRank=D}function R(N){e.forEach(N.nodes(),function(D){var L=N.node(D);L.dummy==="edge-proxy"&&(N.edge(L.e).labelRank=L.rank,N.removeNode(D))})}function w(N){var D=Number.POSITIVE_INFINITY,L=0,V=Number.POSITIVE_INFINITY,G=0,X=N.graph(),ee=X.marginx||0,J=X.marginy||0;function xe($){var de=$.x,te=$.y,Ie=$.width,ne=$.height;D=Math.min(D,de-Ie/2),L=Math.max(L,de+Ie/2),V=Math.min(V,te-ne/2),G=Math.max(G,te+ne/2)}e.forEach(N.nodes(),function($){xe(N.node($))}),e.forEach(N.edges(),function($){var de=N.edge($);e.has(de,"x")&&xe(de)}),D-=ee,V-=J,e.forEach(N.nodes(),function($){var de=N.node($);de.x-=D,de.y-=V}),e.forEach(N.edges(),function($){var de=N.edge($);e.forEach(de.points,function(te){te.x-=D,te.y-=V}),e.has(de,"x")&&(de.x-=D),e.has(de,"y")&&(de.y-=V)}),X.width=L-D+ee,X.height=G-V+J}function k(N){e.forEach(N.edges(),function(D){var L=N.edge(D),V=N.node(D.v),G=N.node(D.w),X,ee;L.points?(X=L.points[0],ee=L.points[L.points.length-1]):(L.points=[],X=G,ee=V),L.points.unshift(f.intersectRect(V,X)),L.points.push(f.intersectRect(G,ee))})}function T(N){e.forEach(N.edges(),function(D){var L=N.edge(D);if(e.has(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function z(N){e.forEach(N.edges(),function(D){var L=N.edge(D);L.reversed&&L.points.reverse()})}function B(N){e.forEach(N.nodes(),function(D){if(N.children(D).length){var L=N.node(D),V=N.node(L.borderTop),G=N.node(L.borderBottom),X=N.node(e.last(L.borderLeft)),ee=N.node(e.last(L.borderRight));L.width=Math.abs(ee.x-X.x),L.height=Math.abs(G.y-V.y),L.x=X.x+L.width/2,L.y=V.y+L.height/2}}),e.forEach(N.nodes(),function(D){N.node(D).dummy==="border"&&N.removeNode(D)})}function F(N){e.forEach(N.edges(),function(D){if(D.v===D.w){var L=N.node(D.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:D,label:N.edge(D)}),N.removeEdge(D)}})}function H(N){var D=f.buildLayerMatrix(N);e.forEach(D,function(L){var V=0;e.forEach(L,function(G,X){var ee=N.node(G);ee.order=X+V,e.forEach(ee.selfEdges,function(J){f.addDummyNode(N,"selfedge",{width:J.label.width,height:J.label.height,rank:ee.rank,order:X+ ++V,e:J.e,label:J.label},"_se")}),delete ee.selfEdges})})}function K(N){e.forEach(N.nodes(),function(D){var L=N.node(D);if(L.dummy==="selfedge"){var V=N.node(L.e.v),G=V.x+V.width/2,X=V.y,ee=L.x-G,J=V.height/2;N.setEdge(L.e,L.label),N.removeNode(D),L.label.points=[{x:G+2*ee/3,y:X-J},{x:G+5*ee/6,y:X-J},{x:G+ee,y:X},{x:G+5*ee/6,y:X+J},{x:G+2*ee/3,y:X+J}],L.label.x=L.x,L.label.y=L.y}})}function U(N,D){return e.mapValues(e.pick(N,D),Number)}function Z(N){var D={};return e.forEach(N,function(L,V){D[V.toLowerCase()]=L}),D}return sc}var uc,Ep;function cR(){if(Ep)return uc;Ep=1;var e=ge(),t=ke(),n=He().Graph;uc={debugOrdering:r};function r(i){var o=t.buildLayerMatrix(i),a=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),e.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(o,function(s,u){var l="layer"+u;a.setNode(l,{rank:"same"}),e.reduce(s,function(c,d){return a.setEdge(c,d,{style:"invis"}),d})}),a}return uc}var cc,Sp;function lR(){return Sp||(Sp=1,cc="0.8.5"),cc}var lc,Cp;function dR(){return Cp||(Cp=1,lc={graphlib:He(),layout:uR(),debug:cR(),util:{time:ke().time,notime:ke().notime},version:lR()}),lc}var qp=dR();const Rp=(e,t,n="LR")=>{const r=new qp.graphlib.Graph;r.setDefaultEdgeLabel(()=>({}));const i=n==="LR";return r.setGraph({rankdir:n,ranksep:250,nodesep:20}),e.forEach(a=>{r.setNode(a.id,{width:280,height:60})}),t.forEach(a=>{r.setEdge(a.source,a.target)}),qp.layout(r),{nodes:e.map(a=>{const s=r.node(a.id),u=r.node(a.id);return{...a,targetPosition:i?Q.Left:Q.Top,sourcePosition:i?Q.Right:Q.Bottom,position:{x:s.x-u.width/2,y:s.y-u.height/2}}}),edges:t}},Km=(e,t)=>{const n=t.filter(i=>i.source===e).map(i=>i.target);let r=[...n];return n.forEach(i=>{r=[...r,...Km(i,t)]}),r},jm=(e,t)=>{const n=t.filter(i=>i.target===e).map(i=>i.source);let r=[...n];return n.forEach(i=>{r=[...r,...jm(i,t)]}),r};var fR=be('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>'),hR=be('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>'),gR=le("<!> <!>",1),vR=le(`<div><div class="absolute top-4 left-4 z-10 flex items-center gap-4 p-3 rounded-xl shadow-lg border transition-colors
              bg-white/90 backdrop-blur-sm border-gray-200 dark:bg-gray-900/90 dark:border-slate-300"><h1 class="text-lg font-bold text-gray-900 dark:text-white">Altitude Data Lineage</h1> <div class="h-6 w-px bg-gray-300 dark:bg-gray-700 mx-2"></div> <button class="p-2 rounded-full transition-colors
               bg-gray-100 text-gray-600 hover:bg-gray-200
               dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700" aria-label="Toggle Theme"><!></button> <div class="h-6 w-px bg-gray-300 dark:bg-gray-700 mx-2"></div> <!></div> <div class="w-full h-full bg-gray-50 dark:bg-gray-950 transition-colors"><!></div></div>`);function pR(e,t){ie(t,!1);const n=()=>_l(s,"$nodes",i),r=()=>_l(u,"$edges",i),[i,o]=b_(),{fitView:a}=jc();let s=gl([]),u=gl([]);const l={diamond:ZE};function c({node:E}){const R=E.id;let w=[];u.subscribe(z=>w=z)();const k=jm(R,w),T=new Set([R,...k]);s.update(z=>z.map(B=>({...B,data:{...B.data,highlighted:T.has(B.id)}}))),u.update(z=>z.map(B=>{const F=T.has(B.target)&&T.has(B.source);return{...B,animated:F,style:F?"stroke: #3b82f6; stroke-width: 2px;":""}}))}function d(){s.update(E=>E.map(R=>({...R,data:{...R.data,highlighted:!1}}))),u.update(E=>E.map(R=>({...R,animated:!1,style:""})))}function f(E){s.update(R=>{const w=R.findIndex(G=>G.id===E);if(w===-1)return R;const k=R[w],T=k.data.expanded;R[w]={...k,data:{...k.data,expanded:!T}};let z=[];u.subscribe(G=>z=G)();const B=Km(E,z),F=new Set(B),H=new Map(R.map(G=>[G.id,G])),K=new Set;if(!T){const G=[E];for(;G.length>0;){const X=G.shift(),ee=H.get(X);(X===E?!T:ee?.data.expanded)&&z.filter($=>$.source===X).map($=>$.target).forEach($=>{F.has($)&&(K.add($),G.push($))})}}const U=R.map(G=>F.has(G.id)?{...G,hidden:!K.has(G.id)}:G);let Z=[];u.subscribe(G=>Z=G)();const N=U.filter(G=>!G.hidden),D=Z.filter(G=>{const X=N.some(J=>J.id===G.source),ee=N.some(J=>J.id===G.target);return X&&ee}),{nodes:L}=Rp(N,D),V=U.map(G=>{const X=L.find(ee=>ee.id===G.id);return X?{...G,position:X.position,sourcePosition:X.sourcePosition,targetPosition:X.targetPosition}:G});return p(V),V})}let h=null;function m(E){h=E;let R=[],w=[];function k(H,K=null){const U=H.id||crypto.randomUUID(),Z={id:U,type:"diamond",data:{label:H.name||"Unknown",expanded:!1,hasChildren:H.children&&H.children.length>0,childrenCount:H.children?H.children.length:0,onToggle:()=>f(U)},position:{x:0,y:0},hidden:K!==null};R.push(Z),K&&w.push({id:`e${K}-${U}`,source:K,target:U,type:"smoothstep",animated:!0}),H.children&&Array.isArray(H.children)&&H.children.forEach(N=>k(N,U))}Array.isArray(E)?E.forEach(H=>k(H)):k(E);const T=R.filter(H=>!H.hidden),z=w.filter(H=>{const K=T.some(Z=>Z.id===H.source),U=T.some(Z=>Z.id===H.target);return K&&U}),{nodes:B}=Rp(T,z),F=R.map(H=>{const K=B.find(U=>U.id===H.id);return K?{...H,position:K.position,sourcePosition:K.sourcePosition,targetPosition:K.targetPosition}:H});s.set(F),u.set(w),p(F),setTimeout(()=>{a({duration:800})},100)}function p(E,R){typeof window<"u"&&h&&(localStorage.setItem("graphData",JSON.stringify(h)),localStorage.setItem("nodeStates",JSON.stringify(E.map(w=>({id:w.id,hidden:w.hidden,expanded:w.data.expanded})))))}function v(E){m(E.detail)}let y=qc(!1);function b(){j(y,!g(y)),typeof window<"u"&&localStorage.setItem("theme",g(y)?"dark":"light")}Wm(()=>{if(typeof window<"u"){const E=localStorage.getItem("theme");E&&j(y,E==="dark");const R=localStorage.getItem("graphData");if(R)try{const w=JSON.parse(R);m(w);const k=localStorage.getItem("nodeStates");if(k){const T=JSON.parse(k);s.update(z=>z.map(B=>{const F=T.find(H=>H.id===B.id);return F?{...B,hidden:F.hidden,data:{...B.data,expanded:F.expanded}}:B}))}}catch(w){console.error("Failed to load saved graph data",w)}}}),rr();var x=vR(),_=ue(x),q=se(ue(_),4),C=ue(q);{var A=E=>{var R=fR();W(E,R)},P=E=>{var R=hR();W(E,R)};ve(C,E=>{g(y)?E(A):E(P,!1)})}re(q);var O=se(q,4);XE(O,{$$events:{load:v}}),re(_);var M=se(_,2),S=ue(M);{let E=Tp(()=>g(y)?"dark":"light");xE(S,{get nodes(){return n()},get edges(){return r()},get nodeTypes(){return l},fitView:!0,class:"bg-gray-50 dark:bg-gray-950",get colorMode(){return g(E)},onnodeclick:c,onpaneclick:d,children:(R,w)=>{var k=gR(),T=he(k);LE(T,{});var z=se(T,2);KE(z,{get variant(){return it.Dots},gap:12,size:1}),W(R,k)},$$slots:{default:!0}})}re(M),re(x),pe(()=>Ze(x,1,`h-screen w-screen relative ${g(y)?"dark":""}`)),pt("click",q,b),W(e,x),oe(),o()}function CR(e){EE(e,{children:(t,n)=>{pR(t,{})},$$slots:{default:!0}})}export{CR as component,SR as universal};
